window.__require=function t(e,n,o){function i(r,s){if(!n[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var d="function"==typeof __require&&__require;if(!s&&d)return d(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var l=n[r]={exports:{}};e[r][0].call(l.exports,function(t){return i(e[r][1][t]||t)},l,l.exports,t,e,n,o)}return n[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<o.length;r++)i(o[r]);return i}({AndroidAdapter:[function(t,e,n){"use strict";cc._RF.push(e,"c9354yrbMRPL5/jW1t7VHaS","AndroidAdapter");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=t("../..//audio/GxAudioUtil"),s=t("../../GxGame"),c=t("../../util/GxTimer"),d=t("../../util/GxUtils"),l=t("../base/BaseAdapter"),u=t("../../core/GxEnum");(function(t){t[t.ERROR=-1]="ERROR",t[t.SUCC=1]="SUCC",t[t.SHOW=2]="SHOW",t[t.CLOSE=3]="CLOSE"})(a||(a={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.closeInterTime=0,e.closeNativeTime=0,e.closeNormalBannerTime=0,e.showLimmitTime=0,e.showVideoTime=0,e}return i(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,this.isGameCd=s.default.adConfig.adCdTime>0,t.prototype.initAd.call(this),this._gameCd(),this.initBanner(),this.initNativeAd())},e.prototype._gameCd=function(){var t=this;(new c.default).once(function(){t.isGameCd=!1,t.isNeedShowBanner&&t.showBanner()},1e3*s.default.adConfig.adCdTime)},e.prototype.getNativePlatform=function(){return d.default.callMethod("getNativePlatform")},e.prototype.showNormalBanner=function(){var t=this;d.default.callMethod("showBanner",null,function(e){e==a.SHOW?t.bannerTimer&&t.bannerTimer.stop():t.closeNormalBannerTime=t.get_time()})},e.prototype.hideNormalBanner=function(){d.default.callMethod("hideBanner")},e.prototype.destroyNormalBanner=function(){this.hideNormalBanner()},e.prototype.initBanner=function(){t.prototype.initBanner.call(this)},e.prototype.showBanner=function(){this.showNormalBanner()},e.prototype.hideBanner=function(){t.prototype.hideBanner.call(this),this.isNeedShowBanner=!1,this.hideNormalBanner()},e.prototype.showVideo=function(e,n){var o=this;void 0===n&&(n=""),this.get_time()-this.showVideoTime<5e3||(this.showVideoTime=this.get_time(),t.prototype.showVideo.call(this,null,n),d.default.callMethod("showVideo",null,function(t){t==a.ERROR&&o.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),n&&n.length>0&&(t==a.SUCC?o._videoCompleteEvent():t==a.ERROR?o._videoErrorEvent():o._videoCloseEvent()),setTimeout(function(){e&&e(t==a.SUCC),o.showVideoTime=0},500)}))},e.prototype.destroyVideo=function(){d.default.callMethod("destroyVideo")},e.prototype.showInterstitial=function(t,e){var n=this;d.default.callMethod("showInter",null,function(o){console.log("[gx_game] showInter ret = ",o),o==a.SHOW?(n.hideBanner(),t&&t()):(o==a.CLOSE&&(n.closeInterTime=n.get_time()),n.isNeedShowBanner=!0,e&&e())})},e.prototype.showOtherInterstitial=function(t,e){var n=this;d.default.callMethod("showOtherInter",null,function(o){console.log("[gx_game] showInter ret = ",o),o==a.SHOW?(n.hideBanner(),t&&t()):(o==a.CLOSE&&(n.closeInterTime=n.get_time()),n.isNeedShowBanner=!0,e&&e())})},e.prototype.destroyNormalInter=function(){d.default.callMethod("destroyInter")},e.prototype.showInterVideo=function(t,e){var n=this;console.log("[gx_game]showInterVideo \u4e0d\u80fd\u7528"),d.default.callMethod("showFullScreen",null,function(o){console.log("[gx_game] 233 showFullScreen ret = ",o),o==a.SHOW?(n.hideBanner(),t&&t()):(o==a.CLOSE&&(n.closeInterTime=n.get_time()),n.isNeedShowBanner=!0,e&&e())})},e.prototype.showOtherInterVideo=function(t,e){var n=this;console.log("[gx_game]showInterVideo \u4e0d\u80fd\u7528"),d.default.callMethod("showOtherFullScreen",null,function(o){console.log("[gx_game] 233 showFullScreen ret = ",o),o==a.SHOW?(n.hideBanner(),t&&t()):(o==a.CLOSE&&(n.closeInterTime=n.get_time()),n.isNeedShowBanner=!0,e&&e())})},e.prototype.destroyInterVideo=function(){d.default.callMethod("destroyInterVideo")},e.prototype.create_ad=function(t){var e=this;return new Promise(function(n){d.default.callMethod("createNativeAd",t.toString(),function(t){if(console.log("[gx_game]native data load succ:"+JSON.stringify(t)),t==a.ERROR);else try{e.add_native_data(t)}catch(n){console.error(n)}}),setTimeout(n,100)})},e.prototype.initNativeAd=function(){},e.prototype.showInterstitialNative=function(t,e,n,o){console.log("[gx_game]showInterstitialNative \u4e0d\u80fd\u7528"),o&&o()},e.prototype.hideInterstitialNative=function(){t.prototype.hideInterstitialNative.call(this)},e.prototype.showNativeInterstitial=function(t,e,n){void 0===n&&(n=1),d.default.getNativePlatform()==u.PLATFORM.G233?this.showInterVideo(t,e):this.showInterstitial(t,e)},e.prototype.showOtherNativeInterstitial=function(t,e,n){void 0===n&&(n=1),d.default.getNativePlatform()==u.PLATFORM.G233?this.showOtherInterVideo(t,e):this.showOtherInterstitial(t,e)},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this)},e.prototype.showNativeIcon=function(){if(this.isGameCd)return console.log("[gx_game]showNativeIcon \u5e7f\u544aCD\u4e2d")},e.prototype.hideNativeIcon=function(){t.prototype.hideNativeIcon.call(this),this.platformVersion()==u.PLATFORM.VIVO&&d.default.callMethod("hideNativeIcon")},e.prototype.loop_get_native_data=function(){var t=this._native_data_cache.length<5?1e3*d.default.randomInt(15,20):3e4;setTimeout(this.initNativeAd.bind(this),t)},e.prototype.reportAdClick=function(t){t&&void 0!==t&&(d.default.callMethod("reportAdClick",t.adId),this.remove_native_data(t))},e.prototype.showFeedAd=function(t,e){if(this.isGameCd)return console.log("[gx_game]showFeedAd \u5e7f\u544aCD\u4e2d");d.default.callMethod("showFeedAd",null,function(n){n==a.SHOW?(t&&t(),r.default.setMusicVolume(0),r.default.setSoundVolume(0)):(e&&e(),r.default.setMusicVolume(1),r.default.setSoundVolume(1))})},e.prototype.destroyFeedAd=function(){d.default.callMethod("destroyFeedAd")},e.prototype.showGamePortal=function(){d.default.callMethod("jumpLeisureSubject")},e.prototype.openUrl=function(t){d.default.callMethod("openUrl",t)},e.prototype.showPrivacy=function(t){void 0===t&&(t="privacy"),d.default.callMethod("showPrivacy",t)},e.prototype.showVivoIcon=function(){d.default.callMethod("showVivoIcon")},e.prototype.hideVivoIcon=function(){d.default.callMethod("hideVivoIcon")},e.prototype.supportGameBox=function(){return this.getNativePlatform()==u.PLATFORM.OPPO||this.getNativePlatform()==u.PLATFORM.VIVO},e.prototype.onClickBtn=function(t){this.getNativePlatform()==u.PLATFORM.G4399&&d.default.callMethod("onClickBtn",t+"")},e}(l.default);n.default=h,cc._RF.pop()},{"../..//audio/GxAudioUtil":"GxAudioUtil","../../GxGame":"GxGame","../../core/GxEnum":"GxEnum","../../util/GxTimer":"GxTimer","../../util/GxUtils":"GxUtils","../base/BaseAdapter":"BaseAdapter"}],AndroidH5Adapter:[function(t,e,n){"use strict";cc._RF.push(e,"aca74oKqrlKK5Hc4/0DpWzf","AndroidH5Adapter");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=t("../..//audio/GxAudioUtil"),s=t("../../GxGame"),c=t("../../util/GxTimer"),d=t("../../util/GxUtils"),l=t("../base/BaseAdapter"),u=t("../../core/GxEnum");(function(t){t[t.ERROR=-1]="ERROR",t[t.SUCC=1]="SUCC",t[t.SHOW=2]="SHOW",t[t.CLOSE=3]="CLOSE"})(a||(a={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.closeInterTime=0,e.closeNativeTime=0,e.closeNormalBannerTime=0,e.showLimmitTime=0,e.showVideoTime=0,e}return i(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,this.isGameCd=s.default.adConfig.adCdTime>0,t.prototype.initAd.call(this),this._gameCd(),this.initBanner(),this.initNativeAd())},e.prototype._gameCd=function(){var t=this;(new c.default).once(function(){t.isGameCd=!1,t.isNeedShowBanner&&t.showBanner()},1e3*s.default.adConfig.adCdTime)},e.prototype.getNativePlatform=function(){return this.callMethod("getNativePlatform")},e.prototype.showNormalBanner=function(){var t=this;this.callMethod("showBanner",null,function(e){e==a.SHOW?t.bannerTimer&&t.bannerTimer.stop():t.closeNormalBannerTime=t.get_time()})},e.prototype.hideNormalBanner=function(){this.callMethod("hideBanner")},e.prototype.destroyNormalBanner=function(){this.hideNormalBanner()},e.prototype.initBanner=function(){t.prototype.initBanner.call(this)},e.prototype.showBanner=function(){this.showNormalBanner()},e.prototype.hideBanner=function(){t.prototype.hideBanner.call(this),this.isNeedShowBanner=!1,this.hideNormalBanner()},e.prototype.showVideo=function(e,n){var o=this;void 0===n&&(n=""),this.get_time()-this.showVideoTime<500||(this.showVideoTime=this.get_time(),t.prototype.showVideo.call(this,null,n),this.callMethod("showVideo",null,function(t){t==a.ERROR&&o.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),n&&n.length>0&&(t==a.SUCC?o._videoCompleteEvent():t==a.ERROR?o._videoErrorEvent():o._videoCloseEvent()),e&&e(t==a.SUCC)}))},e.prototype.destroyVideo=function(){this.callMethod("destroyVideo")},e.prototype.showInterstitial=function(t,e){var n=this;this.callMethod("showInter",null,function(o){console.log("[gx_game] showInter ret = ",o),o==a.SHOW?(n.hideBanner(),t&&t()):(o==a.CLOSE&&(n.closeInterTime=n.get_time()),n.isNeedShowBanner=!0,e&&e())})},e.prototype.showOtherInterstitial=function(t,e){var n=this;this.callMethod("showOtherInter",null,function(o){console.log("[gx_game] showInter ret = ",o),o==a.SHOW?(n.hideBanner(),t&&t()):(o==a.CLOSE&&(n.closeInterTime=n.get_time()),n.isNeedShowBanner=!0,e&&e())})},e.prototype.destroyNormalInter=function(){this.callMethod("destroyInter")},e.prototype.showInterVideo=function(t,e){var n=this;console.log("[gx_game]showInterVideo \u4e0d\u80fd\u7528"),this.callMethod("showFullScreen",null,function(o){console.log("[gx_game] 233 showFullScreen ret = ",o),o==a.SHOW?(n.hideBanner(),t&&t()):(o==a.CLOSE&&(n.closeInterTime=n.get_time()),n.isNeedShowBanner=!0,e&&e())})},e.prototype.showOtherInterVideo=function(t,e){var n=this;console.log("[gx_game]showInterVideo \u4e0d\u80fd\u7528"),this.callMethod("showOtherFullScreen",null,function(o){console.log("[gx_game] 233 showFullScreen ret = ",o),o==a.SHOW?(n.hideBanner(),t&&t()):(o==a.CLOSE&&(n.closeInterTime=n.get_time()),n.isNeedShowBanner=!0,e&&e())})},e.prototype.destroyInterVideo=function(){this.callMethod("destroyInterVideo")},e.prototype.create_ad=function(t){var e=this;return new Promise(function(n){e.callMethod("createNativeAd",t.toString(),function(t){if(console.log("[gx_game]native data load succ:"+JSON.stringify(t)),t==a.ERROR);else try{e.add_native_data(t)}catch(n){console.error(n)}}),setTimeout(n,100)})},e.prototype.initNativeAd=function(){},e.prototype.showInterstitialNative=function(t,e,n,o){console.log("[gx_game]showInterstitialNative \u4e0d\u80fd\u7528"),o&&o()},e.prototype.hideInterstitialNative=function(){t.prototype.hideInterstitialNative.call(this)},e.prototype.showNativeInterstitial=function(t,e,n){void 0===n&&(n=1),this.getNativePlatform()==u.PLATFORM.G233?this.showInterVideo(t,e):this.showInterstitial(t,e)},e.prototype.showOtherNativeInterstitial=function(t,e,n){void 0===n&&(n=1),this.getNativePlatform()==u.PLATFORM.G233?this.showOtherInterVideo(t,e):this.showOtherInterstitial(t,e)},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this)},e.prototype.showNativeIcon=function(){if(this.isGameCd)return console.log("[gx_game]showNativeIcon \u5e7f\u544aCD\u4e2d")},e.prototype.hideNativeIcon=function(){t.prototype.hideNativeIcon.call(this),this.platformVersion()==u.PLATFORM.VIVO&&this.callMethod("hideNativeIcon")},e.prototype.loop_get_native_data=function(){var t=this._native_data_cache.length<5?1e3*d.default.randomInt(15,20):3e4;setTimeout(this.initNativeAd.bind(this),t)},e.prototype.reportAdClick=function(t){t&&void 0!==t&&(this.callMethod("reportAdClick",t.adId),this.remove_native_data(t))},e.prototype.showFeedAd=function(t,e){if(this.isGameCd)return console.log("[gx_game]showFeedAd \u5e7f\u544aCD\u4e2d");this.callMethod("showFeedAd",null,function(n){n==a.SHOW?(t&&t(),r.default.setMusicVolume(0),r.default.setSoundVolume(0)):(e&&e(),r.default.setMusicVolume(1),r.default.setSoundVolume(1))})},e.prototype.destroyFeedAd=function(){this.callMethod("destroyFeedAd")},e.prototype.showGamePortal=function(){this.callMethod("jumpLeisureSubject")},e.prototype.openUrl=function(t){this.callMethod("openUrl",t)},e.prototype.showPrivacy=function(t){void 0===t&&(t="privacy"),this.callMethod("showPrivacy",t)},e.prototype.showVivoIcon=function(){this.callMethod("showVivoIcon")},e.prototype.hideVivoIcon=function(){this.callMethod("hideVivoIcon")},e.prototype.callMethod=function(t,e,n){void 0===e&&(e=null);var o=t.substring(0,1).toUpperCase()+t.substring(1);return n&&void 0!==n&&(window["onGx"+o]=n),null==e?window.H5Bridge[t]():window.H5Bridge[t](e)},e.prototype.supportGameBox=function(){return this.getNativePlatform()==u.PLATFORM.OPPO||this.getNativePlatform()==u.PLATFORM.VIVO},e.prototype.backGameHall=function(){this.callMethod("backGameHall")},e.prototype.getGameAge=function(){return this.callMethod("getGameAge")},e.prototype.getConfigUrl=function(){return this.callMethod("getConfigUrl")},e.prototype.jumpGame=function(t){return this.callMethod("jumpGame",t)},e}(l.default);n.default=h,cc._RF.pop()},{"../..//audio/GxAudioUtil":"GxAudioUtil","../../GxGame":"GxGame","../../core/GxEnum":"GxEnum","../../util/GxTimer":"GxTimer","../../util/GxUtils":"GxUtils","../base/BaseAdapter":"BaseAdapter"}],BaseAdapter:[function(t,e,n){"use strict";cc._RF.push(e,"f35bek+Sg1CGKRD8Ad8vB5/","BaseAdapter"),Object.defineProperty(n,"__esModule",{value:!0}),n.RECORDER_STATE=void 0;var o,i=t("../../util/ResUtil"),a=t("../../util/GxTimer"),r=t("../../core/GxEnum"),s=t("../../core/GxConstant"),c=t("../../util/GxUtils"),d=t("../../GxGame"),l=t("../../util/GxLog"),u=t("../../GxChecker");(function(t){t[t.NO=0]="NO",t[t.START=1]="START",t[t.STOP=2]="STOP",t[t.PAUSE=3]="PAUSE",t[t.RESUME=4]="RESUME"})(o=n.RECORDER_STATE||(n.RECORDER_STATE={}));var h=function(){function t(){this.authorizeView=null,this.privacyView=null,this.isInitAd=!1,this.bannerAd=null,this.videoAd=null,this.interAd=null,this.bannerNode=null,this.innerInter=null,this.nativeInter=null,this.nativeIcon=null,this.portalAd=null,this.blockAd=null,this.appBox=null,this._native_data_cache=[],this._native_custom_inter_cache=[],this._native_custom_banner_cache=[],this.isNeedShowBanner=!1,this.isGameCd=!1,this.addIconNode=null,this.interShowTime=0,this.bannerShowTime=0,this.gameRecorder=null,this.videoPath=null,this.gameRecorderState=o.NO,this.bannerTimer=null,this.nativeInterTimer=null,this.bannerDelayTimer=null,this.interIdx=1,this.cur_show_ad_index=0,this.companyView=null,this.icNum=-1,this.gameBoxNumListener=null,this.ismailiang=!1,this.waitSubIds=[],this.manifestInfo=null,this.canReward=!1,this.curVideoFlag=""}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.initAd=function(){console.log("[gx_game]\u5e7f\u544a\u521d\u59cb\u5316")},t.prototype.setManifestInfo=function(t){this.manifestInfo=t,console.log("[gx_game]\u8bbe\u7f6einfo")},t.prototype.showAuthorize=function(t,e){var n=this;i.default.loadPrefab("gx/prefab/authorize",function(o,i){if(o)e();else if(null==n.authorizeView||!cc.isValid(n.authorizeView.node,!0)){var a=cc.instantiate(i);d.default.uiGroup&&(a.group=d.default.uiGroup),n.authorizeView=a.getComponent("Gx_authorize"),n.authorizeView.show(t,e)}})},t.prototype.showPrivacy=function(t){var e=this;void 0===t&&(t="privacy"),i.default.loadPrefab("gx/prefab/privacy",function(n,o){if(null==e.privacyView||!cc.isValid(e.privacyView.node,!0)){var i=cc.instantiate(o);d.default.uiGroup&&(i.group=d.default.uiGroup),e.privacyView=i.getComponent("Gx_privacy"),e.privacyView.show(t)}})},t.prototype.showGameOverAD=function(){},t.prototype.canIn=function(){return!1},t.prototype.showBanner=function(){u.default.getInstance().check(u.default.MsgType.ad_banner_show)},t.prototype.hideBanner=function(){u.default.getInstance().check(u.default.MsgType.ad_banner_hide),this.bannerTimer&&this.bannerTimer.clear(),this.bannerDelayTimer&&this.bannerDelayTimer.clear(),this.bannerNode&&void 0!==this.bannerNode&&cc.isValid(this.bannerNode.node,!0)&&this.bannerNode.node.destroy(),this.bannerNode=null},t.prototype.showVideo=function(t,e){void 0===e&&(e=""),this.curVideoFlag=e,u.default.getInstance().check(u.default.MsgType.ad_video,{flag:e}),e?d.default.gameEvent("reward",{flag:this.curVideoFlag}):console.warn("\u89c6\u9891\u70b9\u6ca1\u6709\u52a0flag"),t&&t(!0)},t.prototype._videoCompleteEvent=function(){d.default.gameEvent("reward_complete",{flag:this.curVideoFlag})},t.prototype._videoErrorEvent=function(){d.default.gameEvent("reward_error",{flag:this.curVideoFlag})},t.prototype._videoCloseEvent=function(){d.default.gameEvent("reward_close",{flag:this.curVideoFlag})},t.prototype.reportAdShow=function(t){if(t&&void 0!==t)for(var e in t.ad&&t.ad.reportAdShow({adId:t.adId}),this._native_data_cache)if(this._native_data_cache[e].adId==t.adId){this._native_data_cache[e].state=r.ad_native_state.show;break}},t.prototype.reportAdClick=function(t){t&&void 0!==t&&(t.ad&&t.ad.reportAdClick({adId:t.adId}),this.remove_native_data(t))},t.prototype.getLocalNativeData=function(t){if(d.default.adConfig.useNative){if(d.default.adConfig.switchPool){for(var e=[],n=0,o=this._native_data_cache;n<o.length;n++){var i=o[n];i.type==t&&e.push(i)}return this.check_native_data_list_is_reprot(e)?e.length>0?e[c.default.randomInt(0,e.length-1)]:null:this.get_latest_native_data(e)}return this.cur_show_ad_index>=this._native_data_cache.length&&(this.cur_show_ad_index=0),this._native_data_cache[this.cur_show_ad_index++]}return t==r.ad_native_type.banner?this._native_custom_banner_cache&&this._native_custom_banner_cache.length>0?this._native_custom_banner_cache.shift():null:this._native_custom_inter_cache&&this._native_custom_inter_cache.length>0?this._native_custom_inter_cache.shift():null},t.prototype.showInterstitialNative=function(){},t.prototype.showInterstitial=function(){},t.prototype.hideInterstitialNative=function(){this.innerInter&&void 0!==this.innerInter&&cc.isValid(this.innerInter.node,!0)&&this.innerInter.node.destroy(),this.innerInter=null},t.prototype.showNativeInterstitial=function(t,e,n){void 0===n&&(n=0),u.default.getInstance().check(u.default.MsgType.ad_inter,{})},t.prototype.showOtherNativeInterstitial=function(t,e,n){void 0===n&&(n=0),u.default.getInstance().check(u.default.MsgType.ad_otherInter,{})},t.prototype.hideNativeInterstitial=function(){this.nativeInter&&void 0!==this.nativeInter&&cc.isValid(this.nativeInter.node,!0)&&this.nativeInter.node.destroy(),this.nativeInter=null,this.nativeInterTimer&&this.nativeInterTimer.clear(),this.nativeInterTimer=null},t.prototype.showVivoIcon=function(){},t.prototype.hideVivoIcon=function(){},t.prototype.showNativeIcon=function(){},t.prototype.hideNativeIcon=function(){this.nativeIcon&&void 0!==this.nativeIcon&&cc.isValid(this.nativeIcon.node,!0)&&this.nativeIcon.node.destroy(),this.nativeIcon=null},t.prototype.platformVersion=function(){return s.default.IS_OPPO_GAME?window.qg.getSystemInfoSync().platformVersion:s.default.IS_VIVO_GAME?window.qg.getSystemInfoSync().platformVersionCode:0},t.prototype.showAddDesktop=function(){},t.prototype.hasAddDesktop=function(){},t.prototype.addDesktop=function(t,e,n){void 0===n&&(n=!0)},t.prototype.createToast=function(t){if(null==this.toastView||!cc.isValid(this.toastView.node,!0)){var e=cc.instantiate(c.default.getRes("gx/prefab/toast",cc.Prefab));d.default.uiGroup&&(e.group=d.default.uiGroup),this.toastView=e.getComponent("Gx_toast")}this.toastView&&this.toastView.show&&this.toastView.show(t)},t.prototype.supportGameBox=function(){return!!s.default.IS_OPPO_GAME&&this.platformVersion()>=1076},t.prototype.showGamePortal=function(t,e,n,o,i){void 0===n&&(n=!0),void 0===o&&(o=""),void 0===i&&(i=300)},t.prototype.hideGamePortal=function(){},t.prototype.setClickInnerInterstitialBtn=function(t,e){this._setClickNative(r.ad_native_type.inter2,t,e)},t.prototype.setClickNativeBanner=function(t,e){this._setClickNative(r.ad_native_type.banner,t,e)},t.prototype.clickNativeInnerInterstitial=function(){if(this.isGameCd)return console.log("[gx_game]\u5e7f\u544aCD\u4e2d");this.innerInter&&cc.isValid(this.innerInter.node,!0)&&this.innerInter.report_click()},t.prototype.clickNative=function(){if(this.isGameCd)return console.log("[gx_game]\u5e7f\u544aCD\u4e2d");var t=this.getLocalNativeData(r.ad_native_type.inter1);null==t&&(t=this.getLocalNativeData(r.ad_native_type.banner)),null==t&&(t=this.getLocalNativeData(r.ad_native_type.inter2)),null==t&&(t=this.getLocalNativeData(r.ad_native_type.native_icon)),t&&(this.reportAdShow(t),this.reportAdClick(t))},t.prototype.recorderStart=function(){},t.prototype.recorderStop=function(t){t&&t(!1)},t.prototype.hasRecorderPath=function(){return null!=this.videoPath},t.prototype.shareRecorder=function(t,e){e&&e()},t.prototype.showRecorderLayer=function(){},t.prototype.login=function(t){t&&t(!0)},t.prototype.showQQAppBox=function(){},t.prototype.hideQQAppBox=function(){},t.prototype.showQQBlockAd=function(){},t.prototype.hideQQBlockAd=function(){},t.prototype.showCustomLeft=function(){},t.prototype.showCustomRight=function(){},t.prototype.hideCustomLeft=function(){},t.prototype.hideCustomRight=function(){},t.prototype.showCrazyPoint=function(t,e,n,o){if(void 0===o&&(o=!1),d.default.gGB("crazy")){var i=cc.instantiate(c.default.getRes("gx/prefab/crazypoint",cc.Prefab)),a=i.getComponent("Gx_crazypoint");i.parent=cc.director.getScene(),i.zIndex=cc.macro.MAX_ZINDEX-1,a.show(t,e,n,o)}else e&&e()},t.prototype.showGameBox=function(t,e,n){var o=this;if(d.default.gGB("z1")){var i=c.default.getRes("gx/prefab/gameBox",cc.Prefab),a=cc.instantiate(i),r=a.getComponent("Gx_gameBox");a.parent=cc.director.getScene(),a.zIndex=cc.macro.MAX_ZINDEX-1,r.show(t,e,function(t){n?n(t):o.gameBoxNumListener?o.gameBoxNumListener(t):(o.gameBoxNumListener||l.default.e("\u6ca1\u6709\u8bbe\u7f6e\u91d1\u5e01\u56de\u8c03 gameBoxNumListener"),n&&n(t))})}else e&&e()},t.prototype.setGameBoxNumCallback=function(t){this.gameBoxNumListener=t},t.prototype.showInterVideo=function(t,e){e&&e()},t.prototype.destroyInterVideo=function(){},t.prototype.showFeedAd=function(t,e){e&&e()},t.prototype.destroyFeedAd=function(){},t.prototype.getGameAge=function(){return"12"},t.prototype.openUrl=function(){},t.prototype.getDeviceId=function(){},t.prototype.backGameHall=function(){},t.prototype.getConfigUrl=function(){return"http://127.0.0.1:8080/config.json"},t.prototype.jumpGame=function(t){window.location.href=t},t.prototype.initBanner=function(){this.bannerTimer=new a.default},t.prototype.initNativeAd=function(){},t.prototype.get_time=function(){return window.cc?window.cc.sys.now():window.Laya?window.Laya.timer.currTimer:(new Date).getTime()},t.prototype.check_native_data_list_is_reprot=function(t){if(t.length>0)for(var e in t)if(t[e].state==r.ad_native_state.need_show)return!1;return!0},t.prototype.get_latest_native_data=function(t){var e=[];for(var n in t)if(t[n].state==r.ad_native_state.need_show)return t[n];return e.length>0?e[c.default.randomInt(0,e.length-1)]:t.length>0?t[c.default.randomInt(0,t.length-1)]:null},t.prototype.add_native_data=function(t){for(var e in this._native_data_cache)if(this._native_data_cache[e].adId==t.adId)return;t.state=r.ad_native_state.need_show,this._native_data_cache.push(t)},t.prototype.remove_native_data=function(t){for(var e in this._native_data_cache)if(this._native_data_cache[e].adId==t.adId)return console.log("remove native_data:",t),void this._native_data_cache.splice(parseInt(e),1)},t.prototype.is_limit_native_length=function(t){var e=0;for(var n in this._native_data_cache)this._native_data_cache[n].type==t&&this._native_data_cache[n].state!=r.ad_native_state.click&&++e;return e>=d.default.adConfig.nativeAdLimitCount},t.prototype._setClickNative=function(t,e,n){void 0===n&&(n=null)},t.prototype.LOG=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];l.default.i.apply(l.default,t)},t.prototype.LOGE=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];l.default.e.apply(l.default,t)},t.prototype.LOGW=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];l.default.w.apply(l.default,t)},t.prototype.shareMessageToFriend=function(t){t&&t(!0)},t.prototype.setOpenDataShareCallback=function(){},t.prototype.getSubIds=function(){return[]},t.prototype.submsg=function(t,e){e&&e(!1)},t.prototype.initSubmsg=function(){},t.prototype.rewardAdEnd=function(){},t.prototype.ttReport=function(){},t.prototype.onClickBtn=function(){},t.prototype.userFrom=function(t){t&&t(!1)},t.prototype.preShowVideo=function(t){t&&t(!1)},t.prototype.showPositionBanner=function(){},t.instance=null,t}();n.default=h,cc._RF.pop()},{"../../GxChecker":"GxChecker","../../GxGame":"GxGame","../../core/GxConstant":"GxConstant","../../core/GxEnum":"GxEnum","../../util/GxLog":"GxLog","../../util/GxTimer":"GxTimer","../../util/GxUtils":"GxUtils","../../util/ResUtil":"ResUtil"}],BaseGxConstant:[function(t,e,n){"use strict";cc._RF.push(e,"17cd7QrcfhNnLxrexmbH4Jr","BaseGxConstant"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.IS_VIVO_GAME=!1,t.IS_OPPO_GAME=!1,t.IS_MI_GAME=!1,t.IS_IOS_NATIVE=!1,t.IS_IOS_H5=!1,t.IS_ANDROID_NATIVE=!1,t.IS_ANDROID_H5=!1,t.IS_WECHAT_GAME=!1,t.IS_QQ_GAME=!1,t.IS_TT_GAME=!1,t.IS_BAIDU_GAME=!1,t.IS_HUAWEI_GAME=!1,t.IS_UC_GAME=!1,t.IS_KS_GAME=!1,t.IS_4399_H5_GAME=!1,t.IS_4399_BOX_GAME=!1,t.IS_ZFB_GAME=!1,t.IS_MEIZU_GAME=!1,t.KEY_PRIVACY_AGREE="_GxPrivacyAgree_",t}();n.default=o,cc._RF.pop()},{}],BaseGxEnginePlatformProxy:[function(t,e,n){"use strict";cc._RF.push(e,"9abe0dR7hlGa5Eum5YHKZ+9","BaseGxEnginePlatformProxy"),Object.defineProperty(n,"__esModule",{value:!0}),n.BaseGxEnginePlatformProxy=void 0;var o=t("./GxEngineUtil"),i=function(){function t(){this.api={},this._config={},this.config={},this.config={persistenceName:"GxEngine",persistenceNameOld:"GxEngine_mg"}}return t.createInstance=function(){return new t},t.prototype.getConfig=function(){return this.config},t.prototype.getStorage=function(t,e,n){if(void 0===e&&(e=!1),t=localStorage.getItem(t),!e)return o.GxEngineUtil.isJSONString(t)?JSON.parse(t):{};o.GxEngineUtil.isJSONString(t)?n&&n(JSON.parse(t)):n&&n({})},t.prototype.setStorage=function(t,e){localStorage.setItem(t,e)},t.prototype._setSystemProxy=function(t){this._sysCallback=t},t.prototype.getSystemInfo=function(t){var e={mp_platform:"web",system:this._getOs(),screenWidth:window.screen.width,screenHeight:window.screen.height,systemLanguage:navigator.language};this._sysCallback&&(e=o.GxEngineUtil.extend(e,this._sysCallback(t))),t.success(e),t.complete()},t.prototype._getOs=function(){var t=navigator.userAgent;return/Windows/i.test(t)?/Phone/.test(t)||/WPDesktop/.test(t)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(t)?"iOS":/Android/.test(t)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Mac/i.test(t)?"MacOS":/Linux/.test(t)?"Linux":/CrOS/.test(t)?"ChromeOS":""},t.prototype.getNetworkType=function(t){t.complete()},t.prototype.onNetworkStatusChange=function(){},t.prototype.getQuickDevice=function(){},t.prototype.request=function(t){var e={statusCode:200,data:{},errMsg:""},n=new XMLHttpRequest;if(n.open(t.method,t.url),t.header)for(var i in t.header)n.setRequestHeader(i,t.header[i]);return n.onreadystatechange=function(){4===n.readyState&&200===n.status?(e.statusCode=200,o.GxEngineUtil.isJSONString(n.responseText)&&(e.data=JSON.parse(n.responseText)),t.success(e)):200!==n.status&&(e.errMsg="network error",t.fail(e))},n.ontimeout=function(){e.errMsg="timeout",t.fail(e)},n.send(t.data),n},t.prototype.initAutoTrackInstance=function(t,e){this.instance=t,this.autoTrack=e.autoTrack;var n=this;"onpagehide"in window?window.onpagehide=function(){n.onPageHide(!0)}:window.onbeforeunload=function(){n.onPageHide(!0)},n.onPageShow(),n.autoTrack.appHide&&n.instance.timeEvent("ta_page_hide"),"onvisibilitychange"in document&&(document.onvisibilitychange=function(){document.hidden?n.onPageHide(!1):(n.onPageShow(),n.autoTrack.appHide&&n.instance.timeEvent("ta_page_hide"))})},t.prototype.setGlobal=function(t,e){window[e]=t},t.prototype.getAppOptions=function(){},t.prototype.showToast=function(){},t.prototype.onPageShow=function(){var t;this.autoTrack.appShow&&(o.GxEngineUtil.extend(t={},this.autoTrack.properties),o.GxEngineUtil.isFunction(this.autoTrack.callback)&&o.GxEngineUtil.extend(t,this.autoTrack.callback("appShow")),this.instance._internalTrack("ta_page_show",t))},t.prototype.onPageHide=function(t){var e;this.autoTrack.appHide&&(o.GxEngineUtil.extend(e={},this.autoTrack.properties),o.GxEngineUtil.isFunction(this.autoTrack.callback)&&o.GxEngineUtil.extend(e,this.autoTrack.callback("appHide")),this.instance._internalTrack("ta_page_hide",e,new Date,null,t))},t}();n.BaseGxEnginePlatformProxy=i,cc._RF.pop()},{"./GxEngineUtil":"GxEngineUtil"}],BaseGxGame:[function(t,e,n){"use strict";cc._RF.push(e,"f0cc66uN2RCAbUEokimQTJu","BaseGxGame");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,a){function r(t){try{c(o.next(t))}catch(e){a(e)}}function s(t){try{c(o.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return c([t,e])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(s){a=[6,s],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("../GxConstant"),r=t("../../ad/oppo/OppoAdapter"),s=t("../../ad/base/BaseAdapter"),c=t("../GxGameUtil"),d=t("../../GxAdParams"),l=t("../../util/GxLog"),u=t("../../util/ResUtil"),h=t("../../GxGame"),p=t("../../ad/vivo/VivoAdapter"),f=t("../../ad/android/AndroidAdapter"),g=t("../../ad/android/AndroidH5Adapter"),m=t("../../util/GxUtils"),v=t("../../ad/4399/H54399Adapter"),_=t("../../ad/qq/QQAdapter"),y=t("../GxEnum"),A=t("../../ad/hw/HwAdapter"),w=t("../../ad/mi/MiAdapter"),I=t("../../ad/wx/WxAdapter"),S=t("../../util/GxLog"),b=t("../../ad/tt/TTAdapter"),x=t("../../ad/ks/KsAdapter"),P=t("../../img/GxImgMgr"),G=t("../../ad/zfb/ZFBAdapter"),E=t("../../GxChecker"),T=function(){function t(){}return t.initPlatform=function(t){var e=this;if(this.initPlatformEnd)return l.default.w("\u5df2\u7ecf\u521d\u59cb\u5316\u8fc7\u6e20\u9053"),void(t&&t());this.initPlatformEnd=!0;var n=!0,r=function(){return o(e,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return n?c.default.getInstance().initLabel(d.AdParams.labelName):l.default.w("\u4e0d\u521d\u59cb\u5316\u6807\u7b7e"),[4,P.default.getInstance().init(d.AdParams.heJiConfig)];case 1:return e.sent(),t&&t(),[2]}})})};if(void 0!==window.qg){if(void 0!==window.qg.getBattle){console.log("\u8fdb\u5165oppo"),a.default.IS_OPPO_GAME=!0;var s=qg.getFileSystemManager();try{d.AdParams.labelName=d.AdParams.oppo.labelName,d.AdParams.age=d.AdParams.oppo.age,d.AdParams.company=d.AdParams.oppo.company,d.AdParams.softCode=d.AdParams.oppo.softCode,d.AdParams.ysCompanyName=d.AdParams.oppo.ysCompanyName,d.AdParams.ysMail=d.AdParams.oppo.ysMail,d.AdParams.ysAddress=d.AdParams.oppo.ysAddress,d.AdParams.heJiConfig=d.AdParams.oppo.heJiConfig,s.readdir({dirPath:"src",success:function(t){console.log(JSON.stringify(t));for(var e="",n="",o=0;o<t.files.length;o++){var i=t.files[o];-1!=i.indexOf("gamecenter")&&(i.endsWith(".png")||i.endsWith(".jpg")?e=i:i.endsWith(".json")&&(n=i))}if(e){var a=new Image,c=!1;a.onload=function(){c=!0;var t=new cc.Texture2D;t.initWithElement(a),t.handleLoadedTexture(),h.default.LogoSp=new cc.SpriteFrame(t)},a.onerror=function(t){c||(console.warn(t),l.default.w("oppo img err"),l.default.w(t))},a.src="src/"+e}else l.default.w("oppo \u6ca1\u83b7\u53d6\u5230\u56fe\u7247");if(n){h.default.appId=n.replace(".json","");try{s.readFile({filePath:"src/"+n,encoding:"utf8",success:function(t){console.log("text: "+t.data);var e=JSON.parse(t.data);d.AdParams.oppo=JSON.parse(JSON.stringify(e.oppo)),d.AdParams.labelName=d.AdParams.oppo.labelName,d.AdParams.age=d.AdParams.oppo.age,d.AdParams.company=d.AdParams.oppo.company,d.AdParams.softCode=d.AdParams.oppo.softCode,d.AdParams.ysCompanyName=d.AdParams.oppo.ysCompanyName,d.AdParams.ysMail=d.AdParams.oppo.ysMail,d.AdParams.ysAddress=d.AdParams.oppo.ysAddress,d.AdParams.heJiConfig=d.AdParams.oppo.heJiConfig,r&&r()},fail:function(t,e){console.log(" oppo  handling fail, code = "+e),r&&r()}})}catch(S){l.default.w("oppo \u6ca1\u83b7\u53d6\u5230\u914d\u7f6e err"),l.default.w(S),r&&r()}}else l.default.w("oppo \u6ca1\u83b7\u53d6\u5230\u914d\u7f6e"),r&&r()},fail:function(t){console.log("handling fail, code = "+t),r&&r()},complete:function(){}})}catch(S){l.default.w(S),l.default.w("oppo \u8bfb\u53d6\u76ee\u5f55\u5931\u8d25"),r&&r()}return}if(void 0!==window.qg.gameLoginWithReal){console.log("\u8fdb\u5165\u534e\u4e3a"),a.default.IS_HUAWEI_GAME=!0;var u=qg.getFileSystemManager(),p="";try{var f=u.readFileSync("manifest.json","utf8");console.log("result = "+JSON.stringify(f));var g=JSON.parse(f);console.log(g.package+".json");try{u.accessSync(g.package+".json"),p=g.package+".json"}catch(J){p="",console.log("error 1= "+J)}}catch(J){p="",console.log("error 2= "+J)}if(p.length<=0)try{f=u.readdirSync("src"),console.log("result = "+JSON.stringify(f));for(var m=0;m<f.length;m++)f[m].endsWith(".json")&&-1!=f[m].indexOf("huawei")&&(p="src/"+f[m])}catch(J){p="",console.log("error 3= "+J)}if(d.AdParams.labelName=d.AdParams.hw.labelName,d.AdParams.age=d.AdParams.hw.age,d.AdParams.company=d.AdParams.hw.company,d.AdParams.softCode=d.AdParams.hw.softCode,d.AdParams.ysCompanyName=d.AdParams.hw.ysCompanyName,d.AdParams.ysMail=d.AdParams.hw.ysMail,d.AdParams.ysAddress=d.AdParams.hw.ysAddress,d.AdParams.heJiConfig=d.AdParams.hw.heJiConfig,p&&p.length>0)try{u.accessSync(p);var v=u.readFileSync(p,"utf8"),_=JSON.parse(v);console.log(JSON.stringify(_)),d.AdParams.hw=JSON.parse(JSON.stringify(_.hw)),d.AdParams.labelName=d.AdParams.hw.labelName,d.AdParams.age=d.AdParams.hw.age,d.AdParams.company=d.AdParams.hw.company,d.AdParams.softCode=d.AdParams.hw.softCode,d.AdParams.ysCompanyName=d.AdParams.hw.ysCompanyName,d.AdParams.ysMail=d.AdParams.hw.ysMail,d.AdParams.ysAddress=d.AdParams.hw.ysAddress,d.AdParams.heJiConfig=d.AdParams.hw.heJiConfig,console.log(JSON.stringify(d.AdParams,null,2)),console.log("hw:"+JSON.stringify(d.AdParams.hw,null,2)),r&&r()}catch(J){console.log("error 4= "+J),l.default.e("hw \u8bfb\u53d6\u914d\u7f6eerror"),l.default.e("hw \u8bfb\u53d6\u914d\u7f6eerror"),l.default.e("hw \u8bfb\u53d6\u914d\u7f6eerror"),r&&r()}else l.default.e("hw \u8bfb\u53d6\u914d\u7f6e\u5931\u8d25"),l.default.e("hw \u8bfb\u53d6\u914d\u7f6e\u5931\u8d25"),l.default.e("hw \u8bfb\u53d6\u914d\u7f6e\u5931\u8d25"),l.default.e("hw \u8bfb\u53d6\u914d\u7f6e\u5931\u8d25"),r&&r();return void("debug"==d.AdParams.hw.buildType&&(d.AdParams.hw.inter=d.AdParams.hw.debug_inter||"testb4znbuh3n2",d.AdParams.hw.banner=d.AdParams.hw.debug_banner||"testw6vs28auh3",d.AdParams.hw.video=d.AdParams.hw.debug_video||"testx9dtjwj8hp",d.AdParams.hw.native1=d.AdParams.hw.debug_native1||"testu7m3hc4gvm",l.default.e("\u4f7f\u7528\u6d4b\u8bd5\u53c2\u6570")))}if(void 0!==window.qg.onUserInfoChange){console.log("\u8fdb\u5165\u5c0f\u7c73"),a.default.IS_MI_GAME=!0;var y=qg.getSystemInfoSync().miniGame;console.log(JSON.stringify(qg.getSystemInfoSync()));var A=qg.getFileSystemManager();try{A.readFile({filePath:"manifest.json",encoding:"utf-8",success:function(t){console.log(t.data),console.log("\u6210\u529f\u4e86"),h.default.Ad().setManifestInfo(JSON.parse(t.data))},fail:function(t){console.log("\u5931\u8d25\u4e86"),console.log(t)}})}catch(S){console.log("\u8bfb\u53d6manifest.json\u5305\u540d\u5931\u8d25")}d.AdParams.labelName=d.AdParams.mi.labelName,d.AdParams.age=d.AdParams.mi.age,d.AdParams.company=d.AdParams.mi.company,d.AdParams.softCode=d.AdParams.mi.softCode,d.AdParams.ysCompanyName=d.AdParams.mi.ysCompanyName,d.AdParams.ysMail=d.AdParams.mi.ysMail,d.AdParams.ysAddress=d.AdParams.mi.ysAddress,d.AdParams.heJiConfig=d.AdParams.mi.heJiConfig;try{A.readdir({dirPath:"src",success:function(t){console.log(JSON.stringify(t));for(var e="",n="",o=0;o<t.files.length;o++){var i=t.files[o];-1!=i.indexOf("mini")&&(i.endsWith(".png")||i.endsWith(".jpg")?e=i:i.endsWith(".json")&&(n=i))}if(e){var a=new Image,s=!1;a.onload=function(){s=!0;var t=new cc.Texture2D;t.initWithElement(a),t.handleLoadedTexture(),h.default.LogoSp=new cc.SpriteFrame(t)},a.onerror=function(t){s||(console.warn(t),l.default.w("mi img err"),l.default.w(t))},a.src="src/"+e}else l.default.w("mi \u6ca1\u83b7\u53d6\u5230\u56fe\u7247");if(l.default.w("mi configName:"+n),n)try{A.readFile({filePath:n,encoding:"utf8",success:function(t){console.log("text: "+t.data);var e=JSON.parse(t.data);d.AdParams.mi=JSON.parse(JSON.stringify(e.mi)),d.AdParams.labelName=d.AdParams.mi.labelName,d.AdParams.age=d.AdParams.mi.age,d.AdParams.company=d.AdParams.mi.company,d.AdParams.softCode=d.AdParams.mi.softCode,d.AdParams.ysCompanyName=d.AdParams.mi.ysCompanyName,d.AdParams.ysMail=d.AdParams.mi.ysMail,d.AdParams.ysAddress=d.AdParams.mi.ysAddress,d.AdParams.heJiConfig=d.AdParams.mi.heJiConfig,r&&r()},fail:function(t,e){l.default.w(" mi  handling fail, code = "+e),l.default.w(" mi  handling fail, data = "+JSON.stringify(t)),r&&r()}})}catch(S){l.default.w("mi \u6ca1\u83b7\u53d6\u5230\u914d\u7f6e err"),l.default.w(S),r&&r()}else l.default.w("mi \u6ca1\u83b7\u53d6\u5230\u914d\u7f6e"),r&&r()},fail:function(t){console.log("handling fail, code = "+t),r&&r()},complete:function(){}})}catch(S){l.default.w(S),l.default.w("mi \u8bfb\u53d6\u76ee\u5f55\u5931\u8d25"),r&&r()}return}console.log("\u8fdb\u5165vivo");var w=d.AdParams.vivo.adLabelName,I=!1;if(qg.getLaunchOptionsSync){var S=null,b=qg.getLaunchOptionsSync();console.log(JSON.stringify(b)),console.log(b.query),b.query&&console.log(b.query.type),"ad"===b.query.type&&(I=!0);try{var x=b.referrerInfo.extraData;if(x)S=x.ad_id||x.adid||null;else{var G=b.query.internal;if("deeplink"===(G&&G.channel?G.channel:"")){var E=G.custom_params;console.log(E);var T=JSON.parse(E).cus_origin_uri,N=T.match(/ad_id=([^&]+)/),C=T.match(/adid=([^&]+)/);N&&N.length>=2&&(S=N[1]),C&&C.length>=2&&(S=C[1])}}}catch(S){console.log("----\u5f02\u5e38\u4e86"),console.log(S)}S&&(I=!0),console.log("---e"+S)}else console.log("---\u4f4e\u7248\u672c");console.log("---isBuy:"+I),y=qg.getSystemInfoSync().miniGame,console.log(y.package);var O="",k="/"+y.package+".png",B=qg.isFile({uri:k});if("true"==B)O=k;else{var M="/"+y.package+".jpg";"true"==(B=qg.isFile({uri:M}))&&(O=M)}if(O){var R=new Image,D=!1;R.onload=function(){l.default.i("vivo\u8bfb\u53d6\u5230logo"),D=!0;var t=new cc.Texture2D;t.initWithElement(R),t.handleLoadedTexture(),h.default.LogoSp=new cc.SpriteFrame(t)},R.onerror=function(t){D||(l.default.w("vivo\u8bfb\u53d6logo\u5931\u8d25"),l.default.w(t))},R.src=O}else l.default.w("vivo\u6ca1\u6709\u8bfb\u53d6\u5230logo\u56fe\u7247 ");d.AdParams.labelName=d.AdParams.vivo.labelName,d.AdParams.age=d.AdParams.vivo.age,d.AdParams.company=d.AdParams.vivo.company,d.AdParams.softCode=d.AdParams.vivo.softCode,d.AdParams.ysCompanyName=d.AdParams.vivo.ysCompanyName,d.AdParams.ysMail=d.AdParams.vivo.ysMail,d.AdParams.ysAddress=d.AdParams.vivo.ysAddress,d.AdParams.heJiConfig=d.AdParams.vivo.heJiConfig;try{var L=qg.readFileSync({uri:"/"+y.package+".json",encoding:"utf8"});if("string"==typeof L)l.default.w("vivo  \u8bfb\u53d6\u914d\u7f6e\u5931\u8d25 = "+L);else{console.log("vivo handling success, text: "+L.text);var U=JSON.parse(L.text);d.AdParams.vivo=JSON.parse(JSON.stringify(U.vivo)),d.AdParams.labelName=d.AdParams.vivo.labelName,d.AdParams.age=d.AdParams.vivo.age,d.AdParams.company=d.AdParams.vivo.company,d.AdParams.softCode=d.AdParams.vivo.softCode,d.AdParams.ysCompanyName=d.AdParams.vivo.ysCompanyName,d.AdParams.ysMail=d.AdParams.vivo.ysMail,d.AdParams.ysAddress=d.AdParams.vivo.ysAddress,d.AdParams.heJiConfig=d.AdParams.vivo.heJiConfig}}catch(S){l.default.w(S),l.default.w("vivo\u6ca1\u6709\u8bfb\u53d6\u5230\u914d\u7f6e\u6587\u4ef6 ")}I&&w&&(d.AdParams.vivo.labelName=w,d.AdParams.labelName=d.AdParams.vivo.labelName),console.log("\u6700\u7ec8label:"+d.AdParams.labelName),a.default.IS_VIVO_GAME=!0}else if(void 0!==window.tt)a.default.IS_TT_GAME=!0,d.AdParams.company=d.AdParams.tt.company,d.AdParams.softCode=d.AdParams.tt.softCode;else if(void 0!==window.qq){a.default.IS_QQ_GAME=!0;var q=qq.getFileSystemManager();d.AdParams.labelName=d.AdParams.qq.labelName,d.AdParams.age=d.AdParams.qq.age,d.AdParams.company=d.AdParams.qq.company,d.AdParams.softCode=d.AdParams.qq.softCode,d.AdParams.ysCompanyName=d.AdParams.qq.ysCompanyName,d.AdParams.ysMail=d.AdParams.qq.ysMail,d.AdParams.ysAddress=d.AdParams.qq.ysAddress,d.AdParams.heJiConfig=d.AdParams.qq.heJiConfig;try{q.accessSync("params.json");var V=q.readFileSync("params.json","utf-8"),j=JSON.parse(V);console.log(V),d.AdParams.qq=JSON.parse(JSON.stringify(j.qq)),d.AdParams.labelName=d.AdParams.qq.labelName,d.AdParams.age=d.AdParams.qq.age,d.AdParams.company=d.AdParams.qq.company,d.AdParams.softCode=d.AdParams.qq.softCode,d.AdParams.ysCompanyName=d.AdParams.qq.ysCompanyName,d.AdParams.ysMail=d.AdParams.qq.ysMail,d.AdParams.ysAddress=d.AdParams.qq.ysAddress,d.AdParams.heJiConfig=d.AdParams.qq.heJiConfig}catch(S){console.warn(S),console.warn("qq \u83b7\u53d6\u53c2\u6570\u914d\u7f6e\u6587\u4ef6\u5931\u8d25 params.json \u4f7f\u7528\u4ee3\u7801\u4e2d\u7684\u914d\u7f6e")}}else if(void 0!==window.h5api)a.default.IS_4399_H5_GAME=!0,n=!1;else if(void 0!==window.gamebox)a.default.IS_4399_BOX_GAME=!0,n=!1;else if(void 0!==window.ks)a.default.IS_KS_GAME=!0,d.AdParams.labelName=d.AdParams.ks.labelName,d.AdParams.labelName=d.AdParams.ks.labelName,d.AdParams.age=d.AdParams.ks.age,d.AdParams.company=d.AdParams.ks.company,d.AdParams.softCode=d.AdParams.ks.softCode,d.AdParams.ysCompanyName=d.AdParams.ks.ysCompanyName,d.AdParams.ysMail=d.AdParams.ks.ysMail,d.AdParams.ysAddress=d.AdParams.ks.ysAddress,d.AdParams.heJiConfig=d.AdParams.ks.heJiConfig;else if(void 0!==window.wx){a.default.IS_WECHAT_GAME=!0;var H=wx.getFileSystemManager();d.AdParams.labelName=d.AdParams.wx.labelName,d.AdParams.age=d.AdParams.wx.age,d.AdParams.company=d.AdParams.wx.company,d.AdParams.softCode=d.AdParams.wx.softCode,d.AdParams.ysCompanyName=d.AdParams.wx.ysCompanyName,d.AdParams.ysMail=d.AdParams.wx.ysMail,d.AdParams.ysAddress=d.AdParams.wx.ysAddress,d.AdParams.heJiConfig=d.AdParams.wx.heJiConfig;try{H.accessSync("params.json"),V=H.readFileSync("params.json","utf-8");var F=JSON.parse(V);console.log(V),d.AdParams.wx=JSON.parse(JSON.stringify(F.wx)),d.AdParams.labelName=d.AdParams.wx.labelName,d.AdParams.age=d.AdParams.wx.age,d.AdParams.company=d.AdParams.wx.company,d.AdParams.softCode=d.AdParams.wx.softCode,d.AdParams.ysCompanyName=d.AdParams.wx.ysCompanyName,d.AdParams.ysMail=d.AdParams.wx.ysMail,d.AdParams.ysAddress=d.AdParams.wx.ysAddress,d.AdParams.heJiConfig=d.AdParams.wx.heJiConfig}catch(S){console.warn(S),console.warn("wx \u83b7\u53d6\u53c2\u6570\u914d\u7f6e\u6587\u4ef6\u5931\u8d25 params.json \u4f7f\u7528\u4ee3\u7801\u4e2d\u7684\u914d\u7f6e")}}else void 0!==window.swan?a.default.IS_BAIDU_GAME=!0:void 0!==window.uc?a.default.IS_UC_GAME=!0:(cc.sys.os,cc.sys.OS_ANDROID,void 0!==window.H5Bridge?"ios"==window.H5Bridge.getPlatform()?(console.log("iosh5"),a.default.IS_IOS_H5=!0,n=!1):(console.log("\u5b89\u5353h5"),a.default.IS_ANDROID_H5=!0,n=!1):(cc.sys.os,cc.sys.OS_IOS,void 0!==window.my?(a.default.IS_ZFB_GAME=!0,n=!1,d.AdParams.age=d.AdParams.zfb.age,d.AdParams.company=d.AdParams.zfb.company,d.AdParams.softCode=d.AdParams.zfb.softCode):n=!1));r&&r()},t.initGame=function(t){var e=this;this.initPlatform(function(){E.default.getInstance().check(E.default.MsgType.initSDK,{});var n=null,o="",i=null;if(a.default.IS_WECHAT_GAME?(wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),wx.onShareAppMessage(function(){return{title:e.shareWord[0],imageUrl:d.AdParams.wx.shareImgUrl}}),n=wx.getSystemInfoSync()):a.default.IS_TT_GAME?(n=tt.getSystemInfoSync(),tt.showShareMenu({success:function(){console.log("\u5df2\u6210\u529f\u663e\u793a\u8f6c\u53d1\u6309\u94ae")},fail:function(t){console.log("showShareMenu \u8c03\u7528\u5931\u8d25",t.errMsg)},complete:function(){console.log("showShareMenu \u8c03\u7528\u5b8c\u6210")}}),tt.onShareAppMessage(function(t){return console.log(t.channel),{title:e.shareWord[1],imageUrl:e.sharePath,templateId:d.AdParams.tt.shareTemplateId,success:function(){console.log("\u5206\u4eab\u6210\u529f")},fail:function(t){console.log("\u5206\u4eab\u5931\u8d25",t)}}})):a.default.IS_BAIDU_GAME?n=swan.getSystemInfoSync():a.default.IS_QQ_GAME?(h.default.canShowUser=!0,qq.showShareMenu({showShareItems:["qq","qzone","wechatFriends","wechatMoment"]}),qq.onShareAppMessage(function(){return{title:e.shareWord[0],imageUrl:d.AdParams.qq.shareImgUrl}}),n=qq.getSystemInfoSync()):a.default.IS_OPPO_GAME?(o=d.AdParams.oppo.umAppKey,i=qg.uma,n=qg.getSystemInfoSync()):a.default.IS_MI_GAME?(o=d.AdParams.mi.umAppKey,i=qg.uma,n=qg.getSystemInfoSync()):a.default.IS_VIVO_GAME?(o=d.AdParams.vivo.umAppKey,i=qg.uma,n=qg.getSystemInfoSync()):a.default.IS_UC_GAME?n=uc.getSystemInfoSync():a.default.IS_KS_GAME?n=ks.getSystemInfoSync():a.default.IS_HUAWEI_GAME?(o=d.AdParams.vivo.umAppKey,i=qg.uma):a.default.IS_ZFB_GAME&&(n=my.getSystemInfoSync()),i&&o?(console.log("\u521d\u59cb\u5316umeng"),i&&i.init({appKey:o,useOpenid:!1,autoGetOpenid:!1,debug:!0})):console.log("\u4e0d\u80fd\u521d\u59cb\u5316umeng"),n)if(e.screenWidth=n.screenWidth,e.screenHeight=n.screenHeight,window.cc){var r=cc.director.getScene().getChildByName("Canvas");r.width<=r.height?e.scale=e.screenWidth/r.width:e.scale=e.screenHeight/r.height}else window.Laya;e.gameEvent("initGame"),u.default.loadResDir("gx/prefab",cc.Prefab).then(function(){console.log("\u52a0\u8f7dprefab\u6210\u529f")}).catch(function(){console.log("\u52a0\u8f7dprefab\u5931\u8d25")}),setTimeout(function(){},4e3),t&&t()}),u.default.loadJsonAsset("gx/cfg/privacy",function(){})},t.setUIGroup=function(t){this.uiGroup=t},t.initH5Hall=function(){this.isH5Hall=!0},t.showPrivacyBtnWithParent=function(t){if(E.default.getInstance().check(E.default.MsgType.showGamePrivacyBtn,{}),console.log("\u663e\u793a\u4e86111"),!a.default.IS_ANDROID_H5||this.isH5Hall)if(h.default.needShowAuthorizeBtn()){if(null==t)return l.default.e("showPrivacyBtnWithParent parent is null "),void this.showPrivacyBtn();var e=this,n=function(){if(h.default.btnPrivacySp){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=h.default.btnPrivacySp,n.parent=t,n.setContentSize(100,100),n.position=cc.v3(0,0,0),console.log("\u663e\u793a\u4e86"),n.on(cc.Node.EventType.TOUCH_END,function(){console.log("\u70b9\u51fb\u4e86"),e.onClickPrivacyBtn()}),l.default.i("showPrivacyBtnWithParent \u6210\u529f")}else l.default.e("\u9690\u79c1\u6309\u94ae\u663e\u793a\u5931\u8d25 sp null")};h.default.btnPrivacySp?n():u.default.loadSprite("gx/texture/btn_yinsixieyi",function(t,e){t&&l.default.e("\u9690\u79c1\u6309\u94ae\u663e\u793a\u5931\u8d25"+t),h.default.btnPrivacySp=e,n()})}else console.log("\u4e0d\u9700\u8981\u663e\u793a\u9690\u79c1\u653f\u7b56\u6309\u94ae");else this.showH5GameHallBtnWithParent(t)},t.showUserPrivacyBtnWithParent=function(t){if(E.default.getInstance().check(E.default.MsgType.showUserPrivacyBtn,{}),a.default.IS_QQ_GAME)if(h.default.needShowAuthorizeBtn()){if(null==t)return l.default.e("showUserPrivacyBtnWithParent parent is null "),void this.showUserPrivacyBtn();var e=this,n=function(){if(h.default.btnUserSp){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=h.default.btnUserSp,n.parent=t,n.setContentSize(100,100),n.position=cc.v3(0,0,0),n.on(cc.Node.EventType.TOUCH_END,function(){e.onClickUserPrivacyBtn()}),l.default.i("showUserPrivacyBtnWithParent \u6210\u529f")}else l.default.e("\u7528\u6237\u534f\u8bae\u6309\u94ae\u663e\u793a\u5931\u8d25 sp null")};h.default.btnUserSp?n():u.default.loadSprite("gx/texture/btn_fuwuxieyi",function(t,e){t&&l.default.e("\u7528\u6237\u534f\u8bae\u6309\u94ae\u663e\u793a\u5931\u8d25"+t),h.default.btnUserSp=e,n()})}else l.default.e("\u4e0d\u9700\u8981\u7528\u6237\u534f\u8bae\u6309\u94ae");else l.default.e("\u9664qq\u5916 \u5176\u4ed6\u6e20\u9053\u4e0d\u663e\u793a ")},t.showH5GameHallBtnWithParent=function(t){if(null==t)return l.default.e("show showH5GameHallBtnWithParent parent is null "),void this.showH5GameHallBtn();var e=this,n=function(){if(h.default.btnH5HallSp){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=h.default.btnH5HallSp,n.parent=t,n.setContentSize(100,100),n.position=cc.v3(0,0,0),n.on(cc.Node.EventType.TOUCH_END,function(){e.onClickBackH5HallBtn()}),l.default.i("showH5GameHallBtnWithParent \u6210\u529f")}else l.default.e("showH5GameHallBtnWithParent\u5931\u8d25 sp null")};h.default.btnH5HallSp?n():u.default.loadSprite("gx/texture/btn_backhall",function(t,e){t&&l.default.e("showH5GameHallBtnWithParent \u663e\u793a\u5931\u8d25"+t),h.default.btnH5HallSp=e,n()})},t.showH5GameHallBtn=function(t){void 0===t&&(t=null);var e=this,n=function(){if(h.default.btnH5HallSp){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=h.default.btnH5HallSp,n.parent=cc.find("Canvas");var o=cc.winSize;n.position=t||cc.v3(-(o.width/2-100),-110,0),n.setContentSize(100,100),n.on(cc.Node.EventType.TOUCH_END,function(){e.onClickBackH5HallBtn()})}else l.default.e("showH5GameHallBtn \u5931\u8d251 sp null")};h.default.btnH5HallSp?n():u.default.loadSprite("gx/texture/btn_backhall",function(t,e){t&&l.default.e("showH5GameHallBtn \u5931\u8d251"+t),h.default.btnH5HallSp=e,n()})},t.onClickBackH5HallBtn=function(){a.default.IS_ANDROID_H5?this.Ad().backGameHall():l.default.e("\u548b\u4f1a\u8c03\u7528\u8fd9\u513f\uff01\uff01\uff01")},t.showTTBoxBtnWithParent=function(t,e,n,o){if(h.default.needTTBoxBtn()){var i=function(){if(h.default.btnTTBoxSp){var i=new cc.Node;i.addComponent(cc.Sprite).spriteFrame=h.default.btnTTBoxSp,i.parent=t,i.setContentSize(100,100),i.position=cc.v3(0,0,0),i.on(cc.Node.EventType.TOUCH_END,function(){console.log("\u70b9\u51fb\u4e86"),h.default.Ad().hideBanner(),u.default.loadPrefab("gx/prefab/TTReward",function(t,i){var a=cc.instantiate(i);h.default.uiGroup&&(a.group=h.default.uiGroup),cc.find("Canvas").addChild(a),a.getComponent("Gx_TTReward").init(e,n,o)})})}else l.default.e("\u6dfb\u52a0\u684c\u9762\u6309\u94ae \u5931\u8d25 sp null")};h.default.btnTTBoxSp?i():u.default.loadSprite("gx/texture/btn_TTBox",function(t,e){t&&l.default.e("\u6dfb\u52a0\u5b57\u8282\u5956\u52b1\u663e\u793a\u5931\u8d25"+t),h.default.btnTTBoxSp=e,i()})}else console.log("\u4e0d\u9700\u8981\u663e\u793a\u5b57\u8282\u5b9d\u7bb1\u6309\u94ae")},t.showAddDesktopBtnWithParent=function(t){if(E.default.getInstance().check(E.default.MsgType.showAddDesktopBtn,{}),h.default.needAddDesktopBtn()){if(!this.hasDesktop()){var e=this,n=function(){if(h.default.btnAddDesktopSp){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=h.default.btnAddDesktopSp,n.parent=t,n.setContentSize(100,100),n.position=cc.v3(0,0,0),console.log("\u663e\u793a\u4e86"),n.on(cc.Node.EventType.TOUCH_END,function(){console.log("\u70b9\u51fb\u4e86"),e.onClickAddDesktopBtn(n)}),l.default.i("\u6dfb\u52a0\u684c\u9762\u6309\u94ae \u6210\u529f")}else l.default.e("\u6dfb\u52a0\u684c\u9762\u6309\u94ae \u5931\u8d25 sp null")};h.default.btnAddDesktopSp?n():u.default.loadSprite("gx/texture/btn_zhuomian",function(t,e){t&&l.default.e("\u6dfb\u52a0\u684c\u9762\u663e\u793a\u5931\u8d25"+t),h.default.btnAddDesktopSp=e,n()})}}else console.log("\u4e0d\u9700\u8981\u663e\u793a\u6dfb\u52a0\u684c\u9762\u6309\u94ae")},t.showMoreGameBtnWithParent=function(t){if(E.default.getInstance().check(E.default.MsgType.showMoreGameBtn,{}),m.default.getNativePlatform()==y.PLATFORM.OPPO){if(null==t)return l.default.e("showMoreGameBtnWithParent parent is null "),void this.showMoreGameBtn();var e=this,n=function(){if(h.default.btnMoreGameSp){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=h.default.btnMoreGameSp,n.parent=t,n.setContentSize(100,100),n.position=cc.v3(0,0,0),n.on(cc.Node.EventType.TOUCH_END,function(){e.onClickMoreGameBtn()}),l.default.i("showMoreGameBtnWithParent \u6210\u529f")}else l.default.e("\u66f4\u591a\u6e38\u620f\u6309\u94ae\u663e\u793a\u5931\u8d25 sp null")};h.default.btnMoreGameSp?n():u.default.loadSprite("gx/texture/gengduo",function(t,e){t&&l.default.e("\u66f4\u591a\u6e38\u620f\u6309\u94ae\u663e\u793a\u5931\u8d25"+t),h.default.btnMoreGameSp=e,n()})}else l.default.e("\u4e0d\u662f\u5b89\u5353oppo  apk\u6216\u8005qq\u4e0d\u663e\u793a\u66f4\u591a\u6e38\u620f")},t.showQQShareBtnWithParent=function(t){if(a.default.IS_QQ_GAME){if(null==t)return void l.default.e("showQQShareBtnWithParent parent is null ");var e=function(){if(h.default.btnQQShareSp){var e=new cc.Node;e.addComponent(cc.Sprite).spriteFrame=h.default.btnQQShareSp,e.parent=t,e.setContentSize(100,100),e.position=cc.v3(0,0,0),e.on(cc.Node.EventType.TOUCH_END,function(){h.default.showShareFriend(function(t){console.log("\u5206\u4eab\u7684\u56de\u8c03\u7ed3\u679c\uff1a"+t)})}),l.default.i("showMoreGameBtnWithParent \u6210\u529f")}else l.default.e("qq\u5206\u4eab\u6309\u94ae\u663e\u793a\u5931\u8d25 sp null")};h.default.btnQQShareSp?e():u.default.loadSprite("gx/texture/btn_QQShare",function(t,n){t&&l.default.e("qq\u5206\u4eab\u6309\u94ae\u663e\u793a\u5931\u8d25"+t),h.default.btnQQShareSp=n,e()})}else l.default.e("\u975eqq\u4e0d\u663e\u793a\u5206\u4eab\u6309\u94ae")},t.showGameAgeWithParent=function(t){var e=this;if(E.default.getInstance().check(E.default.MsgType.showGameAgeBtn,{}),null==t)return l.default.e("showGameAgeWithParent parent is null "),void this.showGameAge();var n=h.default.getGameAge();if(n>0){var o=function(){if(h.default.ageSp){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=h.default.ageSp,n.parent=t,n.position=cc.v3(0,0,0),l.default.i("ageSp\u663e\u793a\u6210\u529f");var o=e;n.setContentSize(100,130),n.on(cc.Node.EventType.TOUCH_END,function(){o.onClickBtn(3)})}else l.default.e("ageSp \u7a7a \u663e\u793a\u9002\u9f84\u5931\u8d25")};h.default.ageSp?o():u.default.loadSprite("gx/texture/icon"+n,function(t,e){t&&l.default.e("\u9002\u9f84\u663e\u793a\u5931\u8d25"+t),h.default.ageSp=e,o()})}},t.showGameAge=function(){var t=this,e=h.default.getGameAge();if(e>0){var n=function(){if(h.default.ageSp){var e=new cc.Node;e.addComponent(cc.Sprite).spriteFrame=h.default.ageSp,e.parent=cc.find("Canvas");var n=cc.winSize;e.position=cc.v3(-(n.width/2-100),100,0);var o=t;e.setContentSize(100,130),e.on(cc.Node.EventType.TOUCH_END,function(){o.onClickBtn(3)})}else l.default.e("ageSp \u7a7a \u663e\u793a\u9002\u9f84\u5931\u8d25   ")};h.default.ageSp?n():u.default.loadSprite("gx/texture/icon"+e,function(t,e){t&&l.default.e(t),h.default.ageSp=e,n()})}},t.onClickPrivacyBtn=function(){a.default.IS_QQ_GAME?h.default.Ad().showAuthorize(function(){},function(){}):h.default.Ad().showPrivacy("privacy")},t.onClickMoreGameBtn=function(){h.default.Ad().showGamePortal()},t.onClickAddDesktopBtn=function(t){(a.default.IS_VIVO_GAME||a.default.IS_OPPO_GAME||a.default.IS_QQ_GAME)&&h.default.Ad().addDesktop(function(){t.destroy()})},t.hasDesktop=function(){if(!a.default.IS_VIVO_GAME&&!a.default.IS_OPPO_GAME)return!a.default.IS_QQ_GAME;qg.hasShortcutInstalled({success:function(t){return!!t}})},t.showPrivacyBtn=function(t){if(void 0===t&&(t=null),h.default.needShowAuthorizeBtn()){var e=this,n=function(){if(h.default.btnPrivacySp){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=h.default.btnPrivacySp,n.parent=cc.find("Canvas");var o=cc.winSize;n.position=t||cc.v3(-(o.width/2-100),-110,0),n.setContentSize(100,100),n.on(cc.Node.EventType.TOUCH_END,function(){e.onClickPrivacyBtn()})}else l.default.e("\u9690\u79c1\u6309\u94ae\u663e\u793a\u5931\u8d25 sp null")};h.default.btnPrivacySp?n():u.default.loadSprite("gx/texture/btn_yinsixieyi",function(t,e){t&&l.default.e("\u9690\u79c1\u6309\u94ae\u663e\u793a\u5931\u8d25"+t),h.default.btnPrivacySp=e,n()})}else console.log("\u4e0d\u9700\u8981\u663e\u793a\u9690\u79c1\u653f\u7b56\u6309\u94ae")},t.showUserPrivacyBtn=function(t){if(void 0===t&&(t=null),a.default.IS_QQ_GAME)if(h.default.needShowAuthorizeBtn()){var e=this,n=function(){if(h.default.btnPrivacySp){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=h.default.btnPrivacySp,n.parent=cc.find("Canvas");var o=cc.winSize;n.position=t||cc.v3(-(o.width/2-100),-110,0),n.setContentSize(100,100),n.on(cc.Node.EventType.TOUCH_END,function(){e.onClickUserPrivacyBtn()})}else l.default.e("\u670d\u52a1\u534f\u8bae\u6309\u94ae\u663e\u793a\u5931\u8d25 sp null")};h.default.btnPrivacySp?n():u.default.loadSprite("gx/texture/btn_fuwuxieyi",function(t,e){t&&l.default.e("\u670d\u52a1\u534f\u8bae\u6309\u94ae\u663e\u793a\u5931\u8d25"+t),h.default.btnPrivacySp=e,n()})}else console.log("\u4e0d\u9700\u8981\u663e\u793a\u670d\u52a1\u534f\u8bae\u6309\u94ae");else l.default.e("\u9664qq\u5916 \u5176\u4ed6\u6e20\u9053\u4e0d\u663e\u793a ")},t.onClickUserPrivacyBtn=function(){h.default.Ad().showPrivacy("user")},t.showMoreGameBtn=function(t){if(void 0===t&&(t=null),m.default.getNativePlatform()==y.PLATFORM.OPPO||a.default.IS_QQ_GAME){var e=this,n=function(){if(h.default.btnMoreGameSp){var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=h.default.btnMoreGameSp,n.parent=cc.find("Canvas");var o=cc.winSize;n.position=t||cc.v3(-(o.width/2-100),210,0),n.setContentSize(100,100),n.on(cc.Node.EventType.TOUCH_END,function(){e.onClickMoreGameBtn()})}else l.default.e("\u9690\u79c1\u6309\u94ae\u663e\u793a\u5931\u8d25 sp null")};h.default.btnMoreGameSp?n():u.default.loadSprite("gx/texture/gengduo",function(t,e){t&&l.default.e("\u9690\u79c1\u6309\u94ae\u663e\u793a\u5931\u8d25"+t),h.default.btnMoreGameSp=e,n()})}else l.default.e("\u4e0d\u662f\u5b89\u5353oppo  apk\u6216\u8005qq\u4e0d\u663e\u793a\u66f4\u591a\u6e38\u620f")},t.gGB=function(t){if(a.default.IS_QQ_GAME)d.AdParams.qq.labelVersion&&(d.AdParams.qq.labelVersion+"").length>0&&(t+=d.AdParams.qq.labelVersion);else if(a.default.IS_WECHAT_GAME)d.AdParams.wx.labelVersion&&(d.AdParams.wx.labelVersion+"").length>0&&(t+=d.AdParams.wx.labelVersion);else if(a.default.IS_TT_GAME)d.AdParams.tt.labelVersion&&(d.AdParams.tt.labelVersion+"").length>0&&(t+=d.AdParams.tt.labelVersion);else if(a.default.IS_OPPO_GAME)d.AdParams.oppo.labelVersion&&(d.AdParams.oppo.labelVersion+"").length>0&&(t+=d.AdParams.oppo.labelVersion),window.testDataToServer&&window.testDataToServer.isAdUser&&(t+="ad");else if(a.default.IS_MI_GAME)d.AdParams.mi.labelVersion&&(d.AdParams.mi.labelVersion+"").length>0&&(t+=d.AdParams.mi.labelVersion);else if(a.default.IS_VIVO_GAME)d.AdParams.vivo.labelVersion&&(d.AdParams.vivo.labelVersion+"").length>0&&(t+=d.AdParams.vivo.labelVersion),window.testDataToServer&&window.testDataToServer.isAdUser&&(t+="ad");else if(a.default.IS_HUAWEI_GAME)d.AdParams.hw.labelVersion&&(d.AdParams.hw.labelVersion+"").length>0&&(t+=d.AdParams.hw.labelVersion);else if(a.default.IS_KS_GAME)d.AdParams.ks.labelVersion&&(d.AdParams.ks.labelVersion+"").length>0&&(t+=d.AdParams.ks.labelVersion);else if(a.default.IS_ANDROID_NATIVE||a.default.IS_ANDROID_H5)return m.default.callMethodLabel(t);return c.default.getInstance().gGB(t)},t.gGN=function(t,e){return void 0===e&&(e=0),a.default.IS_ANDROID_NATIVE||a.default.IS_ANDROID_H5?m.default.callMethodLabelValue(t,e):a.default.IS_OPPO_GAME?(d.AdParams.oppo.labelVersion&&(d.AdParams.oppo.labelVersion+"").length>0&&(t+=d.AdParams.oppo.labelVersion),c.default.getInstance().gGN(t,e)):a.default.IS_MI_GAME?(d.AdParams.mi.labelVersion&&(d.AdParams.mi.labelVersion+"").length>0&&(t+=d.AdParams.mi.labelVersion),c.default.getInstance().gGN(t,e)):a.default.IS_VIVO_GAME?(d.AdParams.vivo.labelVersion&&(d.AdParams.vivo.labelVersion+"").length>0&&(t+=d.AdParams.vivo.labelVersion),c.default.getInstance().gGN(t,e)):a.default.IS_QQ_GAME?(d.AdParams.qq.labelVersion&&(d.AdParams.qq.labelVersion+"").length>0&&(t+=d.AdParams.qq.labelVersion),c.default.getInstance().gGN(t,e)):a.default.IS_KS_GAME?(d.AdParams.ks.labelVersion&&(d.AdParams.ks.labelVersion+"").length>0&&(t+=d.AdParams.ks.labelVersion),c.default.getInstance().gGN(t,e)):c.default.getInstance().gGN(t,e)},t.Ad=function(){return a.default.IS_WECHAT_GAME?I.default.getInstance():a.default.IS_QQ_GAME?_.default.getInstance():a.default.IS_OPPO_GAME?r.default.getInstance():a.default.IS_MI_GAME?w.default.getInstance():a.default.IS_VIVO_GAME?p.default.getInstance():a.default.IS_ANDROID_NATIVE?f.default.getInstance():a.default.IS_ANDROID_H5?g.default.getInstance():a.default.IS_4399_H5_GAME?v.default.getInstance():a.default.IS_HUAWEI_GAME?A.default.getInstance():a.default.IS_TT_GAME?b.default.getInstance():a.default.IS_KS_GAME?x.default.getInstance():a.default.IS_ZFB_GAME?G.default.getInstance():s.default.getInstance()},t.shareGame=function(t){var e=this;if(a.default.IS_WECHAT_GAME){wx.shareAppMessage({title:this.shareWord[0],imageUrl:d.AdParams.wx.shareImgUrl});var n=(new Date).getTime(),o=function(){(new Date).getTime()-n>=3e3?t&&t(!0):wx.showModal({title:"\u63d0\u793a",content:"\u8be5\u7fa4\u5df2\u5206\u4eab\u8fc7,\u8bf7\u6362\u4e2a\u7fa4",showCancel:!0,cancelText:"\u53d6\u6d88",cancelColor:"#000",confirmText:"\u53bb\u5206\u4eab",confirmColor:"#08f",success:function(n){n.confirm?e.shareGame(t):n.cancel&&t&&t(!1)}}),wx.offShow(o)};wx.onShow(o)}else a.default.IS_QQ_GAME?qq.shareAppMessage({title:this.shareWord[0],imageUrl:d.AdParams.qq.shareImgUrl,query:"",success:function(){t&&t(!0)},fail:function(){t&&t(!1)}}):a.default.IS_UC_GAME?uc.shareAppMessage():a.default.IS_TT_GAME&&tt.shareAppMessage({title:this.shareWord[0],desc:this.shareWord[1],imageUrl:this.sharePath,templateId:d.AdParams.tt.shareTemplateId,query:"",success:function(){console.log("\u5206\u4eab\u6210\u529f"),t&&t(!0)},fail:function(){console.log("\u5206\u4eab\u5931\u8d25"),t&&t(!1)}})},t.canShowShare=function(){return!!a.default.IS_KS_GAME},t.startgamebtn=function(){},t.gameEvent=function(t,e){void 0===e&&(e=null),E.default.getInstance().check(E.default.MsgType.event,{eventName:t,params:e}),console.log("[gx_game] gameEvent:"+t),a.default.IS_ANDROID_NATIVE||a.default.IS_IOS_NATIVE||a.default.IS_ANDROID_H5?m.default.callMethod("gameEvent",t):a.default.IS_OPPO_GAME||a.default.IS_VIVO_GAME||a.default.IS_HUAWEI_GAME||a.default.IS_MI_GAME?qg.uma&&qg.uma.trackEvent(t,e):a.default.IS_TT_GAME?tt.uma&&tt.uma.trackEvent(t,e):a.default.IS_WECHAT_GAME?wx.uma&&wx.uma.trackEvent(t,e):a.default.IS_KS_GAME?wx.uma&&wx.uma.trackEvent(t,e):a.default.IS_QQ_GAME&&qq.uma&&qq.uma.trackEvent(t,e),window.TDAPP&&window.TDAPP&&window.TDAPP.onEvent(t,"",e),t==y.EventName.modeLvChoice&&(a.default.IS_VIVO_GAME||a.default.IS_OPPO_GAME)},t.gameEventLevelStart=function(t,e){void 0===e&&(e=null),E.default.getInstance().check(E.default.MsgType.lvStart,{stage:t,params:e}),t=t?t.toString():"",console.log("[gx_game] gameEventLevelStart:"+t),a.default.IS_ANDROID_NATIVE||a.default.IS_IOS_NATIVE||a.default.IS_ANDROID_H5?m.default.callMethod("gameEventLevelStart",t):a.default.IS_OPPO_GAME||a.default.IS_VIVO_GAME?qg.uma&&qg.uma.stage.onStart({stageId:String(t),stageName:"\u7b2c"+t+"\u5173"}):a.default.IS_HUAWEI_GAME||a.default.IS_MI_GAME?qg.uma&&qg.uma.stage.onStart({stageId:String(t),stageName:"\u7b2c"+t+"\u5173"}):a.default.IS_TT_GAME?tt.uma&&tt.uma.stage.onStart({stageId:String(t),stageName:"\u7b2c"+t+"\u5173"}):a.default.IS_WECHAT_GAME?wx.uma&&wx.uma.stage.onStart({stageId:String(t),stageName:"\u7b2c"+t+"\u5173"}):a.default.IS_KS_GAME?wx.uma&&wx.uma.stage.onStart({stageId:String(t),stageName:"\u7b2c"+t+"\u5173"}):a.default.IS_QQ_GAME&&qq.uma&&qq.uma.stage.onStart({stageId:String(t),stageName:"\u7b2c"+t+"\u5173"}),window.TDAPP&&window.TDAPP&&window.TDAPP.onEvent("\u5173\u5361\u5f00\u59cb_TD","",{lvName:t})},t.gameEventLevelEnd=function(t,e){void 0===e&&(e=!1),E.default.getInstance().check(E.default.MsgType.lvEnd,{stage:t,isVictory:e}),t=t?t.toString():"",console.log("[gx_game] \u5173\u5361\u7ed3\u675f:"+t+" isVictory:"+(e?"\u80dc\u5229":"\u5931\u8d25")),a.default.IS_ANDROID_NATIVE||a.default.IS_IOS_NATIVE||a.default.IS_ANDROID_H5?m.default.callMethod("gameEventLevelEnd",t+"_"+e):a.default.IS_OPPO_GAME||a.default.IS_VIVO_GAME?qg.uma&&qg.uma.stage.onEnd({stageId:String(t),stageName:"\u7b2c"+t+"\u5173",event:e?"complete":"fail"}):a.default.IS_HUAWEI_GAME||a.default.IS_MI_GAME?qg.uma&&qg.uma.stage.onEnd({stageId:String(t),stageName:"\u7b2c"+t+"\u5173",event:e?"complete":"fail"}):a.default.IS_TT_GAME?tt.uma&&tt.uma.stage.onEnd({stageId:String(t),stageName:"\u7b2c"+t+"\u5173",event:e?"complete":"fail"}):a.default.IS_WECHAT_GAME?wx.uma&&wx.uma.stage.onEnd({stageId:String(t),stageName:"\u7b2c"+t+"\u5173",event:e?"complete":"fail"}):a.default.IS_KS_GAME?wx.uma&&wx.uma.stage.onEnd({stageId:String(t),stageName:"\u7b2c"+t+"\u5173",event:e?"complete":"fail"}):a.default.IS_QQ_GAME&&qq.uma&&qq.uma.stage.onEnd({stageId:String(t),stageName:"\u7b2c"+t+"\u5173",event:e?"complete":"fail"}),window.TDAPP&&(e?window.TDAPP.onEvent("\u5173\u5361\u80dc\u5229_TD","",{lvName:t}):window.TDAPP.onEvent("\u5173\u5361\u5931\u8d25_TD","",{lvName:t})),a.default.IS_QQ_GAME?(this.Ad().showGameOverAD(),h.default.gGB("z1")&&(d.AdParams.qq.gameEndShowCrazyPoint?h.default.Ad().showCrazyPoint(function(){},function(){d.AdParams.qq.gameEndShowGameBox?h.default.Ad().showGameBox(function(){},function(){},null):l.default.i("\u4e0d\u7528\u663e\u793a\u4e5d\u5bab\u683c2")},function(){},!1):(l.default.i("\u4e0d\u7528\u663e\u793a\u7838\u5b9d\u7bb1"),d.AdParams.qq.gameEndShowGameBox?h.default.Ad().showGameBox(function(){},function(){},null):l.default.i("\u4e0d\u7528\u663e\u793a\u4e5d\u5bab\u683c1")))):a.default.IS_OPPO_GAME?(h.default.gGB("aa")&&this.Ad().showGameOverAD(),this.ovDesktop()):a.default.IS_VIVO_GAME?(h.default.gGB("aa")&&this.Ad().showGameOverAD(),this.ovDesktop()):a.default.IS_WECHAT_GAME&&h.default.gGB("qiangtan")&&Math.floor(100*Math.random())+1<=40&&this.Ad().showVideo()},t.ovDesktop=function(){var t=this;if(h.default.gGB("addDesk")){var e=(new Date).valueOf();if(!(e-this.ovDesktopLastTime>6e4))return;this.ovDesktopCount++,2==this.ovDesktopCount&&(this.ovDesktopCount=0,h.default.Ad().hasAddDesktop(function(){console.log("\u53ef\u4ee5\u6dfb\u52a0"),a.default.IS_VIVO_GAME&&(t.ovDesktopLastTime=e),h.default.Ad().addDesktop(function(){},function(){},!1)},function(){console.log("\u5df2\u7ecf\u6dfb\u52a0 \u4e0d\u7528\u518d\u6dfb\u52a0 \u4e86")},function(){console.log("\u68c0\u67e5\u662f\u5426\u6dfb\u52a0\u5931\u8d25\u4e86")}))}},t.closebox=function(){},t.uploadOcpx=function(){console.warn("\u7981\u7528upload ocpx")},t.countdown=function(e,n){if(a.default.IS_QQ_GAME){var o=d.AdParams.qq.countdowntime;e.string=o+"\u79d2\u540e\u81ea\u52a8";var i=setInterval(function(){if(t.needjump)return e.string="",clearInterval(i),void(t.needjump=!1);o--,e.string=o+"\u79d2\u540e\u81ea\u52a8",o<=0&&(n&&n(),e.string="",clearInterval(i))},1e3)}},t.quitcount=function(){a.default.IS_QQ_GAME&&(t.needjump=!0)},t.showSubmsgBtnWithParent=function(t){if(a.default.IS_QQ_GAME||a.default.IS_WECHAT_GAME){if(null==t)return void l.default.e("showSubmsgBtnWithParent parent is null ");if(a.default.IS_QQ_GAME&&(!d.AdParams.qq.subIds||d.AdParams.qq.subIds.length<=0))return void l.default.e("\u8ba2\u9605\u6d88\u606f\u6309\u94ae\u663e\u793a\u5931\u8d25  \u6ca1\u6709\u6a21\u677fid ");if(a.default.IS_WECHAT_GAME&&(!d.AdParams.wx.subIds||d.AdParams.wx.subIds.length<=0))return void l.default.e("\u8ba2\u9605\u6d88\u606f\u6309\u94ae\u663e\u793a\u5931\u8d25  \u6ca1\u6709\u6a21\u677fid ");var e=function(){if(h.default.btnAddSubmsgSp){var e=new cc.Node;e.addComponent(cc.Sprite).spriteFrame=h.default.btnAddSubmsgSp,e.parent=t,e.setContentSize(100,100),e.position=cc.v3(0,0,0),e.on(cc.Node.EventType.TOUCH_END,function(){if(a.default.IS_QQ_GAME){var t=d.AdParams.qq.subIds;qq.subscribeAppMsg({tmplIds:t,subscribe:!0,success:function(e){S.default.i("\u8c03\u7528\u8ba2\u9605\u8fd4\u56de\u7ed3\u679c"),S.default.i(e);for(var n=0;n<t.length;n++){var o=t[n];"accept"==e[o]?(h.default.Ad().submsg(o,function(){}),h.default.Ad().createToast("\u8ba2\u9605\u6210\u529f")):(S.default.i(o+"\u8ba2\u9605\u5931\u8d25\uff1a"+e[o]),h.default.Ad().createToast("\u8ba2\u9605\u5931\u8d25"))}setTimeout(function(){h.default.Ad().initSubmsg()},1e3)},fail:function(t){console.log("----subscribeAppMsg----fail",t),S.default.e("\u8ba2\u9605\u5931\u8d25"),S.default.e(t),h.default.Ad().createToast("\u8ba2\u9605\u5931\u8d25")}})}else if(a.default.IS_WECHAT_GAME){var e=d.AdParams.wx.subIds;wx.requestSubscribeMessage({tmplIds:e,success:function(t){S.default.i("\u8c03\u7528\u8ba2\u9605\u8fd4\u56de\u7ed3\u679c"),S.default.i(t);for(var n=0;n<e.length;n++){var o=e[n];"accept"==t[o]?(h.default.Ad().submsg(o,function(){}),h.default.Ad().createToast("\u8ba2\u9605\u6210\u529f")):(S.default.i(o+"\u8ba2\u9605\u5931\u8d25\uff1a"+t[o]),h.default.Ad().createToast("\u8ba2\u9605\u5931\u8d25"))}setTimeout(function(){h.default.Ad().initSubmsg()},1e3)},fail:function(t){console.log("----subscribeAppMsg----fail",t),S.default.e("\u8ba2\u9605\u5931\u8d25"),S.default.e(t),h.default.Ad().createToast("\u8ba2\u9605\u5931\u8d25")}})}}),l.default.i("showSubmsgBtnWithParent \u6210\u529f")}else l.default.e("\u8ba2\u9605\u6d88\u606f\u6309\u94ae\u663e\u793a\u5931\u8d25 sp null")};h.default.btnAddSubmsgSp?e():u.default.loadSprite("gx/texture/btn_addsub",function(t,n){t&&l.default.e("\u8ba2\u9605\u6d88\u606f\u6309\u94ae\u663e\u793a\u5931\u8d25"+t),h.default.btnAddSubmsgSp=n,e()})}else l.default.e("\u4e0d\u662f\u5fae\u4fe1\u6216\u8005qq\u4e0d\u663e\u793a\u8ba2\u9605\u6d88\u606f\u6309\u94ae")},t.showCancelAccountWithParent=function(t){if(E.default.getInstance().check(E.default.MsgType.showCancelAccountBtn,{}),a.default.IS_HUAWEI_GAME||(a.default.IS_ANDROID_H5||a.default.IS_ANDROID_NATIVE)&&m.default.getNativePlatform()==y.PLATFORM.HUAWEI){if(null==t)return void l.default.e("showCancelAccount parent is null ");var e=function(){if(h.default.btnCancelAccountSp){var e=new cc.Node;e.addComponent(cc.Sprite).spriteFrame=h.default.btnCancelAccountSp,e.parent=t,e.setContentSize(100,100),e.position=cc.v3(0,0,0),e.on(cc.Node.EventType.TOUCH_END,function(){a.default.IS_HUAWEI_GAME?qg.showModal({title:"\u6ce8\u9500\u8d26\u53f7\u63d0\u793a",content:"\u786e\u5b9a\u6ce8\u9500\u8d26\u53f7\u5417\uff1f\u6ce8\u9500\u540e\u5c06\u65e0\u6cd5\u6062\u590d\uff01",confirmText:"\u786e\u5b9a\u6ce8\u9500",success:function(t){t.confirm?(console.log("\u7528\u6237\u70b9\u51fb\u786e\u5b9a"),cc.sys.localStorage.clear(),qg.exitApplication({success:function(){console.log("exitApplication success")},fail:function(){console.log("exitApplication fail")},complete:function(){console.log("exitApplication complete")}})):t.cancel&&console.log("\u7528\u6237\u70b9\u51fb\u53d6\u6d88")}}):m.default.callMethod("cancelAccount",null,function(){console.log("\u786e\u5b9a\u6ce8\u9500\u8d26\u53f7\u4e86"),cc.sys.localStorage.clear()})}),l.default.i("showCancelAccountWithParent \u6210\u529f")}else l.default.e("\u6ce8\u9500\u8d26\u53f7\u6309\u94ae\u663e\u793a\u5931\u8d25 sp null")};h.default.btnCancelAccountSp?e():u.default.loadSprite("gx/texture/btn_zhuxiao",function(t,n){t&&l.default.e("\u6ce8\u9500\u8d26\u53f7\u6309\u94ae\u663e\u793a\u5931\u8d25"+t),h.default.btnCancelAccountSp=n,e()})}else l.default.e("\u4e0d\u662f\u534e\u4e3aapk\u6216\u8005rpk\u4e0d\u663e\u793a\u6ce8\u9500\u8d26\u53f7\u6309\u94ae")},t.onClickBtn=function(t){h.default.Ad().onClickBtn(t)},t.canPlayWithRefuse=!1,t.scale=1,t.ageSp=null,t.btnPrivacySp=null,t.btnUserSp=null,t.btnH5HallSp=null,t.btnMoreGameSp=null,t.btnQQShareSp=null,t.btnAddSubmsgSp=null,t.btnAddDesktopSp=null,t.btnCancelAccountSp=null,t.screenWidth=0,t.initPlatformEnd=!1,t.btnTTBoxSp=null,t.havettreward=!1,t.screenHeight=0,t.userInfo={uid:"",openid:"",avatarUrl:"",nickName:""},t.isShenHe=!1,t.isH5Hall=!1,t.shareWord=["",""],t.sharePath="",t.recommedList=[],t.uiGroup="",t.enterMainCount=0,t.appId="",t.adConfig={canRefresh:!1,useNative:!1,bannerUpdateTime:-1,customUpdateTime:30,adCdTime:60,interTick:0,bannerTick:0,switchPool:!0,nativeAdLimitCount:5,showBanner:0},t.vcNum=-1,t.ovDesktopCount=0,t.ovDesktopLastTime=0,t.gameInfo={package:"",name:"",versionName:"",versionCode:""},t.canReportOcpx=!1,t.needjump=!1,t}();n.default=T,cc._RF.pop()},{"../../GxAdParams":"GxAdParams","../../GxChecker":"GxChecker","../../GxGame":"GxGame","../../ad/4399/H54399Adapter":"H54399Adapter","../../ad/android/AndroidAdapter":"AndroidAdapter","../../ad/android/AndroidH5Adapter":"AndroidH5Adapter","../../ad/base/BaseAdapter":"BaseAdapter","../../ad/hw/HwAdapter":"HwAdapter","../../ad/ks/KsAdapter":"KsAdapter","../../ad/mi/MiAdapter":"MiAdapter","../../ad/oppo/OppoAdapter":"OppoAdapter","../../ad/qq/QQAdapter":"QQAdapter","../../ad/tt/TTAdapter":"TTAdapter","../../ad/vivo/VivoAdapter":"VivoAdapter","../../ad/wx/WxAdapter":"WxAdapter","../../ad/zfb/ZFBAdapter":"ZFBAdapter","../../img/GxImgMgr":"GxImgMgr","../../util/GxLog":"GxLog","../../util/GxUtils":"GxUtils","../../util/ResUtil":"ResUtil","../GxConstant":"GxConstant","../GxEnum":"GxEnum","../GxGameUtil":"GxGameUtil"}],DataStorage:[function(t,e,n){"use strict";cc._RF.push(e,"eedd1OpwjNFF4WTnWvre+pX","DataStorage"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){}return t.getItem=function(t,e){if(void 0===e&&(e=null),t){var n=cc.sys.localStorage.getItem(t);return null!=n&&"null"!=n&&""!==n&&void 0!==n||(n=e),n}return null},t.setItem=function(t,e){cc.sys.localStorage.setItem(t,e)},Object.defineProperty(t,"musicPlay",{get:function(){return this.getItem("MUSIC",!0)},set:function(t){this.setItem("MUSIC",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"soundPlay",{get:function(){return this.getItem("SOUND",!0)},set:function(t){this.setItem("SOUND",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"deviceid",{get:function(){return this.getItem("DEVICEID","")},set:function(t){this.setItem("DEVICEID",t)},enumerable:!1,configurable:!0}),t}();n.default=o,cc._RF.pop()},{}],GxAdParams:[function(t,e,n){"use strict";cc._RF.push(e,"568321FLY1I3LCM7B+euNpE","GxAdParams"),Object.defineProperty(n,"__esModule",{value:!0}),n.AdParams=void 0,n.AdParams={labelName:"srxsmg_srxsmgqq_100_qq_xyx_20221111",age:12,company:"",softCode:"",ysCompanyName:"\u77f3\u5bb6\u5e84\u5e02\u9ad8\u5174\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8",ysMail:"2361198052@qq.com",ysAddress:"\u6cb3\u5317\u7701\u77f3\u5bb6\u5e84\u5e02\u9ad8\u65b0\u533a\u5929\u5c71\u4e16\u754c\u4e4b\u95e8\u5927\u53a6H-1009",gameName:"",heJiConfig:"",oppo:{gameName:"",labelName:"srxsmg_srxsmgqq_100_qq_xyx_20221111",age:12,company:"",softCode:"",ysCompanyName:"\u77f3\u5bb6\u5e84\u5e02\u9ad8\u5174\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8",ysMail:"2361198052@qq.com",ysAddress:"\u6cb3\u5317\u7701\u77f3\u5bb6\u5e84\u5e02\u9ad8\u65b0\u533a\u5929\u5c71\u4e16\u754c\u4e4b\u95e8\u5927\u53a6H-1009",banner:"",native1:"",native2:"",native_banner:"",native_icon:"",video:"",native_custom1:"",native_custom2:"",native_custom_banner:"",gameBanner:"",gamePortal:"",gameDraw:"",bannerOnTop:!1,labelVersion:"",heJiConfig:"",havebox:!1,umAppKey:"",tdAppKey:""},mi:{gameName:"",labelName:"srxsmg_srxsmgqq_100_qq_xyx_20221111",age:12,company:"",softCode:"",ysCompanyName:"\u77f3\u5bb6\u5e84\u5e02\u9ad8\u5174\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8",ysMail:"2361198052@qq.com",ysAddress:"\u6cb3\u5317\u7701\u77f3\u5bb6\u5e84\u5e02\u9ad8\u65b0\u533a\u5929\u5c71\u4e16\u754c\u4e4b\u95e8\u5927\u53a6H-1009",inter:"b672387b924750e1052b55925495f80d",banner:"f0684d0e4b45a22aa3d14da2d5e25e9f",native1:"f7ce1b63755d33d1477551be3a24bd91",native2:"",native_banner:"",native_icon:"",video:"c930fe3dacd17ce9617a4aa7d687f92e",native_custom1:"",native_custom2:"",native_custom_banner:"",gameBanner:"",gamePortal:"",gameDraw:"",bannerOnTop:!1,labelVersion:"",heJiConfig:"",havebox:!1,umAppKey:"",tdAppKey:""},vivo:{gameName:"",labelName:"csyx_csyxvivorpk0424_1_vivo_xyx_20240424",adLabelName:"",age:12,company:"",softCode:"",ysCompanyName:"\u77f3\u5bb6\u5e84\u5e02\u9ad8\u5174\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8",ysMail:"2361198052@qq.com",ysAddress:"\u6cb3\u5317\u7701\u77f3\u5bb6\u5e84\u5e02\u9ad8\u65b0\u533a\u5929\u5c71\u4e16\u754c\u4e4b\u95e8\u5927\u53a6H-1009",inter:"",banner:"7e605ccce5e249b4b5ccf0590e72d6ff",custom1:"6dcc9ec70ee8472e9ca48233dba5ea2f",custom2:"81b6d57253dd4942b1d46a5e413e4477",custom_banner:"",native1:"",native2:"",video:"050a726b94944e138d7de4ec0faf9be6",native_icon:"",boxBanner:"",boxPortal:"",bannerOnTop:!0,labelVersion:"",havebox:!1,heJiConfig:"",tdAppKey:""},wx:{gameName:"",labelName:"srxsmg_srxsmgqq_100_qq_xyx_20221111",age:12,company:"",softCode:"",ysCompanyName:"\u77f3\u5bb6\u5e84\u5e02\u9ad8\u5174\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8",ysMail:"2361198052@qq.com",ysAddress:"\u6cb3\u5317\u7701\u77f3\u5bb6\u5e84\u5e02\u9ad8\u65b0\u533a\u5929\u5c71\u4e16\u754c\u4e4b\u95e8\u5927\u53a6H-1009",appId:"wx4c32596749743cf9",video:"adunit-d07b4473f0e01c0f",banner:"adunit-a8da4c3fda27eba1",inter:"adunit-d92be1b1d8ab6324",inter_custom:"adunit-e6d377baf12c177c",custom_left:"",custom_right:"",labelVersion:"",subIds:[],heJiConfig:"",shareImgUrl:"",tdAppKey:""},qq:{gameName:"",labelName:"srxsmg_srxsmgqq_100_qq_xyx_20221111",age:12,company:"",softCode:"",ysCompanyName:"\u77f3\u5bb6\u5e84\u5e02\u9ad8\u5174\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8",ysMail:"2361198052@qq.com",ysAddress:"\u6cb3\u5317\u7701\u77f3\u5bb6\u5e84\u5e02\u9ad8\u65b0\u533a\u5929\u5c71\u4e16\u754c\u4e4b\u95e8\u5927\u53a6H-1009",appId:"1112204543",video:"e757e4aafb16730b8b7c290757c12645",box:"ebb2bb84f05dee2c51272897eefb38e6",inter:"0f7f1035be90a7f6c93580987da065e7",block:"a6bc0b050d01b740e4cd93ba95aefbcc",block2:"a6bc0b050d01b740e4cd93ba95aefbcc",banner:"47f3f7988e5d5f10ec7e1a557749c385",bannerOnTop:!1,gameEndShowCrazyPoint:!0,gameEndShowGameBox:!0,shareImgUrl:"",labelVersion:"2",countdowntime:5,sceneidtest:!1,subIds:[],heJiConfig:"",tdAppKey:""},ks:{gameName:"",appId:"",labelName:"srxsmg_srxsmgqq_100_qq_xyx_20221111",age:12,company:"",softCode:"",ysCompanyName:"\u77f3\u5bb6\u5e84\u5e02\u9ad8\u5174\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8",ysMail:"2361198052@qq.com",ysAddress:"\u6cb3\u5317\u7701\u77f3\u5bb6\u5e84\u5e02\u9ad8\u65b0\u533a\u5929\u5c71\u4e16\u754c\u4e4b\u95e8\u5927\u53a6H-1009",inter:"",banner:"",video:"2300005032_01",labelVersion:"",heJiConfig:"",tdAppKey:""},tt:{gameName:"",appId:"",ecpmConfigName:"",labelName:"srxsmg_srxsmgqq_100_qq_xyx_20221111",age:12,company:"",softCode:"",ysCompanyName:"\u77f3\u5bb6\u5e84\u5e02\u9ad8\u5174\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8",ysMail:"2361198052@qq.com",ysAddress:"\u6cb3\u5317\u7701\u77f3\u5bb6\u5e84\u5e02\u9ad8\u65b0\u533a\u5929\u5c71\u4e16\u754c\u4e4b\u95e8\u5927\u53a6H-1009",inter:"",banner:"",video:"4r2q3gc5f2f1pg9mbm",labelVersion:"",umAppKey:"",shareTemplateId:"",heJiConfig:"",tdAppKey:""},hw:{gameName:"",labelName:"srxsmg_srxsmgqq_100_qq_xyx_20221111",age:12,company:"",softCode:"",ysCompanyName:"\u77f3\u5bb6\u5e84\u5e02\u9ad8\u5174\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8",ysMail:"2361198052@qq.com",ysAddress:"\u6cb3\u5317\u7701\u77f3\u5bb6\u5e84\u5e02\u9ad8\u65b0\u533a\u5929\u5c71\u4e16\u754c\u4e4b\u95e8\u5927\u53a6H-1009",appId:"108209745",inter:"a1en1p9sb7",banner:"v5j7fxt80k",custom_banner:"",video:"k2x30ircfl",native_icon:"",native_banner:"",native1:"e32q21trec",native2:"",bannerOnTop:!1,buildType:"debug",debug_inter:"testb4znbuh3n2",debug_banner:"testw6vs28auh3",debug_custom_banner:"",debug_video:"testx9dtjwj8hp",debug_native_icon:"",debug_native_banner:"",debug_native1:"testu7m3hc4gvm",debug_native2:"",labelVersion:"",umAppKey:"",heJiConfig:"",tdAppKey:""},uc:{gameName:"",labelName:"srxsmg_srxsmgqq_100_qq_xyx_20221111",age:12,company:"",softCode:"",ysCompanyName:"\u77f3\u5bb6\u5e84\u5e02\u9ad8\u5174\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8",ysMail:"2361198052@qq.com",ysAddress:"\u6cb3\u5317\u7701\u77f3\u5bb6\u5e84\u5e02\u9ad8\u65b0\u533a\u5929\u5c71\u4e16\u754c\u4e4b\u95e8\u5927\u53a6H-1009",inter:"",banner:"",video:"",labelVersion:"",tdAppKey:""},zfb:{gameName:"",labelName:"",age:12,company:"",softCode:"",ysCompanyName:"\u77f3\u5bb6\u5e84\u5e02\u9ad8\u5174\u7f51\u7edc\u79d1\u6280\u6709\u9650\u516c\u53f8",ysMail:"2361198052@qq.com",ysAddress:"\u6cb3\u5317\u7701\u77f3\u5bb6\u5e84\u5e02\u9ad8\u65b0\u533a\u5929\u5c71\u4e16\u754c\u4e4b\u95e8\u5927\u53a6H-1009",inter:"ad_tiny_2021004124680383_202311102200070139",banner:"ad_tiny_2021004124680383_202311102200070028",video:"ad_tiny_2021004124680383_202311102200070140",labelVersion:"",tdAppKey:""}},cc._RF.pop()},{}],GxAd:[function(t,e,n){"use strict";cc._RF.push(e,"00852sE0l9NU6rfpEOf2CoN","GxAd"),Object.defineProperty(n,"__esModule",{value:!0}),n.UI_NAME_ENUM=void 0,function(t){t[t.UI_LOAD=0]="UI_LOAD",t[t.UI_MAIN=1]="UI_MAIN",t[t.UI_PAUSE=2]="UI_PAUSE",t[t.UI_WIN=3]="UI_WIN",t[t.UI_LOSE=4]="UI_LOSE",t[t.UI_END=5]="UI_END",t[t.UI_SIGN=6]="UI_SIGN",t[t.UI_STORE=7]="UI_STORE",t[t.UI_OTHER=8]="UI_OTHER",t[t.UI_SKIN=9]="UI_SKIN",t[t.UI_LOTTERY=10]="UI_LOTTERY",t[t.UI_MODE=11]="UI_MODE",t[t.UI_LV=12]="UI_LV",t[t.BTN_BACK=13]="BTN_BACK",t[t.BTN_START_GAME=14]="BTN_START_GAME",t[t.BTN_PAUSE_CONTINUE=15]="BTN_PAUSE_CONTINUE",t[t.BTN_PAUSE_MAIN=16]="BTN_PAUSE_MAIN",t[t.BTN_VIDEO_RELIVE=17]="BTN_VIDEO_RELIVE",t[t.BTN_VIDEO_UNLOCK=18]="BTN_VIDEO_UNLOCK",t[t.BTN_VIDEO_COINS=19]="BTN_VIDEO_COINS",t[t.BTN_VIDEO_TIPS=20]="BTN_VIDEO_TIPS",t[t.BTN_VIDEO_SKIP=21]="BTN_VIDEO_SKIP",t[t.BTN_VIDEO_OTHER=22]="BTN_VIDEO_OTHER",t[t.UI_SETTING=23]="UI_SETTING"}(n.UI_NAME_ENUM||(n.UI_NAME_ENUM={}));var o=function(){function t(){}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.onGameMain=function(){console.log("onGameMain:")},t.prototype.onGameLvStart=function(t){console.log("onGameLvStart:"+t)},t.prototype.onGameLvEnd=function(t,e){console.log("onGameLvEnd:"+t+":"+e)},t.prototype.onGameMode=function(){},t.prototype.onGameUI=function(t,e){void 0===e&&(e="")},t.prototype.onGameEvent=function(){},t.prototype.showBanner=function(t){console.log("showBanner:"+t)},t.prototype.hideBanner=function(){console.log("hideBanner:")},t.prototype.showVideo=function(t,e){console.log("showVideo:"+t),e&&e(!0)},t.prototype.showInterstitial=function(t){console.log("showInterstitial:"+t)},t.prototype.canShowShareRecord=function(){return console.log("canShowShareRecorder:"),!1},t.prototype.recorderStart=function(){console.log("recorderStart:")},t.prototype.recorderStop=function(t){console.log("recorderStop:"),t&&t(!1)},t.prototype.hasRecorderPath=function(){return console.log("hasRecorderPath:"),!1},t.prototype.shareRecord=function(){console.log("shareRecord:")},t.prototype.getChannel=function(){return""},t.instance=null,t}();n.default=o,cc._RF.pop()},{}],GxAudioUtil:[function(t,e,n){"use strict";cc._RF.push(e,"3a696YVprVMZrwvLMQMSJT/","GxAudioUtil"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../util/DataStorage"),i=function(){function t(){}return t.playSound=function(t,e){if(void 0===e&&(e=!1),o.default.soundPlay)return void 0===t||null==t?null:(null!=cc.loader.getRes(t,cc.AudioClip)?t=cc.loader.getRes(t,cc.AudioClip):"string"==typeof t&&(t=cc.url.raw("resources/"+t)),cc.audioEngine.playEffect(t,e))},t.stopSound=function(t){NaN!==Number(t)&&cc.audioEngine.stopEffect(t)},t.stopAllSounds=function(){cc.audioEngine.stopAllEffects()},t.playMusic=function(t,e){if(void 0===e&&(e=!0),o.default.musicPlay){if(void 0===t||null==t)return null;null!=cc.loader.getRes(t,cc.AudioClip)?t=cc.loader.getRes(t,cc.AudioClip):"string"==typeof t&&(t=cc.url.raw("resources/"+t)),this.stopMusic(),this.musicHandle=cc.audioEngine.playMusic(t,e)}},t.stopMusic=function(){this.musicHandle=null,cc.audioEngine.stopMusic()},t.pauseAll=function(){cc.audioEngine.pauseAll()},t.resumeAll=function(){cc.audioEngine.resumeAll()},t.isMusicPlaying=function(){return cc.audioEngine.isMusicPlaying()},t.pauseMusic=function(){this.musicHandle&&cc.audioEngine.pauseMusic()},t.resumeMusic=function(){this.musicHandle&&cc.audioEngine.resumeMusic()},t.stopAll=function(){cc.audioEngine.stopAll()},t.setSoundVolume=function(t){cc.audioEngine.setEffectsVolume(t)},t.setMusicVolume=function(t){cc.audioEngine.setMusicVolume(t)},t.musicHandle=null,t.effectHandle=[],t}();n.default=i,cc._RF.pop()},{"../util/DataStorage":"DataStorage"}],GxBgImg:[function(t,e,n){"use strict";cc._RF.push(e,"bc544WW82xO5aHsDPwZ1BvJ","GxBgImg");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./GxImgMgr"),s=cc._decorator,c=s.ccclass,d=s.property,l={NONE:0,bgUrl:1,lvUrl:2},u=cc.Enum(l),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imgName=u.NONE,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.node.opacity=0;var e=this.node.getComponent(cc.Sprite);if(e||(e=this.node.addComponent(cc.Sprite)),e&&this.imgName!=u.NONE){var n=Object.keys(l);r.default.getInstance().getImgByName(n[this.imgName],function(n){n?e&&e.isValid&&(e.spriteFrame=n,t.node.opacity=255):t&&t.node&&t.node.isValid&&(t.node.opacity=255)})}else this.node.opacity=255},e.prototype.start=function(){},a([d({type:cc.Enum(u)})],e.prototype,"imgName",void 0),a([c],e)}(cc.Component);n.default=h,cc._RF.pop()},{"./GxImgMgr":"GxImgMgr"}],GxChecker:[function(t,e,n){"use strict";cc._RF.push(e,"1225cs19GJN56uxpTRHQK40","GxChecker"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this.canSend=!1,this.addListener=!1,this.msgList=[],this.parentDomain=""}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.init=function(){var e=this;window.parent&&window.parent.postMessage&&window.addEventListener?(this.addListener=!0,console.log("\u5f00\u59cb\u76d1\u542c"),window.addEventListener("message",function(n){var o=n.data;if("check"==o.msg){if(e.parentDomain=o.data.url,!e.canSend){e.canSend=!0;for(var i=0;i<e.msgList.length;i++)console.log("\u53d1\u8fc7\u53bb\u4e86"),e.postMessageToParent(e.msgList[i])}e.postMessageToParent({msg:"check",type:"started",data:{}}),window.onerror=function(n,o,i,a,r){e.postMessageToParent({msg:"check",type:t.MsgType.codeError,data:{message:n,source:o,lineno:i,colno:a,error:r}})}}})):console.log("\u4e0d\u80fd\u76d1\u542c")},t.prototype.postMessageToParent=function(t){this.addListener&&(this.canSend?window.parent.postMessage(t,this.parentDomain):(console.log("push\u4e86\u4e00\u4e2a"),console.log(t),this.msgList.push(t)),this.msgList.length>=15&&(console.error("\u6d88\u606f\u592a\u591a\u6e05\u9664\u4e86"),this.addListener=!1,this.msgList=[]))},t.prototype.check=function(t,e){void 0===e&&(e={}),this.postMessageToParent({msg:"check",type:t,data:e})},t.MsgType={jkzg:"jkzg",initSDK:"initSDK",lvStart:"lvStart",lvEnd:"lvEnd",ad_video:"ad_video",ad_inter:"ad_inter",ad_otherInter:"ad_otherInter",ad_banner_show:"ad_banner_show",ad_banner_hide:"ad_banner_hide",event:"event",btn_event:"btn_event",showGameAgeBtn:"showGameAgeBtn",showGamePrivacy:"showGamePrivacy",showGamePrivacyBtn:"showGamePrivacyBtn",showUserPrivacyBtn:"showUserPrivacyBtn",showAddDesktopBtn:"showAddDesktopBtn",showMoreGameBtn:"showMoreGameBtn",showCancelAccountBtn:"showCancelAccountBtn",codeError:"codeError"},t}();n.default=o,cc._RF.pop()},{}],GxConstant:[function(t,e,n){"use strict";cc._RF.push(e,"e5744h7qEFABaHwvMoclGld","GxConstant");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.Code2SessionUrl="https://wx.sjzgxwl.com/openid/code2Session/v2",e.SubmsgBaseUrl="https://wx.sjzgxwl.com/submsg",e}(t("./base/BaseGxConstant").default);n.default=a,cc._RF.pop()},{"./base/BaseGxConstant":"BaseGxConstant"}],GxEngineAutoTrackBridge:[function(t,e,n){"use strict";cc._RF.push(e,"b5b96mxmu5H5Jp6gh20twTO","GxEngineAutoTrackBridge"),Object.defineProperty(n,"__esModule",{value:!0}),n.GxEngineAutoTrackBridge=void 0;var o=t("./GxEngineUtil"),i=t("./GxEnginePlatformAPI"),a=function(){function t(t,e,n){var i=this,a=(this.taInstance=t,this.config=e||{},n.getLaunchOptionsSync());this._onShow(a),this.startTracked=!0,n.onShow(function(t){i._onShow(t)}),n.onHide(function(){var t;i.startTracked=!1,i.config.appHide&&(o.GxEngineUtil.extend(t={},i.config.properties),o.GxEngineUtil.isFunction(i.config.callback)&&o.GxEngineUtil.extend(t,i.config.callback("appHide"))),i.taInstance._internalTrack("$MPHide",t)})}return t.prototype._onShow=function(t){this.startTracked||(this.config.appHide&&this.taInstance.timeEvent("$MPHide"),this.config.appShow&&(o.GxEngineUtil.extend(this.config.properties),o.GxEngineUtil.isFunction(this.config.callback)&&o.GxEngineUtil.extend(this.config.callback("appShow"))),this.taInstance._internalTrack("$MPShow",{$scene:String(t.scene),$url_query:o.GxEngineUtil.setQuery(i.GxEnginePlatformAPI.getAppOptions().query)}))},t}();n.GxEngineAutoTrackBridge=a,cc._RF.pop()},{"./GxEnginePlatformAPI":"GxEnginePlatformAPI","./GxEngineUtil":"GxEngineUtil"}],GxEngineConfig:[function(t,e,n){"use strict";cc._RF.push(e,"bdc20WDwtdDprt/X/pWMCMI","GxEngineConfig"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this.appId="",this.appToken="",this.openId="",this.BASE_URL="https://api.sjzgxwl.com",this.engineName="ge",this.maxRetries=1,this.sendTimeout=5e3,this.disableEventList=[],this.enableEncrypt=!1,this.debugMode="",this.persistenceName="GxEngine",this.persistenceNameOld="GxEngine_persistence"}return t.LIB_VERSION="4.7.6",t.LIB_NAME="MG",t.LIB_STACK="MiniGame",t}();n.default=o,cc._RF.pop()},{}],GxEngineHttpTask:[function(t,e,n){"use strict";cc._RF.push(e,"bb964R6HXxF9b/8yDnicI/9","GxEngineHttpTask"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./GxEngineUtil"),i=t("./GxEnginePlatformAPI"),a=function(){function t(t,e,n,i,a,r){void 0===n&&(n=1),void 0===i&&(i=5e3),void 0===a&&(a=""),this._config=null,this._isInit=!1,this.data=t,this.serverUrl=e,this.callback=r,this.debugMode=a,this.tryCount=o.GxEngineUtil.isNumber(n)?n:1,this.timeout=o.GxEngineUtil.isNumber(i)?i:5e3,this.taClassName="GxEngineHttpTask"}return t.prototype.run=function(){var t=this,e=o.GxEngineUtil.createExtraHeaders(),n=(e["content-type"]="application/json","debug"===this.debugMode&&(e["Turbo-Debug-Mode"]=1),i.GxEnginePlatformAPI.request({url:this.serverUrl,method:"POST",data:this.data,header:e,success:function(e){var n;console.log("\u8bf7\u6c42\u6210\u529f"),console.log(e),0===(null==e||null==(n=e.data)?void 0:n.code)?t.onSuccess(e):t.onFailed(e)},fail:function(e){console.log("\u8bf7\u6c42\u5931\u8d25"),console.log(e),t.onFailed(e)}}));setTimeout(function(){(o.GxEngineUtil.isObject(n)||o.GxEngineUtil.isPromise(n))&&o.GxEngineUtil.isFunction(n.abort)&&n.abort()},this.timeout)},t.prototype.onSuccess=function(t){var e,n;200===t.statusCode?(n="Data Verified",null!=t&&null!=(e=t.data)&&null!=(e=e.extra)&&null!=(e=e.errors)&&e.length&&(n=t.data.extra.errors),this.callback({code:null==t||null==(e=t.data)?void 0:e.code,msg:n})):this.callback({code:-3,msg:t.statusCode})},t.prototype.onFailed=function(t){var e,n=this;0<--this.tryCount?setTimeout(function(){n.run()},1e3):this.callback({code:-3,msg:"".concat(null==t||null==(e=t.data)?void 0:e.msg,"\uff1a").concat(null==t||null==(e=t.data)||null==(e=e.extra)?void 0:e.error)})},t}();n.default=a,cc._RF.pop()},{"./GxEnginePlatformAPI":"GxEnginePlatformAPI","./GxEngineUtil":"GxEngineUtil"}],GxEngineLogger:[function(t,e,n){"use strict";cc._RF.push(e,"bf59cG+ayNELr4B9uFBv2R8","GxEngineLogger"),Object.defineProperty(n,"__esModule",{value:!0}),n.GxEngineLogger=void 0;var o=function(){function t(){}return t.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if("object"==typeof console&&console.log&&t.enabled)try{console.log.apply(console,arguments)}catch(o){console.log(arguments[0])}},t.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if("object"==typeof console&&console.warn&&t.enabled)try{console.warn.apply(console,arguments)}catch(o){console.warn(arguments[0])}},t.enabled=!0,t}();n.GxEngineLogger=o,cc._RF.pop()},{}],GxEnginePersistence:[function(t,e,n){"use strict";cc._RF.push(e,"4a237riH7BBgKYZOxpt4Gqa","GxEnginePersistence"),Object.defineProperty(n,"__esModule",{value:!0}),n.GxEnginePersistence=void 0;var o=t("./GxEnginePlatformAPI"),i=t("./GxEngineUtil"),a=t("./GxEngineSystemInformation"),r=t("./GxEngineLogger"),s=new a.GxEngineSystemInformation,c=function(){function t(t,e){var n=this;this.name="GxEngine",this.enabled=t.enablePersistence,this.enabled?(this.name=t.persistenceName,this.nameOld=t.persistenceNameOld,t.asyncPersistence?(this._state={},o.GxEnginePlatformAPI.getStorage(this.name,!0,function(a){i.GxEngineUtil.isEmptyObject(a)?o.GxEnginePlatformAPI.getStorage(n.nameOld,!0,function(o){n._state=i.GxEngineUtil.extend2Layers({},o,n._state),n._init(t,e),n._save()}):(n._state=i.GxEngineUtil.extend2Layers({},a,n._state),n._init(t,e),n._save())})):(this._state=o.GxEnginePlatformAPI.getStorage(this.name)||{},i.GxEngineUtil.isEmptyObject(this._state)&&(this._state=o.GxEnginePlatformAPI.getStorage(this.nameOld)||{}),this._init(t,e))):(this._state={},this._init(t,e))}return t.prototype._init=function(t,e){this.getDistinctId()||this.setDistinctId(i.GxEngineUtil.UUID()),t.isChildInstance||this.getDeviceId()||this._setDeviceId(i.GxEngineUtil.UUID()),this.initComplete=!0,"function"==typeof e&&e();var n=o.GxEnginePlatformAPI.getStorage(this.name),a=null==n?void 0:n.current_first_scene_date,r=null==n?void 0:n.current_first_scene,c=(new Date).toLocaleDateString();if(r&&a&&a===c)s.properties.$today_first_scene=String(null==n?void 0:n.current_first_scene);else{var d=String(o.GxEnginePlatformAPI.getAppOptions().scene);s.properties.$today_first_scene=d,this._state.current_first_scene=d,this._state.current_first_scene_date=c,this._save()}},t.prototype._save=function(){this.enabled&&this.initComplete&&o.GxEnginePlatformAPI.setStorage(this.name,JSON.stringify(this._state))},t.prototype._set=function(t,e){var n=this,o={};"string"==typeof t?o[t]=e:"object"==typeof t&&(o=t),i.GxEngineUtil.each(o,function(t,e){n._state[e]=t}),this._save()},t.prototype._get=function(t){return this._state[t]},t.prototype.setEventTimer=function(t,e){var n=this._state.event_timers||{};n[t]=e,this._set("event_timers",n)},t.prototype.removeEventTimer=function(t){if(this._state&&this._state.event_timers){var e=this._state.event_timers[t];return e&&(delete this._state.event_timers[t],this._save()),e}},t.prototype.getDeviceId=function(){return this._state.device_id},t.prototype._setDeviceId=function(t){this.getDeviceId()?r.GxEngineLogger.warn("cannot modify the device id."):this._set("device_id",t)},t.prototype.getDistinctId=function(){return this._state.distinct_id},t.prototype.setDistinctId=function(t){this._set("distinct_id",t)},t.prototype.getAccountId=function(){return this._state.account_id},t.prototype.setAccountId=function(t){this._set("account_id",t)},t.prototype.getSuperProperties=function(){return this._state.props||{}},t.prototype.setSuperProperties=function(t,e){e=e?t:i.GxEngineUtil.extend(this.getSuperProperties(),t),this._set("props",e)},t}();n.GxEnginePersistence=c,cc._RF.pop()},{"./GxEngineLogger":"GxEngineLogger","./GxEnginePlatformAPI":"GxEnginePlatformAPI","./GxEngineSystemInformation":"GxEngineSystemInformation","./GxEngineUtil":"GxEngineUtil"}],GxEnginePlatformAPI:[function(t,e,n){"use strict";cc._RF.push(e,"f534cNA6lZN4IBsO8kc8eAK","GxEnginePlatformAPI"),Object.defineProperty(n,"__esModule",{value:!0}),n.GxEnginePlatformAPI=void 0;var o=t("./GxEnginePlatformProxy"),i=function(){function t(){}return t._getCurrentPlatform=function(){return this.currentPlatform||(this.currentPlatform=o.GxEnginePlatformProxy.createInstance())},t.getConfig=function(){return this._getCurrentPlatform().getConfig()},t.getStorage=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=null),this._getCurrentPlatform().getStorage(t,e,n)},t.setStorage=function(t,e){return this._getCurrentPlatform().setStorage(t,e)},t.getSystemInfo=function(t){return this._getCurrentPlatform().getSystemInfo(t)},t.getNetworkType=function(t){return this._getCurrentPlatform().getNetworkType(t)},t.getQuickDevice=function(t){return this._getCurrentPlatform().getQuickDevice(t)},t.onNetworkStatusChange=function(t){this._getCurrentPlatform().onNetworkStatusChange(t)},t.request=function(t){return this._getCurrentPlatform().request(t)},t.initAutoTrackInstance=function(t,e){return this._getCurrentPlatform().initAutoTrackInstance(t,e)},t.setGlobal=function(t,e){t&&e&&this._getCurrentPlatform().setGlobal(t,e)},t.getAppOptions=function(t){return void 0===t&&(t=null),this._getCurrentPlatform().getAppOptions(t)},t.showDebugToast=function(t){this._getCurrentPlatform().showToast(t)},t}();n.GxEnginePlatformAPI=i,cc._RF.pop()},{"./GxEnginePlatformProxy":"GxEnginePlatformProxy"}],GxEnginePlatformProxy:[function(t,e,n){"use strict";cc._RF.push(e,"341d2WVGE5GHoJE6PEgnahi","GxEnginePlatformProxy"),Object.defineProperty(n,"__esModule",{value:!0}),n.GxEnginePlatformProxy=void 0;var o=t("./BaseGxEnginePlatformProxy"),i=t("./GxEngineLogger"),a=t("./GxEngineUtil"),r=t("./GxEngineAutoTrackBridge"),s=function(){function t(t,e,n){this.api={},this._config={},this.config={},this.api=t,this.config=e,this._config=n}return t.createInstance=function(){return window.tt?this._createInstance("tt_mg"):window.ks?this._createInstance("kuaishou_mg"):void 0},t._createInstance=function(e){switch(e){case"wechat_mp":return new t(wx,{persistenceName:"GxEngine",persistenceNameOld:"GxEngine_wechat"},{mpPlatform:"wechat",mp:!0,platform:e});case"wechat_mg":return new t(wx,{persistenceName:"GxEngine",persistenceNameOld:"GxEngine_wechat_game"},{mpPlatform:"wechat",platform:e});case"qq_mp":return new t(qq,{persistenceName:"GxEngine",persistenceNameOld:"GxEngine_qq"},{mpPlatform:"qq",mp:!0,platform:e});case"qq_mg":return new t(qq,{persistenceName:"GxEngine",persistenceNameOld:"GxEngine_qq_game"},{mpPlatform:"qq",platform:e});case"baidu_mp":return new t(swan,{persistenceName:"GxEngine",persistenceNameOld:"GxEngine_swan"},{mpPlatform:function(t){return t.host},mp:!0,platform:e});case"baidu_mg":return new t(swan,{persistenceName:"GxEngine",persistenceNameOld:"GxEngine_swan_game"},{mpPlatform:function(t){return t.host},platform:e});case"tt_mg":return new t(tt,{persistenceName:"GxEngine",persistenceNameOld:"GxEngine_tt_game"},{mpPlatform:function(t){return t.appName},platform:e});case"tt_mp":return new t(tt,{persistenceName:"GxEngine",persistenceNameOld:"GxEngine_tt"},{mpPlatform:function(t){return t.appName},mp:!0,platform:e});case"ali_mp":return new t(my,{persistenceName:"GxEngine",persistenceNameOld:"GxEngine_ali"},{mpPlatform:function(t){return t.app},mp:!0,platform:e});case"dd_mp":return new t(dd,{persistenceName:"GxEngine",persistenceNameOld:"GxEngine_dd"},{mpPlatform:"dingding",mp:!0,platform:e});case"bl_mg":return new t(bl,{persistenceName:"GxEngine",persistenceNameOld:"GxEngine_mg"},{mpPlatform:"bilibili",platform:e});case"kuaishou_mp":return new t(ks,{persistenceName:"GxEngine",persistenceNameOld:"GxEngine_kuaishou_program"},{mpPlatform:"kuaishou",mp:!0,platform:e});case"kuaishou_mg":return new t(ks,{persistenceName:"GxEngine",persistenceNameOld:"GxEngine_kuaishou_game"},{mpPlatform:"kuaishou_game",platform:e});case"qh360_mg":return new t(qh,{persistenceName:"GxEngine",persistenceNameOld:"GxEngine_qh360"},{mpPlatform:"qh360",platform:e});case"tb_mp":return new t(my,{persistenceName:"GxEngine",persistenceNameOld:"GxEngine_tb"},{mpPlatform:"tb",mp:!0,platform:e});case"jd_mp":return new t(jd,{persistenceName:"GxEngine",persistenceNameOld:"GxEngine_jd"},{mpPlatform:"jd",mp:!0,platform:e});case"qh360_mp":return new t(qh,{persistenceName:"GxEngine",persistenceNameOld:"GxEngine_qh360"},{mpPlatform:"qh360",mp:!0,platform:e});case"WEB":return o.BaseGxEnginePlatformProxy.createInstance()}},t.prototype.getConfig=function(){return this.config},t.prototype.getStorage=function(t,e,n){if(void 0===e&&(e=!1),!e){var o="dd_mp"===this._config.platform?this.api.getStorageSync({key:t}):this.api.getStorageSync(t);return a.GxEngineUtil.isJSONString(o)?JSON.parse(o):{}}this.api.getStorage({key:t,success:function(t){var e=a.GxEngineUtil.isJSONString(t.data)?JSON.parse(t.data):{};n&&n(e)},fail:function(){i.GxEngineLogger.warn("getStorage failed"),n&&n({})}})},t.prototype.setStorage=function(t,e){this.api.setStorage({key:t,data:e})},t.prototype._getPlatform=function(){return""},t.prototype.getSystemInfo=function(t){var e=this._config.mpPlatform;this.api.getSystemInfo({success:function(n){a.GxEngineUtil.isFunction(e)?n.mp_platform=e(n):n.mp_platform=e,t.success(n),"wechat"===e&&t.complete()},complete:function(){t.complete()}})},t.prototype.getNetworkType=function(t){a.GxEngineUtil.isFunction(this.api.getNetworkType)?this.api.getNetworkType({success:function(e){t.success(e)},complete:function(){t.complete()}}):(t.success({}),t.complete())},t.prototype.onNetworkStatusChange=function(t){a.GxEngineUtil.isFunction(this.api.onNetworkStatusChange)?this.api.onNetworkStatusChange(t):t({})},t.prototype.request=function(t){var e;return["ali_mp","dd_mp"].includes(this._config.platform)?((e=a.GxEngineUtil.extend({},t)).headers=t.header,e.success=function(e){e.statusCode=e.status,t.success(e)},e.fail=function(e){e.errMsg=e.errorMessage,t.fail(e)},"dd_mp"===this._config.platform?this.api.httpRequest(e):this.api.request(e)):this.api.request(t)},t.prototype.initAutoTrackInstance=function(t,e){return a.GxEngineUtil.isObject(e.autoTrack)&&(e.autoTrack.isPlugin=e.is_plugin),new r.GxEngineAutoTrackBridge(t,e.autoTrack,this.api)},t.prototype.setGlobal=function(t,e){this._config.mp?i.GxEngineLogger.warn("GravityAnalytics: we do not set global name for GE instance when you do not enable auto track."):window[e]=t},t.prototype.getAppOptions=function(t){var e={};try{e=this.api.getLaunchOptionsSync()}catch(n){i.GxEngineLogger.warn("Cannot get launch options.")}if(a.GxEngineUtil.isFunction(t))try{this._config.mp?this.api.onAppShow(t):this.api.onShow(t)}catch(n){i.GxEngineLogger.warn("Cannot register onShow callback.")}return e},t.prototype.showToast=function(t){var e;a.GxEngineUtil.isFunction(this.api.showToast)&&(e={title:t},"dd_mp"!==this._config.platform&&"ali_mp"!==this._config.platform||(e.content=t),this.api.showToast(e))},t}();n.GxEnginePlatformProxy=s,cc._RF.pop()},{"./BaseGxEnginePlatformProxy":"BaseGxEnginePlatformProxy","./GxEngineAutoTrackBridge":"GxEngineAutoTrackBridge","./GxEngineLogger":"GxEngineLogger","./GxEngineUtil":"GxEngineUtil"}],GxEnginePropertyChecker:[function(t,e,n){"use strict";cc._RF.push(e,"b45der2gZtF4Jwtn4AJS6Bs","GxEnginePropertyChecker"),Object.defineProperty(n,"__esModule",{value:!0}),n.GxEnginePropertyChecker=void 0;var o=t("./GxEngineUtil"),i=t("./GxEngineLogger"),a=/^\$?[a-zA-Z][a-zA-Z0-9_]{0,49}$/,r=function(){function t(){}return t.stripProperties=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=t[e];o.GxEngineUtil.isString(n)||o.GxEngineUtil.isNumber(n)||o.GxEngineUtil.isDate(n)||o.GxEngineUtil.isBoolean(n)||o.GxEngineUtil.isArray(n)||o.GxEngineUtil.isObject(n)||i.GxEngineLogger.warn("Your data - "+e+": "+n+" - format does not meet requirements and may not be stored correctly. Attribute values only support String, Number, Date, Boolean, Array, Object")}return t},t._checkPropertiesKey=function(t){var e=!0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(a.test(n)||(i.GxEngineLogger.warn("Invalid KEY: "+n),e=!1));return e},t.event=function(t){var e=o.GxEngineUtil.isString(t),n=a.test(t);return!(!e||!n)||(i.GxEngineLogger.warn("Check the parameter format. The eventName must start with an English letter and contain no more than 50 characters including letters, digits, and underscores: "+t),!1)},t.propertyName=function(t){return!(!o.GxEngineUtil.isString(t)||!a.test(t))||(i.GxEngineLogger.warn("Check the parameter format. PropertyName must start with a letter and contain letters, digits, and underscores (_). The value is a string of no more than 50 characters: "+t),!1)},t.properties=function(t){return this.stripProperties(t),t&&o.GxEngineUtil.isObject(t)?this._checkPropertiesKey(t):(i.GxEngineLogger.warn("properties can be none, but it must be an object"),!1)},t.propertiesMust=function(t){return this.stripProperties(t),void 0===t||!o.GxEngineUtil.isObject(t)||o.GxEngineUtil.isEmptyObject(t)?(i.GxEngineLogger.warn("properties must be an object with a value"),!1):this._checkPropertiesKey(t)},t.userId=function(t){return!(!o.GxEngineUtil.isString(t)||!/^.{1,64}$/.test(t))||(i.GxEngineLogger.warn("The user ID must be a string of less than 64 characters and cannot be null"),!1)},t.userAddProperties=function(t){if(!this.propertiesMust(t))return!1;for(var e in t)if(!o.GxEngineUtil.isNumber(t[e]))return i.GxEngineLogger.warn("The attributes of userAdd need to be Number"),!1;return!0},t.userAppendProperties=function(t){if(!this.propertiesMust(t))return!1;for(var e in t)if(!o.GxEngineUtil.isArray(t[e]))return i.GxEngineLogger.warn("The attribute of userAppend must be Array"),!1;return!0},t}();n.GxEnginePropertyChecker=r,cc._RF.pop()},{"./GxEngineLogger":"GxEngineLogger","./GxEngineUtil":"GxEngineUtil"}],GxEngineSenderQueue:[function(t,e,n){"use strict";cc._RF.push(e,"4e920EkiwBOGrp/ITs/G348","GxEngineSenderQueue"),Object.defineProperty(n,"__esModule",{value:!0}),n.GxEngineSenderQueue=void 0;var o=t("./GxEngineLogger"),i=t("./GxEngineUtil"),a=t("./GxEngineHttpTask"),r=function(){function t(){this.items=[],this.isRunning=!1,this.showDebug=!1}return t.prototype.enqueue=function(t,e,n){var r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],s="debug"===n.debugMode,c=this,d=new a.default(JSON.stringify(t),e,n.maxRetries,n.sendTimeout,n.debugMode,function(t){c.isRunning=!1,i.GxEngineUtil.isFunction(n.callback)&&n.callback(t),c._runNext(s),s&&o.GxEngineLogger.info("code ".concat(t.code," and msg is ").concat(t.msg))});!0===r?(this.items.push(d),this._runNext(s)):d.run()},t.prototype._dequeue=function(){return this.items.shift()},t.prototype._runNext=function(t){if(0<this.items.length&&!this.isRunning)if(this.isRunning=!0,t)this._dequeue().run();else{for(var e=this.items.splice(0,this.items.length),n=(t=e[0],JSON.parse(t.data)),o=1;o<e.length;o++){var i=e[o];i=JSON.parse(i.data),n.event_list=n.event_list.concat(i.event_list)}var r=(new Date).getTime();n.$flush_time=r,new a.default(JSON.stringify(n),t.serverUrl,t.tryCount,t.timeout,null==t?void 0:t.debugMode,t.callback).run()}},t}();n.GxEngineSenderQueue=r,cc._RF.pop()},{"./GxEngineHttpTask":"GxEngineHttpTask","./GxEngineLogger":"GxEngineLogger","./GxEngineUtil":"GxEngineUtil"}],GxEngineSystemInformation:[function(t,e,n){"use strict";cc._RF.push(e,"dfe59kwsfJGJZ4N3EJoGP79","GxEngineSystemInformation"),Object.defineProperty(n,"__esModule",{value:!0}),n.GxEngineSystemInformation=void 0;var o=t("./GxEnginePlatformAPI"),i=t("./GxEngineLogger"),a=t("./GxEngineUtil"),r=function(){function t(){this.properties={$lib_version:"",$lib:"",$scene:"",$today_first_scene:"",$network_type:"",$manufacturer:"",$brand:"",$model:"",$screen_width:"",$screen_height:"",$system_language:"",$os:"",$os_version:""}}return t.prototype.getSystemInfo=function(t){var e=this,n=function(t){e.properties.$network_type=t.networkType};o.GxEnginePlatformAPI.onNetworkStatusChange(n),o.GxEnginePlatformAPI.getNetworkType({success:n,complete:function(){o.GxEnginePlatformAPI.getSystemInfo({success:function(t){i.GxEngineLogger.info(JSON.stringify(t,null,4));var n={$manufacturer:t.brand,$brand:t.brand,$model:t.model,$screen_width:Number(t.screenWidth),$screen_height:Number(t.screenHeight),$system_language:t.language,$os:t.platform,$os_version:t.system};Object.assign(e.properties,n),a.GxEngineUtil.setMpPlatform(t.mp_platform)},complete:t})}})},t}();n.GxEngineSystemInformation=r,cc._RF.pop()},{"./GxEngineLogger":"GxEngineLogger","./GxEnginePlatformAPI":"GxEnginePlatformAPI","./GxEngineUtil":"GxEngineUtil"}],GxEngineUtil:[function(t,e,n){"use strict";cc._RF.push(e,"9b772iAWS5HPIXqxLYog69H","GxEngineUtil"),Object.defineProperty(n,"__esModule",{value:!0}),n.GxEngineUtil=void 0;var o=t("./GxEngineConfig"),i=t("./GxEngineLogger"),a=Array.prototype,r=Object.prototype,s=a.slice,c=r.toString,d=Object.prototype.hasOwnProperty,l=a.forEach,u=(Array.isArray,{}),h=function(){function t(){}return t.getMpPlatform=function(){return this._mpPlatform},t.setMpPlatform=function(t){this._mpPlatform=t},t.isNumber=function(t){return"[object Number]"===c.call(t)&&/[\d\.]+/.test(String(t))},t.isObject=function(t){return"[object Object]"===c.call(t)&&null!=t},t.isPromise=function(t){return"[object Promise]"===c.call(t)&&null!=t},t.isFunction=function(t){try{return"function"==typeof t}catch(t){return!1}},t.createExtraHeaders=function(){return{"GE-Integration-Type":o.default.LIB_NAME,"GE-Integration-Version":o.default.LIB_VERSION,"GE-Integration-Count":"1","GE-Integration-Extra":this.getMpPlatform()}},t.isJSONString=function(t){try{JSON.parse(t)}catch(t){return!1}return!0},t.extend=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.each(s.call(arguments,1),function(e){for(var n in e)void 0!==e[n]&&(t[n]=e[n])}),t},t.each=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(null==t)return!1;if(l&&t.forEach===l)t.forEach(e,n);else if(t.length===+t.length){for(var i=0,a=t.length;i<a;i++)if(i in t&&e.call(n,t[i],i,t)===u)return!1}else for(var r in t)if(d.call(t,r)&&e.call(n,t[r],r,t)===u)return!1},t.isString=function(t){return"[object String]"===c.call(t)},t.isDate=function(t){return"[object Date]"===c.call(t)},t.isBoolean=function(t){return"[object Boolean]"===c.call(t)},t.isArray=function(t){return"[object Array]"===c.call(t)},t.isEmptyObject=function(t){if(this.isObject(t)){for(var e in t)if(d.call(t,e))return!1;return!0}return!1},t.checkAppId=function(t){if("number"==typeof t)t=String(t);else if("string"!=typeof t)return"";return t.replace(/\s*/g,"")},t.isUndefined=function(t){return null==t||null==t},t.searchObjDate=function(t){var e=this;try{(this.isObject(t)||this.isArray(t))&&this.each(t,function(n,o){e.isObject(n)||e.isArray(n)?e.searchObjDate(t[o]):e.isDate(n)&&(t[o]=e.formatDate(n))})}catch(n){i.GxEngineLogger.warn(n)}},t.generateEncryptyData=function(t){return t},t.base64Encode=function(e){var n,o,i,a,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=0,c=0,d="",l=[];if(!e)return e;for(e=t.utf8Encode(e);n=(a=e.charCodeAt(s++)<<16|e.charCodeAt(s++)<<8|e.charCodeAt(s++))>>12&63,o=a>>6&63,i=63&a,l[c++]=r.charAt(a>>18&63)+r.charAt(n)+r.charAt(o)+r.charAt(i),s<e.length;);switch(d=l.join(""),e.length%3){case 1:d=d.slice(0,-2)+"==";break;case 2:d=d.slice(0,-1)+"="}return d},t.utf8Encode=function(t){for(var e,n="",o=e=0,i=(t=(t+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,a=0;a<i;a++){var r=t.charCodeAt(a),s=null;r<128?e++:s=127<r&&r<2048?String.fromCharCode(r>>6|192,63&r|128):String.fromCharCode(r>>12|224,r>>6&63|128,63&r|128),null!==s&&(o<e&&(n+=t.substring(o,e)),n+=s,o=e=a+1)}return o<e&&(n+=t.substring(o,t.length)),n},t.extend2Layers=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.each(s.call(arguments,1),function(n){for(var o in n)void 0!==n[o]&&(t.isObject(n[o])&&t.isObject(e[o])?t.extend(e[o],n[o]):e[o]=n[o])}),e},t.UUID=function(){var t=(new Date).getTime();return String(Math.random()).replace(".","").slice(1,11)+"-"+t},t.UUIDv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},t.setQuery=function(t){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return n.join("&")},t.formatDate=function(t){function e(t){return t<10?"0"+t:t}return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())+"."+((t=t.getMilliseconds())<100&&9<t?"0"+t:t<10?"00"+t:t)},t}();n.GxEngineUtil=h,cc._RF.pop()},{"./GxEngineConfig":"GxEngineConfig","./GxEngineLogger":"GxEngineLogger"}],GxEngine:[function(t,e,n){"use strict";cc._RF.push(e,"a5d08zF8HJBErQTNR5+tJjj","GxEngine");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,a){function r(t){try{c(o.next(t))}catch(e){a(e)}}function s(t){try{c(o.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return c([t,e])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(s){a=[6,s],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./GxEngineConfig"),r=t("./GxEngineLogger"),s=t("./GxEngineUtil"),c=t("./GxEnginePlatformAPI"),d=t("./GxEnginePropertyChecker"),l=t("./GxEngineSenderQueue"),u=t("./GxEngineSystemInformation"),h=t("./GxEnginePersistence"),p=t("../util/GxUtils"),f=t("../util/DataStorage"),g=new u.GxEngineSystemInformation,m=function(){function t(){this._queue=[],this.senderQueue=new l.GxEngineSenderQueue,this.autoTrack={},this.responseConfig={sessionId:"",clickid:"",ecpmConfig:{gameTime:10.3,targetEcpm:300,targetVideo:1}},this.heartInterval=5e3,this.initComplete=!1,this.checkInterval=20,this.gameTime=0,this.videoReward=0,this.reported=!1,this.checkAdTargetTimeout=-1,this.gameTimeEnd=!1}return t.prototype._errorPromise=function(t){return Promise.reject(new Error(t))},t.prototype.init=function(t){var e=this;return new Promise(function(n,r){return o(e,void 0,void 0,function(){var e,o,d,l,u,f=this;return i(this,function(i){switch(i.label){case 0:if(this.initComplete)return r(this._errorPromise("\u91cd\u590d\u521d\u59cb\u5316")),[2];if(e=new a.default,!t.openId)return r(this._errorPromise("openId\u4e0d\u80fd\u4e3a\u7a7a")),[2];if(!t.appToken)return r(this._errorPromise("appToken\u4e0d\u80fd\u4e3a\u7a7a")),[2];g.getSystemInfo(function(){}),this._queue=[],this._config=Object.assign(e,t),this._config.appToken=s.GxEngineUtil.checkAppId(this._config.appToken),o={appToken:this._config.appToken,openId:this._config.openId,appId:this._config.appId,launchOptions:c.GxEnginePlatformAPI.getAppOptions()},this.serverUrl=this._config.BASE_URL+"/event_center/event/collect",this.store=new h.GxEnginePersistence(this._config,function(){}),d=this._config.BASE_URL+"/event_center/user/login",l=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.sendNetWork(d,o)];case 2:return l=i.sent(),console.log(JSON.stringify(l)),1!==l.code?[2,r(l)]:[3,4];case 3:return i.sent(),[2,r(l)];case 4:return c.GxEnginePlatformAPI.setGlobal(this,this._config.engineName),this.responseConfig=l.data,l.data.heartInterval&&p.default.isNumber(l.data.heartInterval)&&((u=Number(l.data.heartInterval))<5e3&&(u=5e3),this.heartInterval=u),setInterval(function(){f.heartBeat()},this.heartInterval),this.initComplete=!0,this.responseConfig.clickid&&setInterval(function(){var t=setInterval(function(){f.gameTime+=f.checkInterval,f.gameTime>=60*f.responseConfig.ecpmConfig.gameTime&&!f.gameTimeEnd&&(f.gameTimeEnd=!0,f.checkAdTarget(),clearInterval(t))},5e3);setTimeout(function(){f.checkAdTarget()},1e3*f.checkInterval)},1e3*this.checkInterval),n(l),[2]}})})})},t.prototype.rewardAdEnd=function(){console.log("\u89c6\u9891\u5b8c\u4e86\u4e86"),this.videoReward++,this.checkAdTarget()},t.prototype.checkAdTarget=function(){var t=this;clearTimeout(this.checkAdTargetTimeout),this._checkAdTarget(),this.checkAdTargetTimeout=setTimeout(function(){t.checkAdTarget()},1e3*this.checkInterval)},t.prototype._checkAdTarget=function(){if(this.gameTime>=60*this.responseConfig.ecpmConfig.gameTime&&this.videoReward>=this.responseConfig.ecpmConfig.targetVideo||window.rywDEBUG){if("true"==f.default.getItem("__ttTaq__"))return void console.log("\u672c\u5730\u5df2\u7ecf\u6709\u4e0a\u62a5\u8bb0\u5f55\u4e86");if(this.reported)return void console.log("\u6b63\u5728\u4e0a\u62a5");this.reported=!0;var t=this,e=t.responseConfig.ecpmConfig.targetEcpm;if(0==e)return void t.sendToTAQ("game_addiction",function(e){e||(t.reported=!1)});window.tt?this.sendNetWork(this._config.BASE_URL+"/bytedance/ecpm/listByOpenId",{openId:this._config.openId,appId:this._config.appId,appToken:this._config.appToken}).then(function(n){if(r.GxEngineLogger.info(n),1==n.code){r.GxEngineLogger.info("\u83b7\u53d6ecpm\u6210\u529f\uff1a");for(var o=n.data.records,i=o.length,a=0,s=0;s<i;s++)a+=o[s].cost;console.log("\u603b\u5171\u7684const:"+a);var c=a/1e5*1e3/i;(a<=0||i<=0)&&(c=0),r.GxEngineLogger.info("\u5f53\u524d\u8ba1\u7b97\u7684ecmp:"+c),c>=e?(r.GxEngineLogger.info("ecpm\u8fbe\u5230"+e+" \u4e0a\u62a5"),t.sendToTAQ("game_addiction",function(e){e||(t.reported=!1)})):(t.reported=!1,r.GxEngineLogger.info("ecpm\u6ca1\u8fbe\u5230"+e))}else r.GxEngineLogger.info("\u83b7\u53d6ecpm\u5931\u8d25\uff01"+n.msg),t.reported=!1}).catch(function(e){r.GxEngineLogger.info("\u83b7\u53d6ecpm\u5931\u8d25\uff01"),r.GxEngineLogger.info(e),t.reported=!1}):window.ks&&this.sendNetWork(this._config.BASE_URL+"/kuaishou/ecpm/listByOpenId",{openId:this._config.openId,appId:this._config.appId,appToken:this._config.appToken}).then(function(n){if(r.GxEngineLogger.info(n),1==n.code){r.GxEngineLogger.info("\u83b7\u53d6ecpm\u6210\u529f\uff1a");for(var o=n.data.records,i=o.length,a=0,s=0;s<i;s++)a+=o[s].cost;console.log("\u603b\u5171\u7684const:"+a);var c=a/1e3*1e3/i;(a<=0||i<=0)&&(c=0),r.GxEngineLogger.info("\u5f53\u524d\u8ba1\u7b97\u7684ecmp:"+c),c>=e?(r.GxEngineLogger.info("ecpm\u8fbe\u5230"+e+" \u4e0a\u62a5"),t.sendToTAQ("game_addiction",function(e){e||(t.reported=!1)})):(t.reported=!1,r.GxEngineLogger.info("ecpm\u6ca1\u8fbe\u5230"+e))}else r.GxEngineLogger.info("\u83b7\u53d6ecpm\u5931\u8d25\uff01"+n.msg),t.reported=!1}).catch(function(e){r.GxEngineLogger.info("\u83b7\u53d6ecpm\u5931\u8d25\uff01"),r.GxEngineLogger.info(e),t.reported=!1})}else console.log(this.responseConfig.ecpmConfig),console.log("\u65f6\u95f4\uff1a"+(this.gameTime>=60*this.responseConfig.ecpmConfig.gameTime)+"\u6fc0\u52b1\u6b21\u6570\uff1a"+(this.videoReward>=this.responseConfig.ecpmConfig.targetVideo))},t.prototype.sendToTAQ=function(t,e){var n=this.responseConfig.clickid;if(!n)return console.warn("clickId\u7a7a  \u4e0d\u4e0a\u62a5 \u4e86"),void e(!1);this.sendNetWork(this._config.BASE_URL+"/event_center/user/report",{appToken:this._config.appToken,appId:this._config.appId,clickid:n,openId:this._config.openId,eventType:t},"POST").then(function(t){1==t.code?e(!0):e(!1)}).catch(function(t){r.GxEngineLogger.warn(t),e(!1)})},t.prototype.heartBeat=function(){this.eventTrack("$heart",{})},t.prototype.eventTrack=function(t,e,n,o){var i;void 0===e&&(e={}),void 0===n&&(n=null),void 0===o&&(o=null),this._isObjectParams(t)&&(t=(i=t).eventName,e=i.properties,n=i.time,o=i.onComplete),d.GxEnginePropertyChecker.event(t)&&d.GxEnginePropertyChecker.properties(e)?this._internalTrack(t,e,n,o):o&&o({code:-1,msg:"invalid parameters"})},t.prototype._internalTrack=function(t,e,n,o,i){void 0===n&&(n=null),void 0===o&&(o=null),n=s.GxEngineUtil.isDate(n)?n:new Date,this._isReady()?this._sendRequest({type:"track",eventName:t,properties:e,onComplete:o},n,i):this._queue.push(["_internalTrack",[t,e,n,o]])},t.prototype._sendRequest=function(t,e,n){var o,i;if(void 0===n&&(n=null),!this._hasDisabled())if(s.GxEngineUtil.isUndefined(this._config.disableEventList)||!this._config.disableEventList.includes(t.eventName)){e=s.GxEngineUtil.isDate(e)?e:new Date;var a={event_list:[{type:t.type,time:new Date(e).getTime(),event:"",properties:{},sessionId:this.responseConfig.sessionId}],appToken:this._config.appToken,appId:this._config.appId,openId:this._config.openId,clickid:this.responseConfig.clickid};a.event_list[0].event=t.eventName,"track"===t.type?(a.event_list[0].properties=this.getSendProperties(),o=this.store.removeEventTimer(t.eventName),s.GxEngineUtil.isUndefined(o)||((o=(new Date).getTime()-o)>86400?o=86400:o<0&&(o=0),a.event_list[0].properties.$event_duration=o)):a.event_list[0].properties={},s.GxEngineUtil.isObject(t.properties)&&!s.GxEngineUtil.isEmptyObject(t.properties)&&s.GxEngineUtil.extend(a.event_list[0].properties,t.properties),s.GxEngineUtil.searchObjDate(a.event_list[0]),o=this.serverUrl,s.GxEngineUtil.isBoolean(this._config.enableEncrypt)&&this._config.enableEncrypt&&(a.event_list[0]=s.GxEngineUtil.generateEncryptyData(a.event_list[0],void 0)),n?n instanceof FormData&&("debug"===this._config.debugMode?(n.append("source","client"),n.append("appid",this._config.appToken),n.append("deviceId","this.getDeviceId()"),n.append("data",JSON.stringify(a.event_list[0]))):(i=s.GxEngineUtil.base64Encode(JSON.stringify(a)),n.append("data",i)),navigator.sendBeacon(o,n),s.GxEngineUtil.isFunction(t.onComplete)&&t.onComplete({statusCode:200})):this.senderQueue.enqueue(a,o,{maxRetries:this._config.maxRetries,sendTimeout:this._config.sendTimeout,callback:t.onComplete,debugMode:this._config.debugMode})}else r.GxEngineLogger.info("disabled Event : "+t.eventName)},t.prototype.getSendProperties=function(){try{var t=s.GxEngineUtil.extend({},g.properties);for(var e in t)"string"==typeof t[e]&&(t[e]=t[e].substring(0,8192));return t}catch(n){return{}}},t.prototype._hasDisabled=function(){return!1},t.prototype._isReady=function(){return this.initComplete&&this._config.appToken&&!!this._config.openId},t.prototype._isObjectParams=function(t){return s.GxEngineUtil.isObject(t)&&s.GxEngineUtil.isFunction(t.onComplete)},t.prototype.sendNetWork=function(t,e,n){return void 0===n&&(n="POST"),new Promise(function(o,i){c.GxEnginePlatformAPI.request({url:t,method:n,data:"string"==typeof e?e:JSON.stringify(e),header:{"content-type":"application/json"},success:function(t){console.log("successssss"),200===t.statusCode?o(t.data):i(t)},fail:function(t){r.GxEngineLogger.warn(t),i(t)}})})},t.prototype.timeEvent=function(t,e){void 0===e&&(e=null)},t.prototype.getClickId=function(){return this.responseConfig.clickid},t}();n.default=m,cc._RF.pop()},{"../util/DataStorage":"DataStorage","../util/GxUtils":"GxUtils","./GxEngineConfig":"GxEngineConfig","./GxEngineLogger":"GxEngineLogger","./GxEnginePersistence":"GxEnginePersistence","./GxEnginePlatformAPI":"GxEnginePlatformAPI","./GxEnginePropertyChecker":"GxEnginePropertyChecker","./GxEngineSenderQueue":"GxEngineSenderQueue","./GxEngineSystemInformation":"GxEngineSystemInformation","./GxEngineUtil":"GxEngineUtil"}],GxEnum:[function(t,e,n){"use strict";cc._RF.push(e,"8f717rWTEJI5YhGBdFOsr7g","GxEnum"),Object.defineProperty(n,"__esModule",{value:!0}),n.EventName=n.privacy_type=n.PLATFORM=n.ad_native_state=n.ad_native_type=void 0,function(t){t[t.banner=0]="banner",t[t.inter1=1]="inter1",t[t.inter2=2]="inter2",t[t.native_icon=3]="native_icon"}(n.ad_native_type||(n.ad_native_type={})),function(t){t[t.none=0]="none",t[t.need_show=1]="need_show",t[t.show=2]="show",t[t.click=3]="click"}(n.ad_native_state||(n.ad_native_state={})),function(t){t.MI="mi",t.OPPO="oppo",t.VIVO="vivo",t.G233="233",t.MMY="mmy",t.HUAWEI="huawei",t.G4399="4399"}(n.PLATFORM||(n.PLATFORM={})),function(t){t.user="user",t.privacy="privacy"}(n.privacy_type||(n.privacy_type={})),function(t){t.main="main",t.lvStart="lvStart",t.lvEnd="lvEnd",t.modeLvChoice="modeLvChoice"}(n.EventName||(n.EventName={})),cc._RF.pop()},{}],GxFirstScene:[function(t,e,n){"use strict";cc._RF.push(e,"9038amqo/FPtYJukM49Tmxd","GxFirstScene");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GxGame"),s=t("../util/ResUtil"),c=t("../GxAdParams"),d=t("../core/GxConstant"),l=t("../GxChecker"),u=cc._decorator,h=u.ccclass,p=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jkTitle=null,e.jkContent=null,e.jkCompany=null,e.jkSoftCode=null,e.ageSp=null,e.gameSceneName="GameScene",e.canJumpToNext=!1,e}return i(e,t),e.prototype.onLoad=function(){var t=this;l.default.getInstance().init();var e=cc.winSize;e.width>e.height?(this.node.getComponent(cc.Canvas).designResolution=cc.size(1280,720),this.node.getComponent(cc.Canvas).fitHeight=!0,this.node.getComponent(cc.Canvas).fitHeight=!0):(this.node.getComponent(cc.Canvas).designResolution=cc.size(720,1280),this.node.getComponent(cc.Canvas).fitWidth=!0,this.node.getComponent(cc.Canvas).fitHeight=!1),this.canJumpToNext=!0,this.jkTitle.node.active=!1,this.jkContent.node.active=!1,l.default.getInstance().check(l.default.MsgType.jkzg,{}),r.default.initPlatform(function(){r.default.initGame(function(){var e=r.default.getJkShowTime();if(e>=1){var n=r.default.getGameAge();n>0&&(s.default.loadSprite("gx/texture/icon"+n,function(e,n){e||(t.ageSp&&cc.isValid(t.ageSp)&&(t.ageSp.spriteFrame=n),r.default.ageSp=n)}),s.default.loadSprite("gx/texture/btn_yinsixieyi",function(t,e){t||(r.default.btnPrivacySp=e)}),s.default.loadSprite("gx/texture/btn_zhuomian",function(t,e){t||(r.default.btnAddDesktopSp=e)}),s.default.loadSprite("gx/texture/btn_QQShare",function(t,e){t||(r.default.btnQQShareSp=e)}),s.default.loadSprite("gx/texture/btn_TTBox",function(t,e){t||(r.default.btnTTBoxSp=e)})),c.AdParams.company&&c.AdParams.company.length>0?t.jkCompany.string="\u8457\u4f5c\u6743\u4eba\uff1a"+c.AdParams.company:(d.default.IS_OPPO_GAME||d.default.IS_QQ_GAME)&&(t.canJumpToNext=!1,t.jkCompany.string="\u9700\u8981\u8457\u4f5c\u6743\u4eba\uff1a"),c.AdParams.softCode&&c.AdParams.softCode.length>0?t.jkSoftCode.string="\u8f6f\u8457\u767b\u8bb0\u53f7\uff1a"+c.AdParams.softCode:(d.default.IS_OPPO_GAME||d.default.IS_QQ_GAME)&&(t.canJumpToNext=!1,t.jkCompany.string="\u8f6f\u8457\u767b\u8bb0\u53f7\uff1a"),t.jkTitle.node.active=!0,t.jkContent.node.active=!0}t.scheduleOnce(function(){l.default.getInstance().check(l.default.MsgType.showGamePrivacy),r.default.needShowAuthorize()?r.default.Ad().showAuthorize(function(){t.enterGame()},function(){}):t.enterGame()},e)})})},e.prototype.start=function(){},e.prototype.enterGame=function(){var t=this;setTimeout(function(){r.default.Ad().initAd()},1e3),r.default.Ad().getDeviceId&&r.default.Ad().getDeviceId(),this.canJumpToNext?d.default.IS_HUAWEI_GAME||d.default.IS_MI_GAME?r.default.Ad().login(function(){t.jumpScene()},function(){}):this.jumpScene():(d.default.IS_OPPO_GAME||d.default.IS_QQ_GAME)&&(console.log("\u662f\u4e0d\u662f\u6ca1\u6dfb\u52a0\u8f6f\u8457 \u4fe1\u606f"),console.log("\u662f\u4e0d\u662f\u6ca1\u6dfb\u52a0\u8f6f\u8457 \u4fe1\u606f"),console.log("\u662f\u4e0d\u662f\u6ca1\u6dfb\u52a0\u8f6f\u8457 \u4fe1\u606f"),console.log("\u662f\u4e0d\u662f\u6ca1\u6dfb\u52a0\u8f6f\u8457 \u4fe1\u606f"),console.log("\u662f\u4e0d\u662f\u6ca1\u6dfb\u52a0\u8f6f\u8457 \u4fe1\u606f"))},e.prototype.jumpScene=function(){cc.director.loadScene(this.gameSceneName)},a([p(cc.Label)],e.prototype,"jkTitle",void 0),a([p(cc.Label)],e.prototype,"jkContent",void 0),a([p(cc.Label)],e.prototype,"jkCompany",void 0),a([p(cc.Label)],e.prototype,"jkSoftCode",void 0),a([p(cc.Sprite)],e.prototype,"ageSp",void 0),a([p],e.prototype,"gameSceneName",void 0),a([h],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../GxAdParams":"GxAdParams","../GxChecker":"GxChecker","../GxGame":"GxGame","../core/GxConstant":"GxConstant","../util/ResUtil":"ResUtil"}],GxGameUtil:[function(t,e,n){"use strict";cc._RF.push(e,"5892bowHLlKdbadhX47Zp5+","GxGameUtil");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=t("../util/GxLog"),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._shamingzi="",e._retryTime=0,e.lw_z="",e.labels=null,e.isS=!1,e._retryTimeLw_zList=0,e.lw_zList=[],e.initggsucc=!1,e.initIsS=!1,e._baseUrl="https://res.sjzgxwl.com/label",e}return i(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initLabel=function(t){this._shamingzi=t+"",a.default.i("initLabel:"+t),this._shamingzi&&this._shamingzi.length>0?(this._gameLogin(),this._fetchLabel(),this._fetchLw_zList()):a.default.e("init label error is null")},e.prototype.gGB=function(t){if(console.log("gGB:::"+t),!t||!this.initggsucc||!this.initIsS)return!1;if(console.log("gGB2>>>>:::"+t),this.isS){var e=this.labels.special.length;if(e>0){for(var n=0,o=e;n<o;n++)if((r=this.labels.special[n]).switchname==t){var i=1==r.switchvalue;return console.log(t+"::"+i),i}return!1}return!1}var a=this.labels.common.length;if(a>0){for(n=0,o=a;n<o;n++){var r;if((r=this.labels.common[n]).switchname==t)return i=1==r.switchvalue,console.log(t+"::"+i),i}return!1}return!1},e.prototype.gGN=function(t,e){if(this.labels&&this.labels.hasOwnProperty("selfswitch")){for(var n=0;n<this.labels.selfswitch.length;n++){var o=this.labels.selfswitch[n];if(o.switchname==t){if(/(-?\d+)(\.\d+)?/.test(o.switchvalue)){var i=parseFloat(o.switchvalue);return isNaN(i)?o.switchvalue:i}if(/-?\d+/.test(o.switchvalue)){console.log("\u662f\u4e2a\u6574\u6570");var a=parseInt(o.switchvalue);return isNaN(a)?o.switchvalue:a}return o.switchvalue}}return e}return e},e.prototype._gameLogin=function(){console.log("init login ======label:");var t=this;this.httpGetsLogin("https://wx.sjzgxwl.com/commonlogin/",function(e){if(-2==e)console.error("init login \u5931\u8d25\u4e86 sjzgxwl ");else if(-1!=e)if(console.log(e),e&&-1!=e.indexOf("City")){console.log("\u89e3\u6790\u4e861");var n=JSON.parse(e).City;console.log(n),n=-1!=n.indexOf("\u7701")?n.substring(0,n.indexOf("\u7701")):-1!=n.indexOf("\u5e02")?n.substring(0,n.indexOf("\u5e02")):n.substring(0,2),console.log(n),t.lw_z=n,t._initIsS()}else e&&-1!=e.indexOf("Country")?(console.log("\u89e3\u6790\u4e862"),n=JSON.parse(e).Country,console.log(n),n=-1!=n.indexOf("\u7701")?n.substring(0,n.indexOf("\u7701")):-1!=n.indexOf("\u5e02")?n.substring(0,n.indexOf("\u5e02")):n.substring(0,2),console.log(n),t.lw_z=n,t._initIsS()):console.log("\u6ca1\u6709\u89e3\u6790\u4e86")}),console.log("label:getLw_z  End")},e.prototype._initIsS=function(){this.isS=!1;var t=0;if(this.lw_z&&this.initggsucc&&this.lw_zList){for(var e=0;e<this.lw_zList.length;e++)if(-1!=this.lw_zList[e].name.indexOf(this.lw_z)){t=this.lw_zList[e].id;break}if(this.labels.blocked){var n=this.labels.blocked.split(",");if(n)for(e=0;e<n.length;e++)if(t==n[e]){this.isS=!0;break}}}this.initIsS=!0,console.log("isS:"+this.isS)},e.prototype._fetchLabel=function(){console.log("start   _fetchLabel");var t=this;t._retryTime++,t._httpGets(this._baseUrl+"/"+this._shamingzi+".json?tt="+(new Date).getTime(),!1,function(e){if(-2==e)console.log("\u62c9\u53d6\u6807\u7b7e\u5931\u8d25\u4e86"),console.log("\u62c9\u53d6\u6807\u7b7e\u5931\u8d25\u4e86"),console.log("\u62c9\u53d6\u6807\u7b7e\u5931\u8d25\u4e86");else if(-1!=e){var n=JSON.parse(e);n&&1e3==n.code?(t.labels=n.data,t.initggsucc=!0,console.log("initLabel Success"),t._initIsS()):t.scheduleOnce(function(){t._fetchLabel()},t._retryTime)}else t.scheduleOnce(function(){t._fetchLabel()},1)})},e.prototype._fetchLw_zList=function(){console.log("get all List");var t=this,e=cc.sys.localStorage.getItem("labelConfig2");null!=e&&null!=e&&""!=e?(t.lw_zList=JSON.parse(e),console.log("_fetchLw_zList Success from local"),t._initIsS()):t._httpGets(this._baseUrl+"/config2.json",!1,function(e){if(t._retryTimeLw_zList++,e){var n=JSON.parse(e);1e3==n.code?(t.lw_zList=n.data,console.log("_fetchLw_zList Success"),cc.sys.localStorage.setItem("labelConfig2",JSON.stringify(t.lw_zList)),t._initIsS()):t.scheduleOnce(function(){t._fetchLw_zList()},t._retryTimeLw_zList)}else t.scheduleOnce(function(){t._fetchLw_zList()},t._retryTimeLw_zList)})},e.prototype.httpGetsLogin=function(t,e){console.log("label:httpGetsLogin 1111 ");var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState)if(console.log(n.status+"......."),n.status>=200&&n.status<=304){var t=n.responseText;e(t)}else e(-2)},n.open("GET",t,!0),cc.sys.isNative&&n.setRequestHeader("Accept-Encoding","gzip,deflate"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.timeout=4e3;var o=!1;n.ontimeout=function(){console.log("xmlhttprequest lw_z timeout"),o||(o=!0,e(-1))},n.onerror=function(t){console.log(t+"xmlhttprequest lw_z onerror"),o||(o=!0,e(-1))},n.send()},e.prototype._httpGets=function(t,e,n){if(console.log("label:HttpGets  "),window.ks){var o=!1;window.ks.request({url:t,timeout:3e3,dataType:"\u5176\u4ed6",success:function(t){if(console.log("\u5feb\u624b\u8bbf\u95ee\u8fd4\u56de\u7684\u72b6\u6001\u7801\uff1a"+t.statusCode),console.log("\u5feb\u624b\u8bbf\u95ee\u8fd4\u56de\u7684\u6570\u636e\uff1a"+JSON.parse(t.data)),t.statusCode>=200&&t.statusCode<=304){var e=t.data;n(e)}else n(-1)},fail:function(){o||(o=!0,n(-1))}})}else{var i=new XMLHttpRequest;i.onreadystatechange=function(){if(cc.log(" label lw_z XML_HTTP_REQUEST onreadystatechange "),4===i.readyState)if(console.log("httpGetsCode:"+i.status),i.status>=200&&i.status<=304){var t=i.responseText;n(t)}else n(-2)},i.open("GET",t,!0),cc.sys.isNative&&i.setRequestHeader("Accept-Encoding","gzip,deflate"),i.setRequestHeader("User-Agent","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36"),i.setRequestHeader("Accept","*/*"),i.setRequestHeader("Connection","keep-alive"),i.timeout=3e3;var a=!1;i.ontimeout=function(){console.log("xmlhttprequest timeout"),a||(a=!0,n(-1))},i.onerror=function(t){console.log(t+"xmlhttprequest onerror"),a||(a=!0,n(-1))},i.send()}},e.instance=null,e}(cc.Component);n.default=r,window.testDataToServer={isAdUser:!1,init:function(){console.log("init\u4e86"),window.qq?this.initQQ():window.tt?this.initTT():window.ks?this.initKS():window.wx?this.initWX():window.qg&&this.initQG()},initQQ:function(){try{if(qq.getLaunchOptionsSync){var t=qq.getLaunchOptionsSync();this.report({getLaunchOptionsSync:t,channel:"qq"})}}catch(e){}},initTT:function(){try{if(tt.getLaunchOptionsSync){var t=tt.getLaunchOptionsSync();this.report({getLaunchOptionsSync:t,channel:"tt"})}}catch(e){}},initWX:function(){try{if(wx.getLaunchOptionsSync){var t=wx.getLaunchOptionsSync();this.report({getLaunchOptionsSync:t,channel:"wx"})}}catch(e){}},initKS:function(){try{if(ks.getLaunchOptionsSync){var t=ks.getLaunchOptionsSync();this.report({getLaunchOptionsSync:t,channel:"ks"})}}catch(e){}},initQG:function(){try{var t={channel:"qg",systemInfo:{}};qg.getSystemInfoSync&&(t.systemInfo=qg.getSystemInfoSync());for(var e=["getNavigateOptionsSync","getEnterOptionsSync","getLaunchOptionsSync","getSystemInfoSync"],n=0;n<e.length;n++){var o=e[n];if(t[o]={},qg[o]){var i=qg[o]();console.log(i),t[o]=i}else console.log("\u6ca1\u6709\uff1a"+o)}var a=this;qg.getManifestInfo?qg.getManifestInfo({success:function(e){t.manifest=e.manifest},fail:function(){},complete:function(){a.report(t)}}):this.report(t)}catch(r){}},report:function(t){try{var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&e.status>=200&&e.status<400){var t=e.responseText;console.log(t);var n=null;window.cc?n=cc.sys.localStorage:window.Laya&&(n=Laya.LocalStorage),"isAdUser"==t&&(testDataToServer.isAdUser=!0,n&&n.setItem("isAdUser","isAdUser")),n&&n.getItem("isAdUser")&&(testDataToServer.isAdUser=!0)}},e.open("POST","https://wx.sjzgxwl.com/commonloginInfo/",!0),e.setRequestHeader("content-type","application/json"),e.send(JSON.stringify(t))}catch(n){console.log(n)}}},window.testDataToServer.init(),cc._RF.pop()},{"../util/GxLog":"GxLog"}],GxGame:[function(t,e,n){"use strict";cc._RF.push(e,"94a9cCjAGdF24s7md0c6p3U","GxGame");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=t("./core/base/BaseGxGame"),r=t("./core/GxConstant"),s=t("./util/DataStorage"),c=t("./GxAdParams"),d=t("./util/GxUtils"),l=t("./util/GxLog"),u=t("./util/ResUtil"),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.needShowAuthorize=function(){return!!(r.default.IS_OPPO_GAME||r.default.IS_VIVO_GAME||r.default.IS_HUAWEI_GAME||r.default.IS_QQ_GAME||r.default.IS_MI_GAME)&&!s.default.getItem(r.default.KEY_PRIVACY_AGREE)},e.needShowAuthorizeBtn=function(){return!!(r.default.IS_OPPO_GAME||r.default.IS_VIVO_GAME||r.default.IS_HUAWEI_GAME||r.default.IS_QQ_GAME||r.default.IS_ANDROID_NATIVE||r.default.IS_ANDROID_H5||r.default.IS_MI_GAME)},e.needAddDesktopBtn=function(){return!!(r.default.IS_OPPO_GAME||r.default.IS_VIVO_GAME||r.default.IS_QQ_GAME)},e.needTTBoxBtn=function(){return!!r.default.IS_TT_GAME&&!!tt.checkScene},e.getJkShowTime=function(){if(r.default.IS_KS_GAME){var t=ks.getSystemInfoSync().host.env;return"kwaipro"==t||"snackvideo"==t||"kwaime"==t?.001:3}return r.default.IS_OPPO_GAME||r.default.IS_VIVO_GAME||r.default.IS_HUAWEI_GAME||r.default.IS_QQ_GAME||r.default.IS_MI_GAME||r.default.IS_ZFB_GAME?3:r.default.IS_TT_GAME?1:.001},e.getGameAge=function(){return r.default.IS_4399_H5_GAME||r.default.IS_WECHAT_GAME?-1:r.default.IS_ANDROID_NATIVE?parseInt(d.default.callMethod("getGameAge")):r.default.IS_ANDROID_H5?parseInt(this.Ad().getGameAge()):c.AdParams.age},e.showSubMsg=function(){if(r.default.IS_WECHAT_GAME||r.default.IS_QQ_GAME){var t=e.Ad().getSubIds();t&&t.length>0?e.Ad().waitSubIds.length>0?u.default.loadPrefab("gx/prefab/submsg",function(t,n){if(t)l.default.e("\u52a0\u8f7d\u8ba2\u9605\u9884\u5236\u4f53\u5931\u8d25 \u65e0\u6cd5\u663e\u793a\u8ba2\u9605");else{var o=cc.instantiate(n);e.uiGroup&&(o.group=e.uiGroup),o.getComponent("Gx_submsg").show()}}):l.default.w("\u672a\u8ba2\u9605id\u4e3a\u7a7a \u5df2\u7ecf\u5168\u90e8\u8ba2\u9605 \u4e0d\u663e\u793a\u8ba2\u9605"):l.default.w("\u8ba2\u9605id\u4e3a\u7a7a\u6216\u8005\u6ca1\u6709\u914d\u7f6e \u4e0d\u663e\u793a\u8ba2\u9605")}else l.default.w("\u975eqq \u5fae\u4fe1\u4e0d\u663e\u793a\u8ba2\u9605")},e.showShareFriend=function(t){r.default.IS_WECHAT_GAME||r.default.IS_QQ_GAME?u.default.loadPrefab("gx/prefab/shareFriend",function(n,o){if(n)l.default.e("\u52a0\u8f7d\u5206\u4eab\u9884\u5236\u4f53\u5931\u8d25 \u65e0\u6cd5\u663e\u793a\u5206\u4eab");else{var i=cc.instantiate(o);e.uiGroup&&(i.group=e.uiGroup);var a=i.getComponent("Gx_shareFriend");a.show(),a.setShareCallback(t)}}):l.default.w("\u975eqq \u5fae\u4fe1\u4e0d\u663e\u793a\u5206\u4eab")},e.clickBtn=function(t,n){e.gameEvent(t),n&&n()},e.canShowUser=!1,e.LogoSp=null,e.canshowTTBoxBtn=!0,e}(a.default);n.default=h,cc._RF.pop()},{"./GxAdParams":"GxAdParams","./core/GxConstant":"GxConstant","./core/base/BaseGxGame":"BaseGxGame","./util/DataStorage":"DataStorage","./util/GxLog":"GxLog","./util/GxUtils":"GxUtils","./util/ResUtil":"ResUtil"}],GxImgMgr:[function(t,e,n){"use strict";cc._RF.push(e,"cf4d0w9xEtAgI8RPg0t4amb","GxImgMgr");var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,a){function r(t){try{c(o.next(t))}catch(e){a(e)}}function s(t){try{c(o.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,s)}c((o=o.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(t){return function(e){return c([t,e])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(s){a=[6,s],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(){this.tryCount=0,this.maxTryCount=5,this.loadSuccess=!1,this.tryTimer=-1,this.gameListName="",this.gameConfig={},this.cachePool={}}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.init=function(t){return o(this,void 0,void 0,function(){var e,n;return i(this,function(o){switch(o.label){case 0:return null!=t&&"undefined"!=t&&t&&"\u5408\u96c6\u914d\u7f6e\u5199\u8fd9\u91cchejipeizhi"!=t?t&&t.length>0?(e=this,this.gameListName=t,(n=new XMLHttpRequest).onreadystatechange=function(){if(4==n.readyState)if(n.status>=200&&n.status<400){var o=n.responseText;console.log(o),e.gameConfig=JSON.parse(o),e.loadSuccess=!0,e.getImgByName("bgUrl",function(){}),e.getImgByName("lvUrl",function(){})}else console.error("\u83b7\u53d6\u6e38\u620f\u5217\u8868\u5931\u8d25\uff1a"+t+"::status:"+n.status),e.tryInit()},n.onerror=function(t){console.log(t),console.error("\u83b7\u53d6\u6e38\u620f\u5217\u8868error"),e.tryInit()},n.ontimeout=function(){console.error("\u83b7\u53d6\u6e38\u620f\u5217\u8868\u8d85\u65f6"),e.tryInit()},n.timeout=5e3,n.open("GET","https://res.sjzgxwl.com/heji2config/config/"+t+".json?t="+Math.floor((new Date).valueOf()/1e4),!0),n.send(),[4,this.waitinit()]):(console.error("\u6e38\u620f\u5217\u8868\u540d\u5b57\u7a7a"),console.error("\u6e38\u620f\u5217\u8868\u540d\u5b57\u7a7a"),console.error("\u6e38\u620f\u5217\u8868\u540d\u5b57\u7a7a"),console.error("\u6e38\u620f\u5217\u8868\u540d\u5b57\u7a7a"),[2]):(console.log("\u4e0d\u7528\u521d\u59cb\u5316"),[2]);case 1:return o.sent(),[2]}})})},t.prototype.waitinit=function(){return new Promise(function(t){setTimeout(function(){t(1)},1e3)})},t.prototype.tryInit=function(){var t=this;this.tryCount>=this.maxTryCount?console.log("\u5df2\u7ecf\u91cd\u8bd5\u6700\u591a\u6b21\u6570 \u53d6\u6d88\u91cd\u8bd5"):(this.tryCount++,this.loadSuccess?console.log("\u521d\u59cb\u5316\u6210\u529f \u4e0d\u7528\u91cd\u8bd5\u4e86"):(this.tryTimer>=0&&(clearTimeout(this.tryTimer),this.tryTimer=-1),this.tryTimer=setTimeout(function(){t.init(t.gameListName)},1e3)))},t.prototype.loadSp=function(t,e){var n=this;if(!t||!t.startsWith("http"))return console.warn("\u5730\u5740\u4e0d\u662fhttp\u5f00\u5934\u7684\u6216\u8005\u7a7a\uff1a"+t),e&&e(null);var o=t.replace(/\//g,"").replace(/:/g,"").replace(/\./g,"");if(this.cachePool.hasOwnProperty(o))return console.log("\u547d\u4e2d\u7f13\u5b58\u7684"),void(e&&e(this.cachePool[o]));cc.assetManager.loadRemote(t,cc.Texture2D,function(t,i){if(t)console.warn(t),e&&e(null);else if(i){var a=new cc.SpriteFrame(i);n.cachePool[o]=a,e&&e(a)}else e&&e(null)})},t.prototype.getImgByName=function(t,e){if(this.loadSuccess)if(this.gameConfig.config.hasOwnProperty(t)){var n=t.replace("Url",""),o=n.charAt(0).toUpperCase()+n.slice(1);if(console.log(o),1!=this.gameConfig.config["use"+o])return console.warn("\u56fe\u7247"+t+"\u6ca1\u5f00"),void(e&&e(null));var i=this.gameConfig.config[t];i?this.loadSp(i,e):(console.log(" \u56fe\u7247\u540d\u672a\u914d\u7f6e\uff1a"+t),e&&e(null))}else console.log("\u4e0d\u5b58\u5728\u56fe\u7247\u540d\uff1a"+t),e&&e(null);else console.warn("\u521d\u59cb\u5316\u6ca1\u6210\u529f"),e&&e(null)},t.prototype.getGameList=function(){return this.loadSuccess?this.gameConfig.config.list:[]},t.instance=null,t}();n.default=a,cc._RF.pop()},{}],GxLogo:[function(t,e,n){"use strict";cc._RF.push(e,"ce38bCJV05LDbyvbadEDN3X","GxLogo");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./GxGame"),s=cc._decorator,c=s.ccclass,d=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){if(window.useSelfLogo)console.warn("\u63a7\u5236\u4e0d\u8ba9sdk\u663e\u793alogo");else{console.log("\u8bbe\u7f6e\u4e86logo");var t=this.node.getComponent(cc.Sprite);t&&(t.spriteFrame=r.default.LogoSp)}},e.prototype.start=function(){},a([c],e)}(cc.Component));n.default=d,cc._RF.pop()},{"./GxGame":"GxGame"}],GxLog:[function(t,e,n){"use strict";cc._RF.push(e,"1d06b/XQ/JJbJWgf984BeBf","GxLog");var o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var a=arguments[e],r=0,s=a.length;r<s;r++,i++)o[i]=a[r];return o};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t.setTag=function(t){this.tag=t||"gx_game"},t.setDebug=function(t){this.debug=t||!0},t.i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.debug&&console.info.apply(console,o(["["+this.tag+"]"],t))},t.e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.debug&&console.error.apply(console,o(["["+this.tag+"]"],t))},t.l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.debug&&console.log.apply(console,o(["["+this.tag+"]"],t))},t.d=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.debug&&console.debug.apply(console,o(["["+this.tag+"]"],t))},t.w=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.debug&&console.warn.apply(console,o(["["+this.tag+"]"],t))},t.tag="gx_game",t.debug=!0,t}();n.default=i,cc._RF.pop()},{}],GxSDK:[function(t,e){"use strict";cc._RF.push(e,"982e2d2QiVFZKZ9rEeJNtH+","GxSDK"),window.GxSDK={_BASE_URL:"https://api.sjzgxwl.com",_responseConfig:{sessionId:"",clickid:"",ecpmConfig:{gameTime:10.3,targetEcpm:300,targetVideo:1}},_initComplete:!1,_heartInterval:5e3,_checkInterval:2e4,_config:{},init:function(t,e){var n=this;this._config=Object.assign({},t),window.TDAnalytics&&(TDAnalytics.init({appKey:t.appKey,serverUrl:"http://127.0.0.1:8091",autoTrack:{appShow:!0,appHide:!0}}),TDAnalytics.setSuperProperties({gxbi_app_name:t.appName,gxbi_app_version:t.version},!0),TDAnalytics.login(t.openId));var o={appKey:this._config.appKey,openId:this._config.openId,appId:this._config.appId,launchOptions:{}},i=this._config.BASE_URL+"/event_center/user/login";this._sendNetwork(i,o,"POST",function(t){if(console.log(JSON.stringify(t)),1!==t.code)return e(t);n.responseConfig=t.data},function(){return e(null)})},event:function(t,e){window.TDAnalytics&&TDAnalytics.track(t,e)},eventLevelStart:function(t,e){if(window.TDAnalytics){var n=Object.assign({gxbi_level_name:t},e);TDAnalytics.track("gxbi_level_start",n)}},eventLevelFail:function(t,e){if(window.TDAnalytics){var n=Object.assign({gxbi_level_name:t},e);TDAnalytics.track("gxbi_level_fail",n)}},eventLevelSuccess:function(t,e){if(window.TDAnalytics){var n=Object.assign({gxbi_level_name:t},e);TDAnalytics.track("gxbi_level_success",n)}},_sendNetwork:function(t,e,n,o,i){void 0===n&&(n="POST"),this._request({url:t,method:n,data:"string"==typeof e?e:JSON.stringify(e),header:{"content-type":"application/json"},success:function(t){console.log("successssss"),200===t.statusCode?o(t.data):i(t)},fail:function(t){console.warn(t),i(t)}})},_request:function(t){var e={statusCode:200,data:{},errMsg:""},n=new XMLHttpRequest;if(n.open(t.method,t.url),t.header)for(var o in t.header)n.setRequestHeader(o,t.header[o]);return n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){e.statusCode=200;try{var o=JSON.parse(n.responseText);e.data=o}catch(i){e.data=n.responseText}t.success(e)}else e.statusCode=n.status,e.errMsg="network error",t.fail(e)},n.ontimeout=function(){e.errMsg="timeout",t.fail(e)},n.send(t.data),n}},cc._RF.pop()},{}],GxTimer:[function(t,e,n){"use strict";var o;cc._RF.push(e,"e7476zaAqNC1biFhKJG68DP","GxTimer"),Object.defineProperty(n,"__esModule",{value:!0}),function(t){t[t.NO=0]="NO",t[t.START=1]="START",t[t.PAUSE=2]="PAUSE",t[t.RESUME=3]="RESUME",t[t.STOP=4]="STOP"}(o||(o={}));var i=function(){function t(){this._state=o.NO,this.timeoutHandler=null,this.remainTime=0,this.intervalTime=0,this.repeatCount=0,this.remainCount=0,this.callback=null,this.taskStartTime=0}return t.loop=function(e,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var i=new t;return i.run(e,n,o),i},t.once=function(e,n){void 0===n&&(n=0);var o=new t;return o.run(e,n,1),o},t.prototype.loop=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),this.run(t,e,n)},t.prototype.once=function(t,e){void 0===e&&(e=0),this.run(t,e,1)},t.prototype.run=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),e<0&&(e=0),n<0&&(n=0),this.intervalTime=e,this.remainTime=e,this.repeatCount=n,this.remainCount=n,this.callback=t,this.setTimeout()},t.prototype.setTimeout=function(t,e){var n=this;void 0===t&&(t=null),void 0===e&&(e=null),null==t&&(t=this.callback),null==e&&(e=this.intervalTime),this.timeoutHandler&&clearTimeout(this.timeoutHandler),this.timeoutHandler=null,this._state=o.START,this.taskStartTime=(new Date).getTime(),this.timeoutHandler=setTimeout(function(){t&&t(),(0==n.repeatCount||--n.remainCount>0)&&n.setTimeout()},e)},t.prototype.pause=function(){if(this._state!=o.START)return console.warn("Timer Not Start");this._state=o.PAUSE,this.remainTime=Math.max(this.intervalTime-(new Date).getTime()-this.taskStartTime,0),this.timeoutHandler&&clearTimeout(this.timeoutHandler),this.timeoutHandler=null},t.prototype.resume=function(){if(this._state!=o.PAUSE)return console.warn("Timer Not Pause");this.setTimeout(this.callback,this.remainTime)},t.prototype.stop=function(){return this._state==o.NO?console.warn("Timer Not Start"):this._state==o.STOP?console.warn("Timer Has Stop"):(this._state=o.STOP,this.timeoutHandler&&clearTimeout(this.timeoutHandler),this.timeoutHandler=null,this.remainTime=0,this.intervalTime=0,this.repeatCount=0,this.remainCount=0,this.callback=null,void(this.taskStartTime=0))},t.prototype.clear=function(){this._state=o.NO,this.timeoutHandler&&clearTimeout(this.timeoutHandler),this.timeoutHandler=null,this.remainTime=0,this.intervalTime=0,this.repeatCount=0,this.remainCount=0,this.callback=null,this.taskStartTime=0},Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t}();n.default=i,cc._RF.pop()},{}],GxUtils:[function(t,e,n){"use strict";cc._RF.push(e,"aaad4wumnlDEohBMBvmpmSA","GxUtils"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../core/GxConstant"),i=function(){function t(){}return t.randomInt=function(t,e){return Math.floor(this.random(t,e))},t.random=function(t,e){return t=Number(t),e=Number(e),NaN==t||NaN==e?null:(t>e&&(t=(e^=t^=e)^t),Math.random()*(e-t+1)+t)},t.loadRemoteRes=function(t){return new Promise(function(e,n){cc.loader.load(t,function(t,o){if(t)return n(t);e(o)})})},t.loadRes=function(t,e){return new Promise(function(n,o){cc.js.isChildClassOf(e,cc.Asset)?cc.loader.loadRes(t,e,function(t,e){if(t)return o(t);n(e)}):cc.loader.loadRes(t,function(t,e){if(t)return o(t);n(e)})})},t.loadResDir=function(t,e){return new Promise(function(n,o){cc.loader.loadResDir(t,e,function(e,i){if(e)return console.error("\u52a0\u8f7d\u5931\u8d25\uff1a"+t),o(e);n(i)})})},t.getRes=function(t,e){return cc.resources?cc.resources.get(t,e):cc.loader.getRes(t,e)},t.formatTime=function(t){var e=t%60;return("0"+Math.floor(t/60)).slice(-2)+":"+("0"+e).slice(-2)},t.getNetworkTime=function(){return new Promise(function(t){var e=new XMLHttpRequest;e.open("get","/"),e.send(null),e.onreadystatechange=function(){if(2===e.readyState){var n=e.getResponseHeader("Date");t(n),e.abort()}}})},t.getDay=function(t){var e=new Date(t),n=e.getFullYear(),o=e.getMonth()+1,i=e.getDate();return Number(n+("0"+o).slice(-2)+("0"+i).slice(-2))},t.degreesToVectors=function(t){var e=cc.misc.degreesToRadians(t);return cc.v2(0,1).rotate(-e)},t.vectorsToDegress=function(t){if(t.equals(cc.Vec2.ZERO))return 0;var e=cc.v2(0,1),n=t.signAngle(e);return cc.misc.radiansToDegrees(n)},t.clone=function(e){var n=null;if(e instanceof Array)n=e.concat();else if(e instanceof Function)n=e;else for(var o in n=new Object,e){var i=e[o];n[o]="object"==typeof i?t.clone(i):i}return n},t.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];cc.director.getScene()&&cc.director.getScene().emit(t,e[0],e[1],e[2],e[3],e[4])},t.once=function(t,e,n){cc.director.getScene()&&cc.director.getScene().once(t,e,n)},t.on=function(t,e,n){cc.director.getScene()&&cc.director.getScene().on(t,e,n)},t.off=function(t,e,n){cc.director.getScene()&&cc.director.getScene().off(t,e,n)},t.targetOff=function(t){cc.director.getScene()&&cc.director.getScene().targetOff(t)},t.newPrefab=function(t,e,n){var o=this;t="prefab/"+t;var i=function(){var i=cc.instantiate(o.getRes(t,cc.Prefab));cc.isValid(e,!0)&&(i.parent=e),n&&n(i)};this.getRes(t,cc.Prefab)?i():this.loadRes(t,cc.Prefab).then(function(){i()})},t.isNumber=function(t){return"number"==typeof t||"string"==typeof t&&(""!=(t=t.replace(/\s+/g,""))&&(!isNaN(t)&&/^\d+(\.\d+)?$/.test(t)))},t.findNode=function(t,e){if(!t||void 0===t||"string"!=typeof t)return e&&void 0!==e&&e instanceof cc.Node?e:null;e&&void 0!==e&&e instanceof cc.Node||(e=cc.director.getScene());for(var n=null,o=0,i=t.split("/");o<i.length;o++){var a=i[o];if(!(n=e.getChildByName(a)))return null;e=n}return n},t.callMethod=function(t,e,n){void 0===e&&(e=null);var i=null,a=t.substring(0,1).toUpperCase()+t.substring(1);if(n&&void 0!==n&&(window["onGx"+a]=n),null!=e&&"string"!=typeof e&&(e=JSON.stringify(e)),o.default.IS_ANDROID_NATIVE){var r="("+(null==e?"":"Ljava/lang/String;")+")Ljava/lang/String;";console.log("[gx_game]callMethod method = "+t+" signature = "+r+" params = "+e),i=null==e||void 0===e?jsb.reflection.callStaticMethod("com/gxgame/helper/GxBridge",t,"()Ljava/lang/String;"):jsb.reflection.callStaticMethod("com/gxgame/helper/GxBridge",t,"(Ljava/lang/String;)Ljava/lang/String;",e)}else o.default.IS_ANDROID_H5?i=window.H5Bridge[t]():o.default.IS_IOS_NATIVE&&(r="",console.log("[gx_game]callMethod method = "+t+" signature = "+r+" params = "+e),i=null==e||void 0===e?jsb.reflection.callStaticMethod("GxBridge",t+":",""):jsb.reflection.callStaticMethod("GxBridge",t+":",e));return i},t.callMethodLabel=function(t,e){var n=null,i="getLabel".substring(0,1).toUpperCase()+"getLabel".substring(1);return o.default.IS_ANDROID_NATIVE?(e&&void 0!==e&&(window["onGx"+i]=e),n=jsb.reflection.callStaticMethod("com/gxgame/helper/GxBridge","getLabel","(Ljava/lang/String;)Z",t)):o.default.IS_ANDROID_H5?n=window.H5Bridge.getLabel(t):o.default.IS_IOS_NATIVE&&(n=jsb.reflection.callStaticMethod("GxBridge","getLabel:",t)),n},t.callMethodLabelValue=function(t,e,n){void 0===e&&(e=-1);var i=null,a="getValue".substring(0,1).toUpperCase()+"getValue".substring(1);return o.default.IS_ANDROID_NATIVE?(n&&void 0!==n&&(window["onGx"+a]=n),i=jsb.reflection.callStaticMethod("com/gxgame/helper/GxBridge","getValue","(Ljava/lang/String;I)I",t,e)):o.default.IS_ANDROID_H5?i=window.H5Bridge.getValue(t,e):o.default.IS_IOS_NATIVE&&(i=jsb.reflection.callStaticMethod("GxBridge","getValue:defaultValue:",t,e)),i},t.getNativePlatform=function(){return this.callMethod("getNativePlatform")},t.executePreFrame=function(t,e,n){return void 0===n&&(n=1),new Promise(function(o){var i=e,a=function(){for(var e=cc.sys.now(),r=i.next();;r=i.next()){if(null==r||r.done)return void o(null);if(cc.sys.now()-e>n)return void t.scheduleOnce(function(){a()})}};a()})},t}();n.default=i,cc._RF.pop()},{"../core/GxConstant":"GxConstant"}],Gx_GameOverAD:[function(t,e,n){"use strict";cc._RF.push(e,"4a3d9N/nilFCqO54Z7CYFB4","Gx_GameOverAD");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GxGame"),s=cc._decorator,c=s.ccclass,d=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.show=function(t,e,n){this.onShow=t,this.onClose=e,this.onGet=n,this.onShow&&this.onShow(),cc.director.getScene().addChild(this.node)},e.prototype.onDestroy=function(){this.onClose&&this.onClose()},e.prototype.onCallBack=function(t,e){switch(e){case"\u70b9\u51fb":r.default.Ad().showVideo(function(){},"GxGameOverAd"),this.node.destroy()}},a([c],e)}(cc.Component));n.default=d,cc._RF.pop()},{"../GxGame":"GxGame"}],Gx_TTReward:[function(t,e,n){"use strict";cc._RF.push(e,"920d1fL939ImICbV9HWOo3n","Gx_TTReward");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GxGame"),s=cc._decorator,c=s.ccclass,d=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.getReward=null,e.gotoBtn=null,e.stringlabel=null,e.haverewardtip=null,e.havettreward=!1,e.Reward=function(){},e}return i(e,t),e.prototype.onLoad=function(){var t=cc.sys.localStorage.getItem("TTRewardTime");if(null!=t&&""!=t&&null!=t){var e=parseInt(t),n=new Date;e==parseInt(""+n.getFullYear()+(n.getMonth()+1)+n.getDate())&&(this.havettreward=!0)}cc.winSize.width>cc.winSize.height?(this.curRootNode=this.node.getChildByName("land"),this.node.getChildByName("land").active=!0,this.node.getChildByName("main").active=!1):(this.curRootNode=this.node.getChildByName("main"),this.node.getChildByName("land").active=!1,this.node.getChildByName("main").active=!0),this.getReward=this.curRootNode.getChildByName("\u9886\u53d6\u5956\u52b1"),this.gotoBtn=this.curRootNode.getChildByName("\u53bb\u4fa7\u8fb9\u680f"),this.stringlabel=this.curRootNode.getChildByName("rewardlabel").getComponent(cc.Label),this.haverewardtip=this.curRootNode.getChildByName("havereward")},e.prototype.start=function(){this.haverewardtip.active=!1,this.havettreward?(this.getReward.getComponent(cc.Button).interactable=!1,this.getReward.active=!0,this.gotoBtn.active=!1,this.haverewardtip.active=!0):(r.default.Ad().canReward?(this.getReward.active=!0,this.gotoBtn.active=!1):(this.getReward.active=!1,this.gotoBtn.active=!0),tt.onShow(this.onShow.bind(this)))},e.prototype.onClickgotoBtn=function(){tt.navigateToScene({scene:"sidebar",success:function(){console.log("navigate to scene success")},fail:function(t){console.log("navigate to scene fail: ",t)}})},e.prototype.onclickgetReward=function(){this.Reward(),this.havettreward=!0;var t=new Date,e=""+t.getFullYear()+(t.getMonth()+1)+t.getDate();cc.sys.localStorage.setItem("TTRewardTime",e),this.getReward.getComponent(cc.Button).interactable=!1,this.haverewardtip.active=!0},e.prototype.close=function(){this.node.destroy()},e.prototype.onShow=function(t){console.log("\u542f\u52a8\u573a\u666f\u5b57\u6bb5\uff1a",t.launch_from,", ",t.location),"homepage"!=t.launch_from&&"sidebar_card"!=t.location||(console.log("\u662f\u4ece\u4fa7\u8fb9\u680f\u542f\u52a8\u7684"),this.getReward.active=!0,this.gotoBtn.active=!1)},e.prototype.init=function(t,e,n){this.Reward=t;var o=this.curRootNode.getChildByName("icon").getComponent(cc.Sprite);o&&(o.spriteFrame=n)},e.prototype.onDestroy=function(){tt.offShow(this.onShow)},a([d(cc.Node)],e.prototype,"getReward",void 0),a([d(cc.Node)],e.prototype,"gotoBtn",void 0),a([d(cc.Label)],e.prototype,"stringlabel",void 0),a([d(cc.Node)],e.prototype,"haverewardtip",void 0),a([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../GxGame":"GxGame"}],Gx_add_icon:[function(t,e,n){"use strict";cc._RF.push(e,"482f4Hi9DZLTq88VhC5AsuA","Gx_add_icon");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GxGame"),s=cc._decorator,c=s.ccclass,d=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnAddIcon=null,e.btnWatchAd=null,e.innerNative=null,e.onSucc=null,e.onHide=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this.node.zIndex=1e4},e.prototype.show=function(t,e){null==this.node.parent&&cc.director.getScene().addChild(this.node),this.onSucc=e,this.onHide=t},e.prototype.tapAddIcon=function(){var t=this;r.default.Ad().addDesktop(function(){t.btnAddIcon&&(t.btnAddIcon.active=!1),t.onSucc&&t.onSucc()})},e.prototype.tapClose=function(){this.node.destroy()},e.prototype.onDestroy=function(){this.onHide&&this.onHide()},e.prototype.onEnable=function(){var t=this;this.btnWatchAd.active=!1,r.default.Ad().showInterstitialNative(this.innerNative,function(){},function(){t.btnWatchAd.active=!0},function(){t.btnWatchAd.active=!1,r.default.Ad().showBanner(function(){},function(){})})},e.prototype.tapWatchAd=function(){r.default.Ad().clickNativeInnerInterstitial()},a([d(cc.Node)],e.prototype,"btnAddIcon",void 0),a([d(cc.Node)],e.prototype,"btnWatchAd",void 0),a([d(cc.Node)],e.prototype,"innerNative",void 0),a([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../GxGame":"GxGame"}],Gx_authorize:[function(t,e,n){"use strict";cc._RF.push(e,"9c6464yOK1J8IGdSRRKnDq3","Gx_authorize");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../util/DataStorage"),s=t("../core/GxConstant"),c=t("../GxGame"),d=cc._decorator,l=d.ccclass,u=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onAgree=null,e.onRefuse=null,e.userNode=null,e.andTextNode=null,e.privacyNode=null,e.erCiNode=null,e.refuseBtn=null,e.agreeBtn=null,e.closeBtn=null,e.tipsLabel=null,e}return i(e,t),e.prototype.show=function(t,e){this.node.parent||(this.onAgree=t,this.onRefuse=e,cc.director.getScene().addChild(this.node),this.on_show())},e.prototype.start=function(){c.default.canShowUser||(this.andTextNode.active=!1,this.userNode.active=!1,this.privacyNode.x=this.userNode.x),r.default.getItem(s.default.KEY_PRIVACY_AGREE)?(this.closeBtn.active=!0,this.refuseBtn.active=!1,this.agreeBtn.active=!1,this.tipsLabel.string="\u60a8\u5df2\u540c\u610f\u4e0a\u8ff0\u534f\u8bae\u548c\u653f\u7b56\u4e2d\u7684\u5168\u90e8\u5185\u5bb9\u3002"):(this.closeBtn.active=!1,this.refuseBtn.active=!0,this.agreeBtn.active=!0),this.node.zIndex=cc.macro.MAX_ZINDEX},e.prototype.on_show=function(){},e.prototype.show_privacy=function(t,e){c.default.Ad().showPrivacy(e)},e.prototype.on_agree=function(){r.default.setItem(s.default.KEY_PRIVACY_AGREE,"true"),this.onAgree&&this.onAgree(),this.node.destroy()},e.prototype.on_refuse=function(t,e){1!=(e=parseInt(e))?(c.default.canPlayWithRefuse?this.onAgree&&this.onAgree():(this.onRefuse&&this.onRefuse(),null!=window.qg?window.qg.exitApplication({}):null!=window.qq?window.qq.exitMiniProgram({}):console.warn("\u4e0d\u9000\u51fa")),this.node.destroy()):this.erCiNode.active=!0},a([u(cc.Node)],e.prototype,"userNode",void 0),a([u(cc.Node)],e.prototype,"andTextNode",void 0),a([u(cc.Node)],e.prototype,"privacyNode",void 0),a([u(cc.Node)],e.prototype,"erCiNode",void 0),a([u(cc.Node)],e.prototype,"refuseBtn",void 0),a([u(cc.Node)],e.prototype,"agreeBtn",void 0),a([u(cc.Node)],e.prototype,"closeBtn",void 0),a([u(cc.Label)],e.prototype,"tipsLabel",void 0),a([l],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../GxGame":"GxGame","../core/GxConstant":"GxConstant","../util/DataStorage":"DataStorage"}],Gx_crazypoint:[function(t,e,n){"use strict";cc._RF.push(e,"91aa7v0RZBCYpXBmVi9Ezz7","Gx_crazypoint");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GxGame"),s=cc._decorator,c=s.ccclass,d=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressNode=null,e.img_xiangPiCa=null,e.btnNode=null,e.boxNode=null,e.title=null,e.title2=null,e.time=0,e.num=0,e.boo=!1,e.videoShowed=!1,e.isBanner=!1,e.listening=!1,e.showVideoTime=0,e}return i(e,t),e.prototype.onLoad=function(){var t=cc.winSize;t.width>t.height&&(this.btnNode.setPosition(cc.v2(400,0)),this.boxNode.setPosition(cc.v2(-310.119,-52)),this.title.setPosition(cc.v2(0,245)),this.title2.setPosition(cc.v2(570,-90))),this.btnNode.opacity=255,this.boxNode.opacity=255,this.boo=!1,this.time=0,this.num=0},e.prototype.start=function(){r.default.Ad().hideBanner()},e.prototype.show=function(t,e,n,o){void 0===o&&(o=!1),this.onShow=t,this.onClose=e,this.onGet=n,this.isBanner=o,this.onShow&&this.onShow(),r.default.Ad().hideBanner()},e.prototype.gameHide=function(){cc.log("\u6e38\u620f\u8fdb\u5165\u540e\u53f0")},e.prototype.gameShow=function(){cc.log("\u91cd\u65b0\u8fd4\u56de\u6e38\u620f"),cc.director.emit("dest")},e.prototype.onDest=function(){this&&this.isValid&&this.node&&this.node.isValid&&this.node.destroy()},e.prototype.onDestroy=function(){cc.director.off("dest",this.onDest,this),cc.game.off(cc.game.EVENT_HIDE,this.gameHide,this),cc.game.off(cc.game.EVENT_SHOW,this.gameShow,this),this.onClose&&this.onClose(),r.default.Ad().hideBanner()},e.prototype.update=function(){this.boo||(this.time-=.3,this.time,this.time<=0&&(this.time=0)),this.progressNode.progress=this.time/100},e.prototype.get_time=function(){return window.cc?window.cc.sys.now():window.Laya?window.Laya.timer.currTimer:(new Date).getTime()},e.prototype.touchHandler=function(){var t=this;this.boo||(this.time<=0?this.time+=50:(this.time+=Math.floor(2*Math.random())+8,this.time>=100&&(this.time=100)),this.get_time()-this.showVideoTime<500?(this.num++,4!=this.num||this.videoShowed||(this.num=0,this.videoShowed=!0,this.listening||(this.listening=!0,cc.director.on("dest",this.onDest,this),cc.game.on(cc.game.EVENT_HIDE,this.gameHide,this),cc.game.on(cc.game.EVENT_SHOW,this.gameShow,this)),this.isBanner?(r.default.Ad().showBanner(function(){console.log("wudian banner\u663e\u793a\u6210\u529f")},function(){console.log("wudian banner\u663e\u793a\u5931\u8d25")}),setTimeout(function(){r.default.Ad().hideBanner(),t.videoShowed=!1},3e3)):(console.log("\u8c03\u7528 \u89c6\u9891\u4e86"),r.default.Ad().showVideo(function(e){t.onGet&&t.onGet(e),t&&t.isValid&&t.node&&t.node.isValid&&t.node.destroy()},"GxCrazyPoint")))):this.num=1,console.log(this.num,this.get_time()-this.showVideoTime),this.showVideoTime=this.get_time())},a([d(cc.ProgressBar)],e.prototype,"progressNode",void 0),a([d(cc.Node)],e.prototype,"img_xiangPiCa",void 0),a([d(cc.Node)],e.prototype,"btnNode",void 0),a([d(cc.Node)],e.prototype,"boxNode",void 0),a([d(cc.Node)],e.prototype,"title",void 0),a([d(cc.Node)],e.prototype,"title2",void 0),a([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../GxGame":"GxGame"}],Gx_gameBox:[function(t,e,n){"use strict";cc._RF.push(e,"d02a7aveOtNRawomIfkOdYj","Gx_gameBox");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GxGame"),s=t("../core/GxConstant"),c=t("../util/GxUtils"),d=t("../core/GxEnum"),l=cc._decorator,u=l.ccclass,h=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boxNode=null,e.zaiLaiSanGe=null,e.key=3,e.openBoxNum=0,e.openBoxArr=[],e.canClick=!1,e}return i(e,t),e.prototype.onLoad=function(){Math.random()<.5&&(this.key=2);var t=cc.winSize;t.width>t.height&&(console.log("\u6a2a\u5c4f"),this.node.scale=.8)},e.prototype.start=function(){this.initBox()},e.prototype.show=function(t,e,n){var o=this;this.onShow=t,this.onClose=e,this.onGet=n,this.onShow&&this.onShow(),this.scheduleOnce(function(){o.canClick=!0},1.5)},e.prototype.initBox=function(){for(var t=this.boxNode.getChildByName("content"),e=0;e<t.children.length;e++)t.children[e].children[0].active=!1,t.children[e].children[1].active=!1},e.prototype.onDestroy=function(){if(this.onClose&&this.onClose(),(s.default.IS_OPPO_GAME||s.default.IS_VIVO_GAME)&&r.default.gGB("z1")){var t=r.default.gGN("gb");Math.round(99*Math.random()+1)<t&&r.default.Ad().showVideo(function(){},"GxGameBoxClose")}},e.prototype.onCallBack=function(t,e){var n=this;if(this.canClick)switch(e){case"\u5b9d\u7bb1":this.openBox(t);break;case"\u7ee7\u7eed\u6e38\u620f":this.node.destroy();break;case"\u518d\u5f00\u4e09\u4e2a":r.default.Ad().showVideo(function(t){if(t){n.key+=3;for(var e=n.boxNode.getChildByName("content"),o=0;o<e.children.length;o++)e.children[o].children[1].active=!1;n.openBoxNum>=7&&(n.zaiLaiSanGe.active=!1)}},"GxGameBoxOpen3")}},e.prototype.openBox=function(t){var e=this,n=function(){e.openBoxNum++,1==e.openBoxNum&&(s.default.IS_QQ_GAME||s.default.IS_ANDROID_NATIVE&&c.default.getNativePlatform()==d.PLATFORM.G233&&r.default.Ad().showInterstitial(function(){},function(){}));var n=Math.floor(50*Math.random()+70);t.target.children[0].getChildByName("coin").getComponent(cc.Label).string=""+n,e.onGet&&e.onGet(n),t.target.children[0].active=!0,e.openBoxArr.push(t.target._localZOrder-1),e.key<=0&&e.showVideoIcon(),e.openBoxNum>=7&&(e.zaiLaiSanGe.active=!1)};this.key>0?(this.key--,n()):(console.log("\u8bf7\u770b\u89c6\u9891\u8865\u5145\u94a5\u5319"),r.default.Ad().showVideo(function(t){t&&n()},"GxGameBoxKey"))},e.prototype.showVideoIcon=function(){for(var t=this.boxNode.getChildByName("content"),e=0;e<t.children.length;e++){for(var n=!1,o=0;o<this.openBoxArr.length;o++){if(e==this.openBoxArr[o]){n=!1;break}n=!0}t.children[e].children[1].active=!!n}},a([h(cc.Node)],e.prototype,"boxNode",void 0),a([h(cc.Node)],e.prototype,"zaiLaiSanGe",void 0),a([u],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../GxGame":"GxGame","../core/GxConstant":"GxConstant","../core/GxEnum":"GxEnum","../util/GxUtils":"GxUtils"}],Gx_privacy:[function(t,e,n){"use strict";cc._RF.push(e,"b68ddJ2WkFEw6lammFeqI6/","Gx_privacy");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../core/GxEnum"),s=t("../util/ResUtil"),c=t("../GxGame"),d=t("../GxAdParams"),l=t("../core/GxConstant"),u=cc._decorator,h=u.ccclass,p=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.textArea=null,e.toggleContainer=null,e.userGroup=null,e.privacyGroup=null,e.loading=null,e.titleSp=null,e.titleSpUser=null,e.titleSpPrivacy=null,e.tabType=null,e.privacyCon=null,e}return i(e,t),e.prototype.show=function(t){void 0===t&&(t=r.privacy_type.user),this.node.parent||(this.tabType=t,c.default.canShowUser?this.toggleContainer.active=!0:this.toggleContainer.active=!1,cc.director.getScene().addChild(this.node),this.on_show())},e.prototype.hide=function(){this.node.destroy()},e.prototype.start=function(){var t=this;this.node.zIndex=cc.macro.MAX_ZINDEX,this.loading.active=!0,cc.tween(this.loading).repeatForever(cc.tween().to(1.5,{angle:-360}).to(.001,{angle:0})).start(),s.default.loadJsonAsset("gx/cfg/privacy",function(e,n){t.loading.active=!1,e||(t.privacyCon=n.json,t.change_tab(t.tabType))})},e.prototype.on_show=function(){this.set_frame_roi(),this.change_tab(this.tabType)},e.prototype.set_frame_roi=function(){cc.winSize.width<=cc.winSize.height?(this.bg.width=521,this.bg.height=717):(this.bg.width=717,this.bg.height=521)},e.prototype.on_change_tab=function(t,e){this.change_tab(e)},e.prototype.change_tab=function(t){if(c.default.canShowUser||(t="privacy"),this.tabType=t,"user"==t?(this.userGroup.getChildByName("checkmark").active=!0,this.privacyGroup.getChildByName("checkmark").active=!1,this.titleSp.spriteFrame=this.titleSpUser):"privacy"==t&&(this.userGroup.getChildByName("checkmark").active=!1,this.privacyGroup.getChildByName("checkmark").active=!0,this.titleSp.spriteFrame=this.titleSpPrivacy),this.privacyCon){var e=this.textArea.content.getComponent(cc.Label);if(this.privacyCon.hasOwnProperty(this.tabType)){var n;n=l.default.IS_MI_GAME&&"privacy"==this.tabType?this.privacyCon[this.tabType+"2"].replace(/companyName/g,d.AdParams.ysCompanyName).replace(/mail/g,d.AdParams.ysMail).replace(/gameName/g,d.AdParams.mi.gameName).replace(/address/g,d.AdParams.ysAddress.length>0?""+d.AdParams.ysAddress:""):this.privacyCon[this.tabType].replace(/companyName/g,d.AdParams.ysCompanyName).replace(/mail/g,d.AdParams.ysMail).replace(/gameName/g,d.AdParams.ysMail).replace(/address/g,d.AdParams.ysAddress.length>0?""+d.AdParams.ysAddress:""),e.string=n}else e.string="";this.textArea.scrollTo(cc.v2(0,1),0)}},e.prototype.onDisable=function(){},a([p(cc.Node)],e.prototype,"bg",void 0),a([p(cc.ScrollView)],e.prototype,"textArea",void 0),a([p(cc.Node)],e.prototype,"toggleContainer",void 0),a([p(cc.Node)],e.prototype,"userGroup",void 0),a([p(cc.Node)],e.prototype,"privacyGroup",void 0),a([p(cc.Node)],e.prototype,"loading",void 0),a([p(cc.Sprite)],e.prototype,"titleSp",void 0),a([p(cc.SpriteFrame)],e.prototype,"titleSpUser",void 0),a([p(cc.SpriteFrame)],e.prototype,"titleSpPrivacy",void 0),a([h],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../GxAdParams":"GxAdParams","../GxGame":"GxGame","../core/GxConstant":"GxConstant","../core/GxEnum":"GxEnum","../util/ResUtil":"ResUtil"}],Gx_shareFriend:[function(t,e,n){"use strict";cc._RF.push(e,"34b80UHcQhAYrhAn3BHJ47E","Gx_shareFriend");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GxGame"),s=t("../core/GxConstant"),c=t("../util/OpenDataUtil"),d=cc._decorator,l=d.ccclass,u=d.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.texture=new cc.Texture2D,e.shareCallback=null,e.shareSuccess=!1,e.sprite=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){var t=this;if(s.default.IS_QQ_GAME||s.default.IS_WECHAT_GAME){var e=this.getShareCanvas();e.width=this.sprite.node.width,e.height=this.sprite.node.height;var n={};n.width=this.sprite.node.getContentSize().width,n.height=this.sprite.node.getContentSize().height;var o=wx.getSystemInfoSync();console.log("phoneInfo:",o);var i=cc.winSize,a=o.screenWidth/i.width,d=o.screenHeight/i.height,l={x:(i.width/2-(this.sprite.node.width/2-this.sprite.node.x))*a,y:(i.height/2-this.sprite.node.height/2-this.sprite.node.y)*d};c.default._postMessage("InitContext",{bound:n,spacingY:5,scaleX:a,scaleY:d,startPos:l}),c.default.showShareFriend(),r.default.Ad().setOpenDataShareCallback(function(e){t.shareSuccess?console.log("\u5df2\u7ecf\u5206\u4eab\u6210\u529f\u8fc7\u4e86"):t.shareSuccess=e,e&&t.clickOnClose()})}else this.clickOnClose()},e.prototype.show=function(){cc.director.getScene().addChild(this.node),this.on_show()},e.prototype.on_show=function(){},e.prototype.setShareCallback=function(t){this.shareCallback=t},e.prototype.clickOnRefresh=function(){c.default.refreshShareFriend()},e.prototype.clickOnClose=function(){c.default.closeShareFriend(),this.node.destroy()},e.prototype.onDestroy=function(){console.log("\u9500\u6bc1 \u5206\u4eab\u7ed3\u679c\uff1a"+this.shareSuccess),this.shareCallback&&this.shareCallback(this.shareSuccess)},e.prototype.clickOnShare=function(){},e.prototype.update=function(){this.render()},e.prototype.render=function(){var t=this.getShareCanvas();this.texture.initWithElement(t),this.texture.handleLoadedTexture(),this.sprite.spriteFrame=new cc.SpriteFrame(this.texture)},e.prototype.getShareCanvas=function(){var t=wx.getOpenDataContext();if(t)return t.canvas},a([u(cc.Sprite)],e.prototype,"sprite",void 0),a([l],e)}(cc.Component);n.default=h,cc._RF.pop()},{"../GxGame":"GxGame","../core/GxConstant":"GxConstant","../util/OpenDataUtil":"OpenDataUtil"}],Gx_submsg:[function(t,e,n){"use strict";cc._RF.push(e,"6f4bbR7JI1GJoPX7ChRriIm","Gx_submsg");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../GxGame"),s=t("../util/GxLog"),c=t("../core/GxConstant"),d=cc._decorator,l=d.ccclass,u=(d.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this.canClose=!0,c.default.IS_QQ_GAME||c.default.IS_WECHAT_GAME||this.clickOnClose()},e.prototype.show=function(){cc.director.getScene().addChild(this.node),this.on_show()},e.prototype.on_show=function(){},e.prototype.clickOnClose=function(){this.node.destroy()},e.prototype.clickOnSub=function(){var t=this,e=r.default.Ad().waitSubIds;c.default.IS_QQ_GAME?qq.subscribeAppMsg({tmplIds:e,subscribe:!0,success:function(n){s.default.i("\u8c03\u7528\u8ba2\u9605\u8fd4\u56de\u7ed3\u679c"),s.default.i(n);for(var o=0;o<e.length;o++){var i=e[o];"accept"==n[i]?(r.default.Ad().submsg(i,function(){}),r.default.Ad().createToast("\u8ba2\u9605\u6210\u529f"),t.canClose&&(t.canClose=!1,t.clickOnClose())):(s.default.i(i+"\u8ba2\u9605\u5931\u8d25\uff1a"+n[i]),r.default.Ad().createToast("\u8ba2\u9605\u5931\u8d25"))}setTimeout(function(){r.default.Ad().initSubmsg()},1e3)},fail:function(t){console.log("----subscribeAppMsg----fail",t),s.default.e("\u8ba2\u9605\u5931\u8d25"),s.default.e(t),r.default.Ad().createToast("\u8ba2\u9605\u5931\u8d25")}}):c.default.IS_WECHAT_GAME?wx.requestSubscribeMessage({tmplIds:e,success:function(n){s.default.i("\u8c03\u7528\u8ba2\u9605\u8fd4\u56de\u7ed3\u679c"),s.default.i(n);for(var o=0;o<e.length;o++){var i=e[o];"accept"==n[i]?(r.default.Ad().submsg(i,function(){}),r.default.Ad().createToast("\u8ba2\u9605\u6210\u529f"),t.canClose&&(t.canClose=!1,t.clickOnClose())):(s.default.i(i+"\u8ba2\u9605\u5931\u8d25\uff1a"+n[i]),r.default.Ad().createToast("\u8ba2\u9605\u5931\u8d25"))}setTimeout(function(){r.default.Ad().initSubmsg()},1e3)},fail:function(t){console.log("----subscribeAppMsg----fail",t),s.default.e("\u8ba2\u9605\u5931\u8d25"),s.default.e(t),r.default.Ad().createToast("\u8ba2\u9605\u5931\u8d25")}}):this.clickOnClose()},a([l],e)}(cc.Component));n.default=u,cc._RF.pop()},{"../GxGame":"GxGame","../core/GxConstant":"GxConstant","../util/GxLog":"GxLog"}],Gx_toast:[function(t,e,n){"use strict";cc._RF.push(e,"b0d69wj/C9KP6AKylCwuRGM","Gx_toast");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,c=r.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.tips_box=null,e}return i(e,t),e.prototype.show=function(t){if(this.node&&!this.node.parent){var e=cc.macro.MAX_ZINDEX;this.node.parent=cc.director.getScene(),this.node.zIndex=e,this.on_show(t)}},e.prototype.on_hide=function(){},e.prototype.on_show=function(t){this.show_tips(t)},e.prototype.show_tips=function(t){var e=this;this.label.string=t,this.tips_tween=null,this.tips_tween=cc.moveBy(1.5,cc.v2(0,150)).easing(cc.easeSineIn());var n=cc.callFunc(function(){cc.isValid(e)&&e.hide()});this.tips_box.runAction(cc.sequence(this.tips_tween,n))},e.prototype.set_default_pos=function(){},e.prototype.set_style_pos=function(){},e.prototype.hide=function(){this.node&&this.node.parent&&(this.tips_box.y=0,this.node.parent.removeChild(this.node),this.on_hide())},a([c(cc.Label)],e.prototype,"label",void 0),a([c(cc.Node)],e.prototype,"tips_box",void 0),a([s],e)}(cc.Component);n.default=d,cc._RF.pop()},{}],H54399Adapter:[function(t,e,n){"use strict";cc._RF.push(e,"526eeIczitOepWAC6G0Ku1z","H54399Adapter");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=t("../../GxGame"),s=t("../../util/GxUtils"),c=t("../base/BaseAdapter");(function(t){t[t.ERROR=-1]="ERROR",t[t.SUCC=1]="SUCC",t[t.SHOW=2]="SHOW",t[t.CLOSE=3]="CLOSE"})(a||(a={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.closeInterTime=0,e.closeNativeTime=0,e.closeNormalBannerTime=0,e.showLimmitTime=0,e.showVideoTime=0,e}return i(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,this.isGameCd=r.default.adConfig.adCdTime>0,t.prototype.initAd.call(this),this.initBanner(),this.initNativeAd())},e.prototype.getNativePlatform=function(){return""},e.prototype.showNormalBanner=function(){},e.prototype.hideNormalBanner=function(){},e.prototype.destroyNormalBanner=function(){this.hideNormalBanner()},e.prototype.initBanner=function(){t.prototype.initBanner.call(this)},e.prototype.showBanner=function(){this.showNormalBanner()},e.prototype.hideBanner=function(){t.prototype.hideBanner.call(this),this.isNeedShowBanner=!1},e.prototype.showVideo=function(e,n){if(void 0===n&&(n=""),!(this.get_time()-this.showVideoTime<500)){this.showVideoTime=this.get_time(),t.prototype.showVideo.call(this,null,n);var o=this;window.h5api.playAd(function(t){console.log("\u4ee3\u7801:"+t.code),1e4===t.code?(cc.audioEngine.setEffectsVolume(0),cc.audioEngine.setMusicVolume(0),cc.director.pause(),console.log("\u5f00\u59cb\u64ad\u653e")):10001===t.code?(console.log("\u64ad\u653e\u7ed3\u675f"),cc.director.resume(),cc.audioEngine.setEffectsVolume(1),cc.audioEngine.setMusicVolume(1),e&&e(!0)):(cc.director.resume(),cc.audioEngine.setEffectsVolume(1),cc.audioEngine.setMusicVolume(1),console.log("\u5e7f\u544a\u5f02\u5e38"),window.h5api.canPlayAd(function(t){t.remain<=0||o.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")}),e&&e(!1))})}},e.prototype.destroyVideo=function(){},e.prototype.showInterstitial=function(){},e.prototype.destroyNormalInter=function(){},e.prototype.showInterVideo=function(){console.log("[gx_game]showInterVideo \u4e0d\u80fd\u7528")},e.prototype.destroyInterVideo=function(){},e.prototype.create_ad=function(t){var e=this;return new Promise(function(n){s.default.callMethod("createNativeAd",t.toString(),function(t){if(console.log("[gx_game]native data load succ:"+JSON.stringify(t)),t==a.ERROR);else try{e.add_native_data(t)}catch(n){console.error(n)}}),setTimeout(n,100)})},e.prototype.initNativeAd=function(){},e.prototype.showInterstitialNative=function(t,e,n,o){console.log("[gx_game]showInterstitialNative \u4e0d\u80fd\u7528"),o&&o()},e.prototype.hideInterstitialNative=function(){t.prototype.hideInterstitialNative.call(this)},e.prototype.showNativeInterstitial=function(t,e,n){void 0===n&&(n=1),this.showInterstitial(t,e)},e.prototype.supportGameBox=function(){return!1},e}(c.default);n.default=d,cc._RF.pop()},{"../../GxGame":"GxGame","../../util/GxUtils":"GxUtils","../base/BaseAdapter":"BaseAdapter"}],HwAdapter:[function(t,e,n){"use strict";cc._RF.push(e,"58e3ddPO6tNfImD+U/IT1pD","HwAdapter");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var a=arguments[e],r=0,s=a.length;r<s;r++,i++)o[i]=a[r];return o};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../audio/GxAudioUtil"),s=t("../../GxGame"),c=t("../../util/GxTimer"),d=t("../../util/GxUtils"),l=t("../base/BaseAdapter"),u=t("../../core/GxEnum"),h=t("../../GxAdParams"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.customBanner=null,e.customInter=null,e.portalAdTimer=null,e.videoShowing=!1,e.canShowBanner=!0,e.firstShowInter=!0,e.interCount=0,e}return i(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,s.default.adConfig.useNative=!0,t.prototype.initAd.call(this),cc.game.on(cc.game.EVENT_HIDE,function(){console.log("\u6e38\u620f\u8fdb\u5165\u540e\u53f0"),cc.director.emit("\u6e05\u9664\u539f\u751f")},this),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("\u91cd\u65b0\u8fd4\u56de\u6e38\u620f"),cc.director.emit("\u6e05\u9664\u539f\u751f")},this))},e.prototype.initNormalBanner=function(){var t=this;if(console.log("banner1"),!(h.AdParams.hw.banner.length<=0)){var e=qg.getSystemInfoSync(),n=(e.screenWidth,e.screenHeight);console.log("banner2"),this.destroyNormalBanner(),console.log("banner3"),this.bannerAd=qg.createBannerAd({adUnitId:h.AdParams.hw.banner,adIntervals:60,style:{top:n-57,left:0,height:57,width:360}}),console.log("banner4"),this.bannerAd.onError(function(e){console.error("[gx_game]normal banner error: ",JSON.stringify(e)),t.destroyNormalBanner()})}},e.prototype.showNormalBanner=function(){var t=this;this.logi("normal banner"),null==this.bannerAd&&this.initNormalBanner(),null!=this.bannerAd?(this.logi("banner show"),this.bannerAd.show().then(function(){t.logi(" normal banner show success")}).catch(function(e){t.logi(" normal banner show error",e)})):this.logi("banner null \u663e\u793a\u5931\u8d25")},e.prototype.hideNormalBanner=function(){this.bannerAd&&(this.bannerAd.hide(),this.bannerAd.destroy()),this.bannerAd=null},e.prototype.destroyNormalBanner=function(){this.bannerAd&&this.bannerAd.destroy()},e.prototype.initBanner=function(){t.prototype.initBanner.call(this)},e.prototype.showBanner=function(){var t=this;this.canShowBanner?(this.canShowBanner=!1,setTimeout(function(){t.canShowBanner=!0},3e4),this.hideBanner(),this.bannerDelayTimer=c.default.once(function(){t.logi("banner show");var e=t.getLocalNativeData(u.ad_native_type.banner);if(s.default.adConfig.bannerUpdateTime>0&&(t.logi("banner refresh"),null==t.bannerTimer&&(t.bannerTimer=new c.default),t.bannerTimer&&t.bannerTimer.once(function(){t.showBanner()},1e3*s.default.adConfig.bannerUpdateTime)),null==e||void 0===e)t.showNormalBanner();else{var n=cc.instantiate(d.default.getRes("gx/prefab/ad/native_banner",cc.Prefab));t.bannerNode=n.getComponent("gx_native_banner"),t.bannerNode.show(e,function(){},function(){t.bannerTimer&&t.bannerTimer.clear()})}},1e3)):this.logi("banner can't show")},e.prototype.hideBanner=function(){this.logi("hide banner"),t.prototype.hideBanner.call(this),this.hideNormalBanner(),this.destroyCustomBanner()},e.prototype.initVideo=function(){var t=this;null==h.AdParams.hw.video||h.AdParams.hw.video.length<=0||(this.destroyVideo(),this.videoAd=qg.createRewardedVideoAd({adUnitId:h.AdParams.hw.video}),this.videoAd.onLoad(function(){console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f"),t.videoAd.show().then(function(){r.default.setMusicVolume(0),r.default.setSoundVolume(0)}).catch(function(){t.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),t.videoShowing=!1,t.videocallback&&t.videocallback(!1)})}),this.videoAd.onError(function(){t.destroyVideo(),t.videoShowing=!1,t.videocallback&&t.videocallback(!1)}),this.videoAd.onClose(function(e){r.default.setMusicVolume(1),r.default.setSoundVolume(1),e&&e.isEnded?(console.log("\u6b63\u5e38\u64ad\u653e\u7ed3\u675f\uff0c\u53ef\u4ee5\u4e0b\u53d1\u6e38\u620f\u5956\u52b1"),t.videocallback&&t.videocallback(!0)):t.videocallback&&t.videocallback(!1),t.videoShowing=!1,t.destroyVideo()}),this.videoAd.load())},e.prototype.showVideo=function(e,n){var o=this;if(void 0===n&&(n=""),this.videoShowing)return this.logi("video showing"),void(e&&e(!1));t.prototype.showVideo.call(this,null,n),this.videoShowing=!0,setTimeout(function(){o.videoShowing=!1},500),this.videocallback=e,this.initVideo()},e.prototype.destroyVideo=function(){this.videoAd&&(this.videoAd.offLoad(),this.videoAd.offError(),this.videoAd.offClose()),this.videoAd=null},e.prototype.showInterstitial=function(t,e){var n=this;if(null==h.AdParams.hw.inter||h.AdParams.hw.inter.length<=0)return e&&e();this.destroyNormalInter(),this.logi("showInterstitial"),this.interAd=qg.createInterstitialAd({adUnitId:h.AdParams.hw.inter}),this.interAd.onLoad(function(){n.logi("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d"),n.hideBanner(),n.interShowTime=n.get_time(),n.interAd.show(),t&&t()}),this.interAd.onError(function(){n.logi("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25"),e&&e()}),this.interAd.onClose(function(){e&&e()}),this.interAd.load().then(function(){n.logi("showInterstitial show")}).catch(function(t){console.log("\u666e\u901a\u63d2\u5c4f\u5c55\u793a\u5931\u8d25"+JSON.stringify(t)),e&&e()})},e.prototype.destroyNormalInter=function(){this.interAd&&(this.interAd.offLoad(),this.interAd.offError()),this.interAd=null},e.prototype.create_ad=function(t){var e=this;return new Promise(function(n){var o="";if(t==u.ad_native_type.banner?o=h.AdParams.hw.native_banner:t==u.ad_native_type.inter1?o=h.AdParams.hw.native1:t==u.ad_native_type.inter2&&(o=h.AdParams.hw.native2),e.logi(t,"posId = ",o),""==o||void 0===o||null==o||e.is_limit_native_length(t))return e.logi("native null"),n(null);var i=qg.createNativeAd({adUnitId:o}),a=function(n){if(console.log("[gx_game]native data load:"),n&&n.adList){var o=n.adList.pop();o.ad=i,o.type=t,e.add_native_data(o),console.log("[gx_game]native data load succ:"+JSON.stringify(o)),i.offLoad(a)}};i.onLoad(a);var r=function(t){console.log("[gx_game]native data error: "+JSON.stringify(t),"color: red"),i.offError(r)};i.onError(r),i.load(),setTimeout(n,1500)})},e.prototype.initNativeAd=function(){var t=this;this.create_ad(u.ad_native_type.banner).then(function(){return t.create_ad(u.ad_native_type.native_icon)}).then(function(){return t.create_ad(u.ad_native_type.inter1)}).then(function(){return t.create_ad(u.ad_native_type.inter2)}).then(function(){t.loop_get_native_data()})},e.prototype.showInterstitialNative=function(t,e,n,o){var i=this;this.hideInterstitialNative();var a=this.getLocalNativeData(u.ad_native_type.inter1);if(null==a||void 0===a)o&&o();else{var r=cc.instantiate(d.default.getRes("gx/prefab/ad/native_inner_interstitial",cc.Prefab));this.innerInter=r.getComponent("gx_native_inner_interstitial"),this.innerInter&&this.innerInter.show(t,a,e,function(){i.hideBanner(),n&&n()},o)}this.hideInterstitialNative()},e.prototype.hideInterstitialNative=function(){t.prototype.hideInterstitialNative.call(this)},e.prototype.showNativeInterstitial=function(t,e,n){var o=this;void 0===n&&(n=1),this.firstShowInter,this.firstShowInter=!1,setTimeout(function(){if(o.logi("showNativeInterstitial:"+o.interCount),o.hideNativeInterstitial(),o.interCount%2==0)o.interCount++,o.showInterstitial(t,e);else{o.interCount++;var n=qg.createNativeAd({adUnitId:h.AdParams.hw.native1}),i=function(a){if(console.log("[gx_game]native data load:"),a&&a.adList){var r=a.adList.pop();r.ad=n,r.type=u.ad_native_type.inter1,o.add_native_data(r),console.log("[gx_game]native data load succ:"+JSON.stringify(r)),n.offLoad(i);var s=o.getLocalNativeData(u.ad_native_type.inter1);if(null==s||void 0===s)o.logi("native data null showInter"),o.showInterstitial(t,e);else{var c=cc.instantiate(d.default.getRes("gx/prefab/ad/native_interstitial",cc.Prefab));o.nativeInter=c.getComponent("gx_native_interstitial"),o.nativeInter&&o.nativeInter.show(s,function(){o.interShowTime=o.get_time(),o.logi("showNativeInterstitial show"),o.hideBanner(),t&&t()},e)}}else o.logi("native data null showInter"),o.showInterstitial(t,e)};n.onLoad(i);var a=function(i){console.log("[gx_game]native data error: "+JSON.stringify(i),"color: red"),n.offError(a),o.showInterstitial(t,e)};n.onError(a),n.load()}},s.default.isShenHe?0:1e3*n)},e.prototype.showOtherNativeInterstitial=function(t,e,n){void 0===n&&(n=0),s.default.gGB("z1")?this.showNativeInterstitial(t,e,n):(this.logi("\u6807\u7b7e\u6ca1\u5f00"),e&&e())},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this),this.destroyCustomInter()},e.prototype.showNativeIcon=function(t){this.hideNativeIcon();var e=u.ad_native_type.native_icon,n=h.AdParams.hw.native_icon;n==h.AdParams.hw.native1?e=u.ad_native_type.inter1:n==h.AdParams.hw.native2&&(e=u.ad_native_type.inter2);var o=this.getLocalNativeData(e);if(null==o||void 0===o)return console.log("[gx_game]showNativeIcon \u6682\u65e0\u5e7f\u544a\u6570\u636e");var i=cc.instantiate(d.default.getRes("gx/prefab/ad/native_icon",cc.Prefab));this.nativeIcon=i.getComponent("gx_native_icon"),this.nativeIcon&&this.nativeIcon.show(t,o)},e.prototype.hideNativeIcon=function(){t.prototype.hideNativeIcon.call(this)},e.prototype.loop_get_native_data=function(){var t=this._native_data_cache.length<5?1e3*d.default.randomInt(15,20):3e4;setTimeout(this.initNativeAd.bind(this),t)},e.prototype.initGamePortal=function(t,e,n,o,i){void 0===n&&(n=!0),void 0===o&&(o=""),void 0===i&&(i=300)},e.prototype.showGamePortal=function(t,e,n,o,i){void 0===n&&(n=!0),void 0===o&&(o=""),void 0===i&&(i=300),console.log("\u6682\u4e0d\u652f\u6301\u4e92\u63a8\u76d2\u5b50\u76f8\u5173 API")},e.prototype.hideGamePortal=function(){this.portalAd&&this.portalAd.hide(),this.portalAdTimer&&this.portalAdTimer.clear(),this.portalAdTimer=null},e.prototype.destroyGamePortal=function(){this.portalAd&&(this.portalAdTimer&&this.portalAdTimer.clear(),this.portalAdTimer=null,this.portalAd.destroy(),this.portalAd=null)},e.prototype.showAddDesktop=function(t,e){if(!this.addIconNode||void 0===this.addIconNode||!cc.isValid(this.addIconNode.node,!0)){var n=cc.instantiate(d.default.getRes("gx/prefab/add_icon",cc.Prefab));this.addIconNode=n.getComponent("Gx_add_icon"),this.addIconNode&&this.addIconNode.show(e)}},e.prototype.hasAddDesktop=function(t,e,n){console.log("\u4e0d\u652f\u6301\u6dfb\u52a0\u684c\u9762"),n&&n()},e.prototype.addDesktop=function(t,e){e&&e()},e.prototype.login=function(t,e){if(h.AdParams.hw.appId&&h.AdParams.hw.appId.length>0){var n=this;qg.gameLoginWithReal({forceLogin:1,appid:h.AdParams.hw.appId,success:function(e){console.log(" game login with real success:"+JSON.stringify(e)),t&&t(e)},fail:function(o,i){console.log("game login with real fail:"+o+", code:"+i),7004!=i&&2012!=i||console.log("\u73a9\u5bb6\u53d6\u6d88\u767b\u5f55\uff0c\u8fd4\u56de\u6e38\u620f\u754c\u9762\u8ba9\u73a9\u5bb6\u91cd\u65b0\u767b\u5f55\u3002"),7021==i&&(console.log("The player has canceled identity verification. Forbid the player from entering the game."),this.createToast("\u767b\u5f55\u5931\u8d25\uff1a"+i));var a=new cc.Node;a.addComponent(cc.Label).string="\u91cd\u65b0\u767b\u5f55",a.on(cc.Node.EventType.TOUCH_START,function(){a.removeFromParent(!0),console.log("\u70b9\u51fb\u767b\u5f55\u4e86"),n.login(t,e)},this),a.parent=cc.find("Canvas"),a.zIndex=cc.macro.MAX_ZINDEX,a.y=-240,e&&e(i),qg.showModal({title:"\u63d0\u793a",content:"\u8bf7\u767b\u5f55\u540e\u4f7f\u7528",confirmText:"\u767b\u5f55",cancelText:"\u9000\u51fa\u6e38\u620f",success:function(o){o.confirm?(console.log("\u7528\u6237\u70b9\u51fb\u786e\u5b9a"),a.removeFromParent(!0),n.login(t,e)):o.cancel&&(console.log("\u7528\u6237\u70b9\u51fb\u53d6\u6d88"),qg.exitApplication({success:function(){console.log("exitApplication success")},fail:function(){console.log("exitApplication fail")},complete:function(){console.log("exitApplication complete")}}))}})}})}else this.logi("appId \u7a7a"),e&&e("appId \u7a7a")},e.prototype.showCustomBanner=function(){var t=this,e=h.AdParams.hw.custom_banner;if(null==e||void 0===e||!qg.createCustomAd)return this.showNormalBanner();this.destroyCustomBanner(),this.customBanner=qg.createCustomAd({adUnitId:e,style:{}}),this.customBanner.show().then(function(){}).catch(function(e){console.error("[gx_game] custom banner show error: "+JSON.stringify(e)),t.destroyCustomBanner(),t.showNormalBanner()});var n=function(){t.customBanner.offClose(n),t.destroyCustomBanner()};this.customBanner.onClose(n)},e.prototype.destroyCustomBanner=function(){this.customBanner&&this.customBanner.destroy(),this.customBanner=null},e.prototype.showCustomInter=function(t,e){var n=this;if(qg.createCustomAd){var o=h.AdParams.hw.native1;if(null==o||void 0===o)return this.showInterstitial(t,e),e&&e();this.destroyCustomInter(),this.customInter=qg.createCustomAd({adUnitId:o,style:{top:(s.default.screenHeight-630)/2,left:0}}),this.customInter.show().then(function(){n.logi("customInter show"),n.hideBanner(),t&&t()});var i=function(){e&&e(),n.customInter.offClose(i),n.destroyCustomInter()};this.customInter.onClose(i);var a=function(o){console.error("[gx_game] custom inter error: "+JSON.stringify(o)),n.customInter.offError(a),n.destroyCustomInter(),n.showInterstitial(t,e)};this.customInter.onError(a)}else e&&e()},e.prototype.destroyCustomInter=function(){this.customInter&&this.customInter.destroy(),this.customInter=null},e.prototype.logi=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.LOG.apply(this,a(["[HwAdapter]"],e))},e.prototype.loge=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.LOGE.apply(this,a(["[HwAdapter]"],e))},e}(l.default);n.default=p,cc._RF.pop()},{"../../GxAdParams":"GxAdParams","../../GxGame":"GxGame","../../audio/GxAudioUtil":"GxAudioUtil","../../core/GxEnum":"GxEnum","../../util/GxTimer":"GxTimer","../../util/GxUtils":"GxUtils","../base/BaseAdapter":"BaseAdapter"}],IosAdapter:[function(t,e,n){"use strict";cc._RF.push(e,"94f595kZb9Jsa66nDZ9TivA","IosAdapter");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,r=t("../..//audio/GxAudioUtil"),s=t("../../GxGame"),c=t("../../util/GxTimer"),d=t("../../util/GxUtils"),l=t("../base/BaseAdapter"),u=t("../../core/GxEnum");(function(t){t[t.ERROR=-1]="ERROR",t[t.SUCC=1]="SUCC",t[t.SHOW=2]="SHOW",t[t.CLOSE=3]="CLOSE"})(a||(a={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.closeInterTime=0,e.closeNativeTime=0,e.closeNormalBannerTime=0,e.showLimmitTime=0,e.showVideoTime=0,e}return i(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,this.isGameCd=s.default.adConfig.adCdTime>0,t.prototype.initAd.call(this),this._gameCd(),this.initBanner(),this.initNativeAd())},e.prototype._gameCd=function(){var t=this;(new c.default).once(function(){t.isGameCd=!1,t.isNeedShowBanner&&t.showBanner()},1e3*s.default.adConfig.adCdTime)},e.prototype.getNativePlatform=function(){return d.default.callMethod("getNativePlatform")},e.prototype.showNormalBanner=function(){var t=this;d.default.callMethod("showBanner",null,function(e){e==a.SHOW?t.bannerTimer&&t.bannerTimer.stop():t.closeNormalBannerTime=t.get_time()})},e.prototype.hideNormalBanner=function(){d.default.callMethod("hideBanner")},e.prototype.destroyNormalBanner=function(){this.hideNormalBanner()},e.prototype.initBanner=function(){t.prototype.initBanner.call(this)},e.prototype.showBanner=function(){this.showNormalBanner()},e.prototype.hideBanner=function(){t.prototype.hideBanner.call(this),this.isNeedShowBanner=!1,this.hideNormalBanner()},e.prototype.showVideo=function(e,n){var o=this;void 0===n&&(n=""),this.get_time()-this.showVideoTime<500||(this.showVideoTime=this.get_time(),t.prototype.showVideo.call(this,null,n),d.default.callMethod("showVideo",null,function(t){t==a.ERROR&&o.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),n&&n.length>0&&(t==a.SUCC?o._videoCompleteEvent():t==a.ERROR?o._videoErrorEvent():o._videoCloseEvent()),setTimeout(function(){e&&e(t==a.SUCC)},500)}))},e.prototype.destroyVideo=function(){d.default.callMethod("destroyVideo")},e.prototype.showInterstitial=function(t,e){var n=this;d.default.callMethod("showInter",null,function(o){console.log("[gx_game] showInter ret = ",o),o==a.SHOW?(n.hideBanner(),t&&t()):(o==a.CLOSE&&(n.closeInterTime=n.get_time()),n.isNeedShowBanner=!0,e&&e())})},e.prototype.showOtherInterstitial=function(t,e){var n=this;d.default.callMethod("showOtherInter",null,function(o){console.log("[gx_game] showInter ret = ",o),o==a.SHOW?(n.hideBanner(),t&&t()):(o==a.CLOSE&&(n.closeInterTime=n.get_time()),n.isNeedShowBanner=!0,e&&e())})},e.prototype.destroyNormalInter=function(){d.default.callMethod("destroyInter")},e.prototype.showInterVideo=function(t,e){var n=this;console.log("[gx_game]showInterVideo \u4e0d\u80fd\u7528"),d.default.callMethod("showFullScreen",null,function(o){console.log("[gx_game] 233 showFullScreen ret = ",o),o==a.SHOW?(n.hideBanner(),t&&t()):(o==a.CLOSE&&(n.closeInterTime=n.get_time()),n.isNeedShowBanner=!0,e&&e())})},e.prototype.showOtherInterVideo=function(t,e){var n=this;console.log("[gx_game]showInterVideo \u4e0d\u80fd\u7528"),d.default.callMethod("showOtherFullScreen",null,function(o){console.log("[gx_game] 233 showFullScreen ret = ",o),o==a.SHOW?(n.hideBanner(),t&&t()):(o==a.CLOSE&&(n.closeInterTime=n.get_time()),n.isNeedShowBanner=!0,e&&e())})},e.prototype.destroyInterVideo=function(){d.default.callMethod("destroyInterVideo")},e.prototype.create_ad=function(t){var e=this;return new Promise(function(n){d.default.callMethod("createNativeAd",t.toString(),function(t){if(console.log("[gx_game]native data load succ:"+JSON.stringify(t)),t==a.ERROR);else try{e.add_native_data(t)}catch(n){console.error(n)}}),setTimeout(n,100)})},e.prototype.initNativeAd=function(){},e.prototype.showInterstitialNative=function(t,e,n,o){console.log("[gx_game]showInterstitialNative \u4e0d\u80fd\u7528"),o&&o()},e.prototype.hideInterstitialNative=function(){t.prototype.hideInterstitialNative.call(this)},e.prototype.showNativeInterstitial=function(t,e,n){void 0===n&&(n=1),d.default.getNativePlatform()==u.PLATFORM.G233?this.showInterVideo(t,e):this.showInterstitial(t,e)},e.prototype.showOtherNativeInterstitial=function(t,e,n){void 0===n&&(n=1),d.default.getNativePlatform()==u.PLATFORM.G233?this.showOtherInterVideo(t,e):this.showOtherInterstitial(t,e)},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this)},e.prototype.showNativeIcon=function(){if(this.isGameCd)return console.log("[gx_game]showNativeIcon \u5e7f\u544aCD\u4e2d")},e.prototype.hideNativeIcon=function(){t.prototype.hideNativeIcon.call(this),this.platformVersion()==u.PLATFORM.VIVO&&d.default.callMethod("hideNativeIcon")},e.prototype.loop_get_native_data=function(){var t=this._native_data_cache.length<5?1e3*d.default.randomInt(15,20):3e4;setTimeout(this.initNativeAd.bind(this),t)},e.prototype.reportAdClick=function(t){t&&void 0!==t&&(d.default.callMethod("reportAdClick",t.adId),this.remove_native_data(t))},e.prototype.showFeedAd=function(t,e){if(this.isGameCd)return console.log("[gx_game]showFeedAd \u5e7f\u544aCD\u4e2d");d.default.callMethod("showFeedAd",null,function(n){n==a.SHOW?(t&&t(),r.default.setMusicVolume(0),r.default.setSoundVolume(0)):(e&&e(),r.default.setMusicVolume(1),r.default.setSoundVolume(1))})},e.prototype.destroyFeedAd=function(){d.default.callMethod("destroyFeedAd")},e.prototype.showGamePortal=function(){d.default.callMethod("jumpLeisureSubject")},e.prototype.openUrl=function(t){d.default.callMethod("openUrl",t)},e.prototype.showPrivacy=function(t){void 0===t&&(t="privacy"),d.default.callMethod("showPrivacy",t)},e.prototype.showVivoIcon=function(){d.default.callMethod("showVivoIcon")},e.prototype.hideVivoIcon=function(){d.default.callMethod("hideVivoIcon")},e.prototype.supportGameBox=function(){return this.getNativePlatform()==u.PLATFORM.OPPO||this.getNativePlatform()==u.PLATFORM.VIVO},e}(l.default);n.default=h,cc._RF.pop()},{"../..//audio/GxAudioUtil":"GxAudioUtil","../../GxGame":"GxGame","../../core/GxEnum":"GxEnum","../../util/GxTimer":"GxTimer","../../util/GxUtils":"GxUtils","../base/BaseAdapter":"BaseAdapter"}],KsAdapter:[function(t,e,n){"use strict";cc._RF.push(e,"d38b11Vts1I47+t5MaRKPAZ","KsAdapter");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var a=arguments[e],r=0,s=a.length;r<s;r++,i++)o[i]=a[r];return o};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../GxGame"),s=t("../base/BaseAdapter"),c=t("../../GxAdParams"),d=t("../../util/DataStorage"),l=t("../../core/GxConstant"),u=t("../../sdk/GxEngine"),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canShowInter=!1,e.interTimeLimit=60,e.isHaiWai=!1,e.systemInfo=null,e.kwaiOpenId="",e.gxEngine=null,e.openId="",e.union_id="",e.getOpenidTry=0,e}return i(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){var t=this,e=ks.getSystemInfoSync(),n=e.host.env;this.systemInfo=e,"kwaipro"==n||"snackvideo"==n||"kwaime"==n?(console.log("\u6d77\u5916\u7248\u672c\uff1a"+n),this.isHaiWai=!0,this.interTimeLimit=60,this.ac(),this.ab(),this.it()):(this.isHaiWai=!1,console.log("\u6b63\u5e38\u7248\u672c\uff1a"+n),this.interTimeLimit=5,c.AdParams.ks.appId=e.host.appId,this.gxEngine=new u.default,this.getOpenId(function(e){ks.uma&&ks.uma.setOpenid(e),window.TDAPP&&(window.TDAPP.register({profileId:e,profileType:1}),window.TDAPP.login({profileId:e,profileType:1})),t.gxEngine.init({openId:e,appToken:c.AdParams.ks.appId,appId:c.AdParams.ks.appId}).then(function(){console.log("gxEngine\u521d\u59cb\u5316\u6210\u529f")}).catch(function(t){console.log(t),console.log("gxEngine\u521d\u59cb\u5316\u5931\u8d25:"+t)})})),this.initVideo(),this.initRecorder()},e.prototype.startLogin=function(){var t=this,e=this;if(this.isHaiWai){var n="S\xf3 um momento";-1!=this.systemInfo.language.toLowerCase().indexOf("id")&&(n="Tunggu sebentar."),ks.showLoading({title:n}),ks.login({success:function(n){console.log(n,n.code);var o=ks.getSystemInfoSync().host;ks.login({success:function(n){console.log(n.code);var i=o.gameVersion;null==i&&(i=o.version),ks.request({url:"https://api.sjzgxwl.com/kwai/ks/code2session",data:{appId:o.appId,gameVersion:i,code:n.code},method:"POST",timeout:15e3,header:{"content-type":"application/json"},success:function(n){console.log(n),console.log(n.data),n&&1==n.data.code?(t.kwaiOpenId=n.data.data.open_id,ks.hideLoading(),console.log("\u767b\u5f55\u6210\u529f\uff1a"+t.kwaiOpenId),t.rewardKwaiCoins("test666")):(console.log("\u767b\u5f55\u5931\u8d25\uff1a"),e.showConfirm())},fail:function(t){console.error(t),e.showConfirm()}})},fail:function(t){e.showConfirm(),console.error(t)},complete:function(){console.log("login complete")}})},fail:function(){e.showConfirm()}})}else console.warn("???\u56fd\u5185\u7248\u672c\uff1f\uff1f\uff1f")},e.prototype.showConfirm=function(){var t=this;ks.hideLoading();var e="prompt",n="Por favor, entre";-1!=this.systemInfo.language.toLowerCase().indexOf("id")&&(e="prompt",n="Silakan log masuk"),ks.showModal({title:e,content:n,success:function(e){e.confirm?(console.log("\u7528\u6237\u70b9\u51fb\u786e\u5b9a"),t.startLogin()):e.cancel&&console.log("\u7528\u6237\u70b9\u51fb\u53d6\u6d88")}})},e.prototype.rewardKwaiCoins=function(t){var e=this.systemInfo.host,n=e.gameVersion;null==n&&(n=e.version),ks.request({url:"https://api.sjzgxwl.com/kwai/ks/reward",data:{appId:this.systemInfo.host.appId,gameVersion:n,openId:this.kwaiOpenId,rewardId:t,env:this.systemInfo.host.env},method:"POST",timeout:15e3,header:{"content-type":"application/json"},success:function(t){console.log(t),console.log(t.data),t&&1==t.data.code?console.log("reward\u6210\u529f \uff1a"):console.log("reward\u5931\u8d25\uff1a")},fail:function(t){console.error(t)}})},e.prototype.ac=function(){var t=this,e=r.default.gGN("ac",20);setTimeout(function(){r.default.gGB("ac")&&t.showNativeInterstitial(function(){},function(){t.ac()})},1e3*e)},e.prototype.ab=function(){var t=this,e=r.default.gGN("ab",35);setTimeout(function(){r.default.gGB("ab")&&t._vv()},1e3*e)},e.prototype._vv=function(){var t=this;this.showVideo(function(){var e=r.default.gGN("ab",35);setTimeout(function(){t._vv()},1e3*e)},"GxVV")},e.prototype.it=function(){var t=this;this.isHaiWai&&(this.canShowInter=!1,r.default.gGB("it")&&(this.interTimeLimit=r.default.gGN("it",60)),setTimeout(function(){t.interTimeLimit=r.default.gGN("it",60),r.default.gGB("it")?t.canShowInter=!0:t.canShowInter=!1},1e3*this.interTimeLimit))},e.prototype.initVideo=function(){null==c.AdParams.ks.video||c.AdParams.ks.video.length<=0?this.videoAd=null:(this.destroyVideo(),this.videoAd=ks.createRewardedVideoAd({adUnitId:c.AdParams.ks.video}),console.log(this.videoAd),this.videoAd&&(this.videoAd.onError(this._videoError.bind(this)),this.videoAd.onClose(this._videoClose.bind(this))))},e.prototype._videoError=function(t){console.log("[gx_game]video error: "+JSON.stringify(t),"color: red"),this.videocallback&&this.videocallback(!1),this.videocallback=null,this.videoAd&&(this.videoAd.offError(this._videoError),this.videoAd.offClose(this._videoClose))},e.prototype._videoClose=function(t){console.log(t),this.recorderResume(),t&&t.isEnded||void 0===t?(this.gxEngine&&this.gxEngine.rewardAdEnd(),this.videocallback&&this.videocallback(!0)):this.videocallback&&this.videocallback(!1),this.videoAd&&(this.videoAd.offError(this._videoError),this.videoAd.offClose(this._videoClose)),this.videocallback=null},e.prototype.showVideo=function(e,n){var o=this;if(void 0===n&&(n=""),null==this.videoAd&&this.initVideo(),t.prototype.showVideo.call(this,null,n),null==this.videoAd)return e&&e(!1),void(this.isHaiWai?this.createToast("Tente novamente mais tarde"):this.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"));this.videocallback=e,this.videoAd.show().then(function(){o.recorderPause(),console.log("\u89c6\u9891\u5c55\u793a\u6210\u529f")}).catch(function(){console.warn("\u6d77\u5916\u7684\u4e0d\u80fd\u6709\u4e2d\u6587  \u5148\u6ce8\u91ca\u6389\u4e86"),o.isHaiWai?o.createToast("Tente novamente mais tarde"):o.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")})},e.prototype.createToast=function(t){ks.showToast({title:t,duration:2e3})},e.prototype.showNativeInterstitial=function(t,e,n){void 0===n&&(n=0),c.AdParams.ks.inter||(console.log("\u63d2\u5c4f\u53c2\u6570\u7a7a"),e&&e());var o=ks.createInterstitialAd({adUnitId:c.AdParams.ks.inter});if(o){var i=function(){e&&e(),r()};o.onClose(i);var a=function(t){console.log("\u63d2\u5c4f\u5931\u8d25 res",t),e&&e(),r()};o.onError(a);var r=function(){o&&(o.offClose(i),o.offError(a),o=null)};o.show().then(function(e){console.log("show interstitial ad success, result is "+e),t&&t()}).catch(function(t){console.log("show interstitial ad failed, error is "+t,t),e&&e(),r()})}else console.log("\u521b\u5efa\u63d2\u5c4f\u5e7f\u544a\u7ec4\u4ef6\u5931\u8d25"),e&&e()},e.prototype.showOtherNativeInterstitial=function(t,e,n){void 0===n&&(n=0),c.AdParams.ks.inter||(console.log("\u63d2\u5c4f\u53c2\u6570\u7a7a"),e&&e()),this.canShowInter?(this.it(),this.showNativeInterstitial(t,e,1e3*n)):console.log("\u63d2\u5c4f\u65f6\u95f4\u9650\u5236 \u4e0d\u80fd\u5c55\u793a")},e.prototype.destroyVideo=function(){this.videoAd&&(this.videoAd.offError(this._videoError),this.videoAd.offClose(this._videoClose),this.videoAd.destroy()),this.videoAd=null},e.prototype.initRecorder=function(){var t=this;this.gameRecorder=ks.getGameRecorder(),this.gameRecorder.on("start",function(){console.log("\u5f55\u5236\u5f00\u59cb"),t.gameRecorderState=s.RECORDER_STATE.START}),this.gameRecorder.on("error",function(e){console.log("\u5f55\u5236\u51fa\u9519",JSON.stringify(e)),t.gameRecorderState=s.RECORDER_STATE.NO}),this.gameRecorder.on("stop",function(e){t.gameRecorderState=s.RECORDER_STATE.STOP,t.videoPath=null,e&&e.videoID?(t.videoPath=e.videoID,console.log("\u5f55\u5c4f\u505c\u6b62\uff0c\u5f55\u5236\u6210\u529f\u3002videoID is "+e.videoID)):console.log("\u5f55\u5c4f\u505c\u6b62\uff0c\u5f55\u5236\u5931\u8d25"),t.onRecoderStop&&t.onRecoderStop(null!=t.videoPath)}),this.gameRecorder.on("pause",function(){console.log("\u6682\u505c\u5f55\u5236"),t.gameRecorderState=s.RECORDER_STATE.PAUSE}),this.gameRecorder.on("resume",function(){console.log("\u7ee7\u7eed\u5f55\u5236"),t.gameRecorderState=s.RECORDER_STATE.RESUME}),this.gameRecorder.on("abort",function(){console.log("\u5e9f\u5f03\u5df2\u5f55\u5236\u89c6\u9891")})},e.prototype.recorderPause=function(){this.gameRecorder&&this.gameRecorderState!=s.RECORDER_STATE.NO&&this.gameRecorder.pause()},e.prototype.recorderResume=function(){this.gameRecorder&&this.gameRecorderState!=s.RECORDER_STATE.NO&&this.gameRecorder.resume()},e.prototype.recorderStart=function(){this.gameRecorder&&this.gameRecorder.start()},e.prototype.recorderStop=function(t){this.onRecoderStop=t,this.gameRecorder&&this.gameRecorder.stop()},e.prototype.shareRecorder=function(t,e){null!=this.gameRecorder&&null!=this.videoPath&&this.gameRecorder.publishVideo({video:this.videoPath,callback:function(n){if(null!=n&&null!=n)return console.log("\u5206\u4eab\u5f55\u5c4f\u5931\u8d25: "+JSON.stringify(n)),void(e&&e());console.log("\u5206\u4eab\u5f55\u5c4f\u6210\u529f"),t&&t()}})},e.prototype.hasAddDesktop=function(t,e,n){ks.getAPKShortcutInstallStatus?ks.getAPKShortcutInstallStatus(function(o){console.log("hasAddDesktop",JSON.stringify(o)),1===o.code?o.installed?e&&e():t&&t():n&&n()}):e&&e()},e.prototype.addDesktop=function(t,e){ks.saveAPKShortcut?ks.saveAPKShortcut(function(n){console.log("addDesktop",JSON.stringify(n)),1===n.code?t&&t():e&&e()}):t&&t()},e.prototype.getOpenId=function(t){var e=this,n=d.default.getItem("__gx_openId__",null),o=d.default.getItem("__gx_unionId__",null);if(n&&o)return console.log("\u83b7\u53d6\u5230\u7f13\u5b58\u7684openid\uff1a"+n),console.log("\u83b7\u53d6\u5230\u7f13\u5b58\u7684union_id\uff1a"+o),e.openId=n,e.union_id=o,void(t&&t(n,o));e.getOpenidTry>=5?console.warn("\u83b7\u53d6openId\u91cd\u8bd5\u6700\u5927\u6b21\u6570\u4e86"):window.ks.login({force:!0,success:function(n){console.log("login \u8c03\u7528\u6210\u529f"+n.code+" "),n.code?e.requestGet(l.default.Code2SessionUrl+"?appId="+c.AdParams.ks.appId+"&code="+n.code,function(n){e.logi(n.data),1==n.data.code?(e.openId=n.data.data.openid,e.union_id=n.data.data.union_id,e.logi("\u83b7\u53d6openid\u6210\u529f\uff1a"+e.openId),e.logi("\u83b7\u53d6union_id\u6210\u529f\uff1a"+e.union_id),d.default.setItem("__gx_openId__",e.openId),d.default.setItem("__gx_unionId__",e.union_id),t&&t(e.openId,e.union_id)):(e.logw("\u767b\u5f55\u5931\u8d25\uff01"+n.data.msg),setTimeout(function(){e.getOpenidTry++,e.getOpenId(t)},3e3))},function(n){e.logw("\u767b\u5f55\u5931\u8d25\uff01"+n.errMsg),e.logw(n),setTimeout(function(){e.getOpenidTry++,e.getOpenId(t)},3e3)}):(console.log("\u767b\u5f55\u6ca1code"),setTimeout(function(){e.getOpenidTry++,e.getOpenId(t)},3e3))},fail:function(){console.log("login \u8c03\u7528\u5931\u8d25"),setTimeout(function(){e.getOpenidTry++,e.getOpenId(t)},3e3)}})},e.prototype.logi=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.LOG.apply(this,a(["[KSAdapter]"],e))},e.prototype.loge=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.LOGE.apply(this,a(["[KSAdapter]"],e))},e.prototype.logw=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.LOGW.apply(this,a(["[KSAdapter]"],e))},e.prototype.requestGet=function(t,e,n){ks.request({url:t,success:function(t){e&&e(t)},fail:function(t){n&&n(t)}})},e.prototype.requestPost=function(t,e,n,o){ks.request({url:t,data:e,header:{"content-type":"application/json"},method:"POST",dataType:"JSON",responseType:"text",success:function(t){try{n&&n({statusCode:t.statusCode,header:t.header,data:JSON.parse(t.data)}),console.log("\u8f6c\u6362\u6210\u529f")}catch(e){console.log(e),console.log("\u8f6c\u6362\u5931\u8d25"),n&&n(t)}},fail:function(t){o&&o(t)}})},e.prototype.userFrom=function(t){try{var e=d.default.getItem("__clickid__");return e?t&&t(!0):(e=ks.getLaunchOptionsSync().query.callback)?(d.default.setItem("__clickid__",e),t&&t(!0)):t&&t(!1)}catch(n){t&&t(!1)}},e}(s.default);n.default=h,cc._RF.pop()},{"../../GxAdParams":"GxAdParams","../../GxGame":"GxGame","../../core/GxConstant":"GxConstant","../../sdk/GxEngine":"GxEngine","../../util/DataStorage":"DataStorage","../base/BaseAdapter":"BaseAdapter"}],MiAdapter:[function(t,e,n){"use strict";cc._RF.push(e,"bd976e9C6ZAQa3cUEk2+ewY","MiAdapter");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var a=arguments[e],r=0,s=a.length;r<s;r++,i++)o[i]=a[r];return o};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../GxGame"),s=t("../../util/GxTimer"),c=t("../../util/DataStorage"),d=t("../../util/GxUtils"),l=t("../base/BaseAdapter"),u=t("../../core/GxEnum"),h=t("../../GxAdParams"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bannerIdx=1,e.firstBanner=!0,e}return i(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,r.default.adConfig.bannerUpdateTime=5,r.default.adConfig.useNative=!0,this.getGameInfo(),r.default.adConfig.interTick=30,r.default.adConfig.bannerTick=30,r.default.adConfig.adCdTime=r.default.gGN("delay",30),r.default.gGB("z1")&&(r.default.adConfig.adCdTime=0),this.isGameCd=r.default.adConfig.adCdTime>0,this.logi("\u5e7f\u544a\u51b7\u5374\uff1a"+this.isGameCd),t.prototype.initAd.call(this),null!=this.manifestInfo&&this.manifestInfo.package.replace(/\./g,"_"),this._gameCd(),this.initBanner(),this.initNormalBanner(),this.initVideo(),this.initNativeAd(),this.initGamePortal(),s.default.loop(function(){r.default.uploadOcpx("gtime")},6e4))},e.prototype.getDeviceId=function(){var t=this;window.qg.getDeviceId&&window.qg.getDeviceId({success:function(e){t.logi("deviceId get success: "+e),e&&e.deviceId&&c.default.deviceid!=e.deviceId&&(c.default.deviceid=e.deviceId),t.logi(c.default.deviceid)},fail:function(e,n){t.loge("deviceId  get fail, code = "+n)}})},e.prototype.getGameInfo=function(){var t=this;window.qg.getManifestInfo&&window.qg.getManifestInfo({success:function(e){var n=JSON.parse(e.manifest);r.default.gameInfo={package:n.package,name:n.name,versionName:n.versionName,versionCode:n.versionCode},t.logi(JSON.stringify(r.default.gameInfo))}})},e.prototype._gameCd=function(){var t=this;(new s.default).once(function(){t.isGameCd=!1,t.isNeedShowBanner&&t.showBanner(null,null)},1e3*r.default.adConfig.adCdTime)},e.prototype.initNormalBanner=function(){var t=this;if(!qg.createBannerAd||h.AdParams.mi.banner.length<=0)this.logi("\u73af\u5883\u4e0d\u652f\u6301banner  \u6216\u8005banner\u5e7f\u544a\u53c2\u6570\u7a7a");else{this.destroyNormalBanner();var e=r.default.screenWidth,n=r.default.screenHeight;console.log("scree:"+e),console.log("screenHeight:"+n);var o={};h.AdParams.mi.bannerOnTop&&(o.top=0),this.bannerAd=window.qg.createBannerAd({adUnitId:h.AdParams.mi.banner,style:o});var i=!1;this.bannerAd.onError(function(e){t.loge("normal banner error: ",JSON.stringify(e))}),this.bannerAd.onClose(function(){t.loge("normal banner close: "),t.bannerShowTime=t.get_time()}),this.bannerAd.onResize(function(o){t.loge("normal banner onResize: ",JSON.stringify(o)),i||t.bannerAd&&(t.loge("normal banner \u6539\u53d8: "),e>n&&(t.bannerAd.style.left=(e-.4*e)/2)),i=!1})}},e.prototype.showNormalBanner=function(t,e){var n=this;return this.get_time()-this.bannerShowTime<=1e3*r.default.adConfig.bannerTick||r.default.isShenHe?(this.logi("\u9650\u5236\u4e862banner"),e&&e()):(null==this.bannerAd&&this.initNormalBanner(),null==this.bannerAd?(this.logi("banner\u7a7a"),void(e&&e())):void this.bannerAd.show().then(function(){t&&t(),n.logi("normal banner show success"),r.default.adConfig.bannerUpdateTime<=0&&n.bannerTimer&&n.bannerTimer.stop(),n.bannerAd&&r.default.screenWidth>r.default.screenHeight&&(n.bannerAd.style.top=r.default.screenHeight-.4*r.default.screenWidth*(88/208)+80,n.bannerAd.style.height=n.bannerAd.style.realHeight,n.bannerAd.style.top=r.default.screenHeight-65)}).catch(function(t){e&&e(),n.loge("banner error",t)}))},e.prototype.hideNormalBanner=function(){this.bannerAd&&(this.bannerAd.hide(),this.bannerAd.destroy()),this.bannerAd=null,console.log("\u9500\u6bc1banner")},e.prototype.destroyNormalBanner=function(){this.bannerAd&&this.bannerAd.destroy()},e.prototype.initBanner=function(){t.prototype.initBanner.call(this)},e.prototype.showBanner=function(t,e){if(this.get_time()-this.bannerShowTime<=1e3*r.default.adConfig.bannerTick||r.default.isShenHe)return this.logi("\u9650\u5236\u4e862banner"),e&&e();this.firstBanner||this.hideBanner(),this.firstBanner=!1,this.showNormalBanner(t,e)},e.prototype.hideBanner=function(){t.prototype.hideBanner.call(this),this.isNeedShowBanner=!1,console.log("\u8fdb\u5165hideBanner"),this.customBanner&&(this.customBanner.hide(),this.customBanner.destroy(),this.customBanner=null),this.hideNormalBanner()},e.prototype.initVideo=function(){var t=this;h.AdParams.mi.video?(this.destroyVideo(),this.videoAd=window.qg.createRewardedVideoAd({adUnitId:h.AdParams.mi.video}),this.videoAd.onLoad(function(){t.logi("video load succ")}),this.videoAd.onError(function(e){t.logi("video error: "+JSON.stringify(e),"color: red")}),this.videoAd.onClose(function(e){e&&e.isEnded?t.videocallback&&t.videocallback(!0):t.videocallback&&t.videocallback(!1),t.videoAd.load()}),this.videoAd.load()):this.logi("video\u5e7f\u544a\u4f4d\u53c2\u6570\u7a7a")},e.prototype.showVideo=function(e,n){var o=this;if(void 0===n&&(n=""),null==this.videoAd&&this.initVideo(),t.prototype.showVideo.call(this,null,n),null==this.videoAd)return this.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),void(e&&e(!1));this.videocallback=e,this.videoAd.show().then(function(){}).catch(function(){o.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),e&&e(!1)})},e.prototype.destroyVideo=function(){this.videoAd&&(this.videoAd.offLoad(),this.videoAd.offError(),this.videoAd.offClose()),this.videoAd=null},e.prototype.create_ad=function(t){var e=this;return new Promise(function(n){var o="";if(t==u.ad_native_type.banner?o=h.AdParams.mi.native_banner:t==u.ad_native_type.inter1?o=h.AdParams.mi.native1:t==u.ad_native_type.inter2&&(o=h.AdParams.mi.native2),""==o||void 0===o||null==o||e.is_limit_native_length(t)||!qg.createNativeAd)return n(null);var i=window.qg.createNativeAd({adUnitId:o}),a=function(n){if(e.logi("native data load:"),n&&n.adList){var o=n.adList.pop();o.ad=i,o.type=t,e.add_native_data(o),e.logi("native data load succ:"+JSON.stringify(o)),i.offLoad(a)}};i.onLoad(a);var r=function(t){e.logi("native data error: "+JSON.stringify(t),"color: red"),i.offError(r)};i.onError(r),i.load(),setTimeout(n,500)})},e.prototype.create_custom_ad=function(t){var e="",n={};if(t==u.ad_native_type.banner?(e=h.AdParams.mi.native_banner||h.AdParams.mi.native_custom_banner,r.default.adConfig.useNative||(e=h.AdParams.mi.native_custom_banner)):t==u.ad_native_type.inter1?(e=h.AdParams.mi.native1||h.AdParams.mi.native_custom1,r.default.adConfig.useNative||(e=h.AdParams.mi.native_custom1)):t==u.ad_native_type.inter2&&(e=h.AdParams.mi.native2||h.AdParams.mi.native_custom2,r.default.adConfig.useNative||(e=h.AdParams.mi.native_custom2)),t==u.ad_native_type.banner)h.AdParams.mi.bannerOnTop&&(n.top=0);else{var o=.85*Math.min(r.default.screenWidth,r.default.screenHeight),i=o/16*15.125,a=(r.default.screenWidth-o)/2,s=(r.default.screenHeight-i)/2;n.width=o,n.left=a,n.top=s}return""!=e&&void 0!==e&&null!=e&&window.qg.createCustomAd?window.qg.createCustomAd({adUnitId:e,style:n}):null},e.prototype.initNativeAd=function(){var t=this;r.default.adConfig.useNative?(this.logi("\u4f7f\u7528\u539f\u751f\u81ea\u6e32\u67d3\u5e7f\u544a"),this.create_ad(u.ad_native_type.banner).then(function(){return t.create_ad(u.ad_native_type.inter1)}).then(function(){return t.create_ad(u.ad_native_type.inter2)}).then(function(){t.loop_get_native_data()})):this.logi("\u4f7f\u7528\u539f\u751f\u6a21\u677f\u5e7f\u544a")},e.prototype.showInterstitialNative=function(t,e,n,o){o&&o(),this.logi("\u4e0d\u4f7f\u7528\u8fd9\u4e2a\u5e7f\u544a")},e.prototype.showInterstitial=function(t,e){var n=this;if(this.logi("\u666e\u901a \u63d2\u5c4f"),!qg.createInterstitialAd||null==h.AdParams.mi.inter||0==h.AdParams.mi.inter.length)return e&&e();this.destroyNormalInter(),this.interAd=qg.createInterstitialAd({adUnitId:h.AdParams.mi.inter});var o=this;this.interAd.onLoad(function(){o.logi("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d"),n.interAd.show(),t&&t()}),this.interAd.onError(function(t){n.logi("\u666e\u901a\u63d2\u5c4f\u5c55\u793a\u5931\u8d25"+JSON.stringify(t)),e&&e()}),this.interAd.onClose(function(){o.logi("\u63d2\u5c4f\u5e7f\u544a\u5173\u95ed"),n.interShowTime=n.get_time(),e&&e()})},e.prototype.destroyNormalInter=function(){this.interAd&&(this.interAd.offLoad(),this.interAd.offError()),this.interAd=null},e.prototype.hideInterstitialNative=function(){t.prototype.hideInterstitialNative.call(this)},e.prototype.showNativeInterstitial=function(t,e,n){var o=this;return void 0===n&&(n=0),this.isGameCd?(e&&e(),void this.logi("showNativeInterstitial \u5e7f\u544aCD\u4e2d")):this.get_time()-this.interShowTime<=1e3*r.default.adConfig.interTick||r.default.isShenHe?(this.logi("\u9650\u5236\u4e862"),e&&e()):void s.default.once(function(){o.hideNativeInterstitial();var n=null,i=0;if(r.default.adConfig.useNative){if(o.interIdx%2!=1)return o.logi(" useNative inter222Idx:"+o.interIdx),o.logi("\u8c03\u7528\u666e\u901a\u63d2\u5c4f"),o.interIdx++,void o.showInterstitial(t,e);o.logi(" useNative interIdx:"+o.interIdx),n=o.getLocalNativeData(u.ad_native_type.inter1),i=u.ad_native_type.inter1,null!=n&&void 0!==n||(n=o.getLocalNativeData(u.ad_native_type.inter2),i=u.ad_native_type.inter2)}else o.interIdx%2==1?(n=o.create_custom_ad(u.ad_native_type.inter1),i=u.ad_native_type.inter1):(n=o.create_custom_ad(u.ad_native_type.inter2),i=u.ad_native_type.inter2);if(o.interIdx++,o.logi("interIdx:"+o.interIdx),o.logi("\u663e\u793a:"+i),null==n||void 0===n)o.logi("native_data null"),e&&e();else if(r.default.adConfig.useNative){o.logi("native inter ");var a=cc.instantiate(d.default.getRes("gx/prefab/ad/native_interstitial",cc.Prefab));o.nativeInter=a.getComponent("gx_native_interstitial"),o.nativeInter&&o.nativeInter.show(n,function(){t&&t()},function(){o.interShowTime=o.get_time(),e&&e()})}else o.customInter&&(o.customInter.destroy(),o.customInter=null),o.logi("custom inter "),n.onHide(function(){if(o.interShowTime=o.get_time(),window.cc){var t=cc.director.getScene().getChildByName("BLOCK");t&&t.destroy()}n&&n.offHide(),e&&e()}),n.show().then(function(){if(window.cc&&!cc.director.getScene().getChildByName("BLOCK")){var e=new cc.Node;e.width=2e3,e.height=2e3,e.name="BLOCK",cc.director.getScene().addChild(e),e.zIndex=cc.macro.MAX_ZINDEX,e.addComponent(cc.BlockInputEvents);var i=cc.winSize;e.x=i.width/2,e.y=i.height/2;var a=0;e.on(cc.Node.EventType.TOUCH_START,function(){a++,console.log("\u89e6\u6478\u4e86"),4==a&&e.destroy()})}o.customInter=n,o.logi("show custom inter  success"),t&&t()}).catch(function(t){if(o.logi("show custom inter fail with:"+t.errCode+","+t.errMsg),e&&e(),window.cc){var n=cc.director.getScene().getChildByName("BLOCK");n&&n.destroy()}})},r.default.isShenHe?0:1e3*n)},e.prototype.showOtherNativeInterstitial=function(t,e,n){void 0===n&&(n=0),this.showNativeInterstitial(t,e,n)},e.prototype.showNativeIcon=function(t){if(this.isGameCd)return this.logi("showNativeIcon \u5e7f\u544aCD\u4e2d");if(!r.default.adConfig.useNative)return this.logi("native\u65e0\u6cd5\u663e\u793a \u73b0\u5728\u662fcustom ");var e=u.ad_native_type.native_icon,n=h.AdParams.mi.native_icon;n==h.AdParams.mi.native1?e=u.ad_native_type.inter1:n==h.AdParams.mi.native_banner&&(e=u.ad_native_type.banner);var o=this.getLocalNativeData(e);if(null==o||void 0===o)return this.logi("showNativeIcon \u6682\u65e0\u5e7f\u544a\u6570\u636e");var i=cc.instantiate(d.default.getRes("gx/prefab/ad/native_icon",cc.Prefab));this.nativeIcon=i.getComponent("gx_native_icon"),this.nativeIcon&&this.nativeIcon.show(t,o)},e.prototype.hideNativeIcon=function(){t.prototype.hideNativeIcon.call(this)},e.prototype.loop_get_native_data=function(){var t=this._native_data_cache.length<5?1e3*d.default.randomInt(15,20):3e4;setTimeout(this.initNativeAd.bind(this),t)},e.prototype.loop_get_custom_data=function(){var t=this._native_custom_inter_cache.length<5||this._native_custom_banner_cache.length<5?1e3*d.default.randomInt(15,20):3e4;setTimeout(this.initNativeAd.bind(this),t)},e.prototype.initGamePortal=function(){var t=this,e=this;this.supportGameBox()&&h.AdParams.mi.gamePortal&&window.qg.createGamePortalAd&&(this.destroyGamePortal(),this.portalAd=window.qg.createGamePortalAd({adUnitId:h.AdParams.mi.gamePortal}),this.portalAd.onLoad(function(){e.logi("game portal ad load succ")}),this.portalAd.onClose(function(){e._game_portal_hide&&t._game_portal_hide()}),this.portalAd.onError(function(t){e.logi("game portal ad error: "+JSON.stringify(t),"color: red")}))},e.prototype.showGamePortal=function(t,e,n){var o=this;return void 0===n&&(n=!0),this.supportGameBox()?(this.portalAd||this.initGamePortal(),this.portalAd?(this._game_portal_hide=e,void this.portalAd.load().then(function(){o.portalAd.show().then(function(){o.logi("show success"),o.hideBanner(),t&&t()}).catch(function(t){o.loge("showGamePortal show error:",t),e&&e(),n&&o.createToast("\u52aa\u529b\u52a0\u8f7d\u4e2d,\u8bf7\u7a0d\u540e\u518d\u8bd5~")})}).catch(function(t){o.loge("showGamePortal load error:",t),e&&e(),n&&o.createToast("\u52aa\u529b\u52a0\u8f7d\u4e2d,\u8bf7\u7a0d\u540e\u518d\u8bd5~")})):(e&&e(),void(n&&this.createToast("\u52aa\u529b\u52a0\u8f7d\u4e2d,\u8bf7\u7a0d\u540e\u518d\u8bd5~")))):e&&e()},e.prototype.destroyGamePortal=function(){this.portalAd&&(this.portalAd.destroy(),this.portalAd=null)},e.prototype.initGameBanner=function(){var t=this;!window.qg.createGameBannerAd&&h.AdParams.mi.gameBanner&&window.qg.createGameBannerAd&&(this.destroyGameBanner(),this.gameBannerAd=window.qg.createGameBannerAd({adUnitId:h.AdParams.mi.gameBanner}),this.gameBannerAd.onLoad(function(){t.logi("\u76d2\u5b50\u6a2a\u5e45\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),this.gameBannerAd.onError(function(e){t.logi(e)}))},e.prototype.showGameBanner=function(){var t=this;this.gameBannerAd||this.initGameBanner(),this.gameBannerAd&&this.gameBannerAd.show().then(function(){t.logi("show success")}).catch(function(e){t.logi("show fail with:"+e.errCode+","+e.errMsg)})},e.prototype.hideGameBanner=function(){this.gameBannerAd&&this.gameBannerAd.hide()},e.prototype.destroyGameBanner=function(){this.gameBannerAd&&(this.gameBannerAd.destroy(),this.gameBannerAd=null)},e.prototype.showAddDesktop=function(t,e){if(!this.addIconNode||void 0===this.addIconNode||!cc.isValid(this.addIconNode.node)){var n=cc.instantiate(d.default.getRes("gx/prefab/add_icon",cc.Prefab));this.addIconNode=n.getComponent("Gx_add_icon"),this.addIconNode&&this.addIconNode.show(t,e)}},e.prototype.hasAddDesktop=function(t,e,n){var o=this;window.qg.hasShortcutInstalled&&window.qg.hasShortcutInstalled?window.qg.hasShortcutInstalled({success:function(n){o.logi(" hasShortcutInstalled "+(n?"has add":"can add")),0==n?t&&t():e&&e()},fail:function(t){o.loge(" hasShortcutInstalled error: "+JSON.stringify(t)),n&&n()},complete:function(){}}):n&&n()},e.prototype.addDesktop=function(t,e){var n=this;window.qg.installShortcut&&window.qg.installShortcut?window.qg.installShortcut({success:function(){setTimeout(function(){n.hasAddDesktop(function(){e&&e()},function(){t&&t()})},1e3)},fail:function(t){n.loge(" installShortcut error: "+JSON.stringify(t)),e&&e(),window.qg.showToast({title:"\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"none"})}}):e&&e()},e.prototype.login=function(t,e){window.qg.login?window.qg.login({success:function(e){t&&t(e)},fail:function(t){e&&e(t)}}):e&&e("no login")},e.prototype.reportAdClick=function(e){t.prototype.reportAdClick.call(this,e),r.default.uploadOcpx("gads")},e.prototype.openGameAd=function(){var t=this;!r.default.isShenHe&&r.default.adConfig.showBanner>0&&s.default.once(function(){t.clickNative()},1e3*r.default.adConfig.showBanner)},e.prototype.logi=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.LOG.apply(this,a(["[MiAdapter]"],e))},e.prototype.loge=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.LOGE.apply(this,a(["[MiAdapter]"],e))},e}(l.default);n.default=p,cc._RF.pop()},{"../../GxAdParams":"GxAdParams","../../GxGame":"GxGame","../../core/GxEnum":"GxEnum","../../util/DataStorage":"DataStorage","../../util/GxTimer":"GxTimer","../../util/GxUtils":"GxUtils","../base/BaseAdapter":"BaseAdapter"}],OpenDataUtil:[function(t,e,n){"use strict";cc._RF.push(e,"013830PBYVFGpH3UU/US5Ak","OpenDataUtil"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./GxLog"),i="Check",a="InitChannel",r="ShareToFriend",s="ShowShareFriend",c="RefreshShareFriend",d="CloseShareFriend",l=1,u=function(){function t(){}return t.checkHasOpenData=function(){try{return this._postMessage(i)}catch(t){return console.warn(t),o.default.w("\u6ca1\u6709\u5f00\u653e\u57df \u8bf7\u653e\u5165subopen\u6587\u4ef6\u5939 \u5e76\u5728 game.json\u4e2d\u6ca1\u6709\u914d\u7f6eopenDataContext\u4e3asubopen "),!1}},t.shareMessageToFriend=function(){wx.setMessageToFriendQuery({shareMessageToFriendScene:l}),this._postMessage(r)},t.initChannel=function(t){this._postMessage(a,{channel:t})},t._postMessage=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);try{if(!window.wx)return;return window.wx.getOpenDataContext().postMessage({action:t,data:e,dataEx:n}),!0}catch(o){}return!1},t.showShareFriend=function(){this._postMessage(s,{})},t.closeShareFriend=function(){this._postMessage(d,{})},t.refreshShareFriend=function(){this._postMessage(c,{})},t}();n.default=u,cc._RF.pop()},{"./GxLog":"GxLog"}],OppoAdapter:[function(t,e,n){"use strict";cc._RF.push(e,"0886fhKSB9HzK5UZK+6IFPO","OppoAdapter");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var a=arguments[e],r=0,s=a.length;r<s;r++,i++)o[i]=a[r];return o};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../GxGame"),s=t("../../util/GxTimer"),c=t("../../util/DataStorage"),d=t("../../util/GxUtils"),l=t("../base/BaseAdapter"),u=t("../../core/GxEnum"),h=t("../../GxAdParams"),p=t("../../core/GxGameUtil"),f=t("../../util/DataStorage"),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bannerIdx=1,e.videoArr=[],e.videoNum=0,e.ecpmObj={targetEcpm:0,gameTime:10,targetVideo:3},e.checkInterval=10,e.gameTime=0,e.videoReward=0,e.reported=!1,e.canUpload=!0,e.pkgName="",e.videoShowing=!1,e.showVideoTime=0,e}return i(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){var e=this;this.isInitAd||(this.isInitAd=!0,r.default.adConfig.bannerUpdateTime=5,this.getGameInfo(),r.default.adConfig.adCdTime=r.default.gGN("delay",60),r.default.gGB("z1")&&(r.default.adConfig.adCdTime=0),this.isGameCd=r.default.adConfig.adCdTime>0,this.logi("\u5e7f\u544a\u51b7\u5374\uff1a"+this.isGameCd),t.prototype.initAd.call(this),qg.getManifestInfo&&qg.getManifestInfo({success:function(t){console.log(JSON.stringify(t.manifest));var n=JSON.parse(t.manifest);e.setManifestInfo(n)},fail:function(){},complete:function(){}}),this._gameCd(),this.initBanner(),this.initNormalBanner(),this.videoArr=[],h.AdParams.oppo.video.includes("_")&&(this.videoArr=h.AdParams.oppo.video.split("_")),this.initVideo(),this.initNativeAd(),this.initGamePortal(),s.default.loop(function(){r.default.uploadOcpx("gtime")},6e4),r.default.adConfig.interTick=r.default.gGN("ae",10),this.ac(),this.ab(),this.initAdMonitor())},e.prototype.ac=function(){var t=this,e=r.default.gGN("ac",20);setTimeout(function(){if(r.default.gGB("ac")){if(window.ovad._boxShowing)return void t.ac();t.privateShowInter(function(){window.ovad._boxShowing=!0},function(){window.ovad._boxShowing=!1,t.ac()})}},1e3*e)},e.prototype.ab=function(){var t=this,e=r.default.gGN("ab",35);setTimeout(function(){r.default.gGB("ab")&&t._vv()},1e3*e)},e.prototype._vv=function(){var t=this;this.showVideo(function(){var e=r.default.gGN("ab",35);setTimeout(function(){t._vv()},1e3*e)},"GxVV")},e.prototype.initAdMonitor=function(){var t=this;this.getAdConfig(),setInterval(function(){t.canUpload?t.checkAdTarget():console.log("\u4e0d\u7528\u4e0a\u62a5 \u53ef\u80fd\u6ca1\u6709\u914d\u7f6e")},1e3*this.checkInterval)},e.prototype.checkAdTarget=function(){if(this.gameTime+=this.checkInterval,this.gameTime>=60*this.ecpmObj.gameTime&&this.videoReward>=this.ecpmObj.targetVideo||window.rywDEBUG){if("true"==f.default.getItem("__oppoTaq__"))return void console.log("\u672c\u5730\u5df2\u7ecf\u6709\u4e0a\u62a5\u8bb0\u5f55\u4e86");if(this.reported)return void console.log("\u5df2\u7ecf\u4e0a\u62a5\u8fc7\u4e86");this.reported=!0;var t=new Date,e=([t.getFullYear()+"\u5e74",t.getMonth()+1+"\u6708",t.getDate()+"\u65e5"].join("-"),this);e.getDeviceId(function(t){t?e.uploadAction("rpkAction",function(t){t&&f.default.setItem("__oppoTaq__","true")}):(e.reported=!1,console.log("deviceId\u4e3a\u7a7a"))})}},e.prototype.uploadAction=function(t,e){if(!this.canUpload)return this.logi("\u6ca1\u6709\u914d\u7f6e \u4e0d\u7528\u4e0a\u62a5"),void(e&&e(!1));var n=this;this.getDeviceId(function(o){if(o){var i;i=o.length>24?"https://ocpx.sjzgxwl.com/ocpx/oppo/rpk/action?pkg="+n.pkgName+"&action="+t+"&OAID="+o:"https://ocpx.sjzgxwl.com/ocpx/oppo/rpk/action?pkg="+n.pkgName+"&action="+t+"&imeiMD5="+o,p.default.getInstance()._httpGets(i,{},function(t){if(-1!=t&&-2!=t){n.logi(t);var o=JSON.parse(t);o&&1==o.code?(n.logi("\u4e0a\u62a5\u6210\u529f\uff1a"),e&&e(!0)):-2==o.code?e&&e(!1):(n.logw("\u4e0a\u62a5\u5931\u8d252\uff01"+t.msg),e&&e(!1))}else n.logw("\u4e0a\u62a5\u5931\u8d25\uff01"+t.msg),e&&e(!1)})}else console.log("deviceId\u7a7a \u4e0d\u80fd\u4e0a\u4f20 "),e&&e(!1)})},e.prototype.getAdConfig=function(){var t=this,e="oppo_install_time";window.qg&&window.qg.getManifestInfo?window.qg.getManifestInfo({success:function(n){var o=JSON.parse(n.manifest);t.logi(o),t.pkgName=o.package,p.default.getInstance()._httpGets("https://ocpx.sjzgxwl.com/ocpx/oppo/rpk/getconfig?pkg="+o.package,{},function(n){if(-1!=n&&-2!=n){t.logi(n);var o=JSON.parse(n);if(o&&1==o.code){t.logi("\u83b7\u53d6ecpm\u914d\u7f6e\u6210\u529f\uff1a"),t.ecpmObj=o.data,t.uploadAction("active",function(n){n?f.default.getItem(e)||f.default.setItem(e,(new Date).valueOf()+""):t.logi("\u4e0a\u62a5\u6fc0\u6d3b\u5931\u8d25")});var i=f.default.getItem(e);i=i?parseInt(i):(new Date).valueOf();var a=new Date(new Date(i).toLocaleDateString()).valueOf(),r=(new Date).valueOf()-a,s=Math.floor(r/24/60/60/1e3);if(s>=1&&s<=7){var c=["day2","day3","day4","day5","day6","day7","day8"][s-1];f.default.getItem("tt_event_"+c),console.log("\u4e0a\u62a5\u4e8b\u4ef6\uff1a"+c),t.uploadAction(c,function(t){t?(console.log("\u4e0a\u62a5\u4e8b\u4ef6\uff1a"+c+":\u6210\u529f"),f.default.setItem("oppo_event_"+c,"success")):console.log("\u4e0a\u62a5\u4e8b\u4ef6\uff1a"+c+":\u5931\u8d25")})}else console.log("\u4f20\u7684number\u4e0d\u80fd\u7528\uff1a"+s)}else-2==o.code?(t.canUpload=!1,t.logw("\u914d\u7f6e\u4e0d\u5b58\u5728 \uff01")):(t.logw("\u83b7\u53d6ecpm\u914d\u7f6e\u5931\u8d252\uff01"+n.msg),setTimeout(function(){t.getAdConfig()},5e3))}else t.logw("\u83b7\u53d6ecpm\u914d\u7f6e\u5931\u8d25\uff01"+n.msg),setTimeout(function(){t.getAdConfig()},5e3)})},fail:function(){setTimeout(function(){t.getAdConfig()},5e3)},complete:function(){}}):this.logi("\u7248\u672c\u4f4e \u4e0d\u80fd\u83b7\u53d6 \u5305\u540d\u4e86")},e.prototype.getDeviceId=function(t){var e=this;window.qg.getDeviceId?window.qg.getDeviceId({success:function(n){e.logi("deviceId get success: "+JSON.stringify(n)),n&&n.deviceId&&c.default.deviceid!=n.deviceId&&(c.default.deviceid=n.deviceId),t&&t(n.deviceId),e.logi(c.default.deviceid)},fail:function(n,o){e.loge("deviceId  get fail, code = "+o),t&&t(null)}}):(console.log("\u4e0d\u652f\u6301\u83b7\u53d6"),t&&t(null))},e.prototype.getGameInfo=function(){var t=this;window.qg.getManifestInfo&&window.qg.getManifestInfo({success:function(e){var n=JSON.parse(e.manifest);r.default.gameInfo={package:n.package,name:n.name,versionName:n.versionName,versionCode:n.versionCode},t.logi(JSON.stringify(r.default.gameInfo))}})},e.prototype._gameCd=function(){var t=this;(new s.default).once(function(){t.isGameCd=!1,t.isNeedShowBanner&&t.showBanner(null,null)},1e3*r.default.adConfig.adCdTime)},e.prototype.initNormalBanner=function(){var t=this;if(this.platformVersion()<1051||h.AdParams.oppo.banner.length<=0)this.logi("\u73af\u5883\u4e0d\u652f\u6301banner  \u6216\u8005banner\u5e7f\u544a\u53c2\u6570\u7a7a");else{this.destroyNormalBanner(),r.default.screenWidth,r.default.screenHeight;var e={};h.AdParams.oppo.bannerOnTop&&(e.top=0),this.bannerAd=window.qg.createBannerAd({adUnitId:h.AdParams.oppo.banner,style:e}),this.bannerAd.onError(function(e){t.loge("normal banner error: ",JSON.stringify(e))})}},e.prototype.showNormalBanner=function(t,e){var n=this;if(null==this.bannerAd&&this.initNormalBanner(),null==this.bannerAd)return this.logi("banner\u7a7a"),void(e&&e());this.bannerAd.show().then(function(){t&&t(),n.logi("normal banner show success"),r.default.adConfig.bannerUpdateTime<=0&&n.bannerTimer&&n.bannerTimer.stop()}).catch(function(t){e&&e(),n.loge("banner error",t)})},e.prototype.hideNormalBanner=function(){this.bannerAd&&this.bannerAd.hide()},e.prototype.destroyNormalBanner=function(){this.bannerAd&&this.bannerAd.destroy()},e.prototype.initBanner=function(){t.prototype.initBanner.call(this)},e.prototype.showBanner=function(t,e){if(this.isGameCd)return this.isNeedShowBanner=!0,e&&e(),void this.logi("showBanner \u5e7f\u544aCD\u4e2d");this.hideBanner(),this.showNormalBanner(t,e)},e.prototype.hideBanner=function(){t.prototype.hideBanner.call(this),this.isNeedShowBanner=!1,this.customBanner&&(this.customBanner.hide(),this.customBanner.destroy(),this.customBanner=null),this.hideNormalBanner()},e.prototype.initVideo=function(){var t=this;h.AdParams.oppo.video?(this.destroyVideo(),this.videoAd=window.qg.createRewardedVideoAd({adUnitId:this.videoArr.length>0?this.videoArr[this.videoNum]:h.AdParams.oppo.video}),this.videoAd.onLoad(function(){t.logi("video load succ")}),this.videoAd.onError(function(e){t.videoArr.length>0?(t.videoNum++,t.videoNum<t.videoArr.length?t.initVideo():(t.logi("video error: "+JSON.stringify(e),"color: red"),t._videoErrorEvent())):(t.logi("video error: "+JSON.stringify(e),"color: red"),t._videoErrorEvent())}),this.videoAd.onClose(function(e){e&&e.isEnded?(t.videoReward++,t.checkAdTarget(),t.videocallback&&t.videocallback(!0),t._videoCompleteEvent()):(t._videoCloseEvent(),t.videocallback&&t.videocallback(!1)),t.videoShowing=!1,t.videoAd.load()}),this.videoAd.load()):this.logi("video\u5e7f\u544a\u4f4d\u53c2\u6570\u7a7a")},e.prototype.showVideo=function(e,n){var o=this;if(void 0===n&&(n=""),this.get_time()-this.showVideoTime<5e3)e&&e(!1);else if(this.showVideoTime=this.get_time(),this.videoShowing)e&&e(!1);else{if(t.prototype.showVideo.call(this,null,n),this.videoShowing=!0,null==this.videoAd&&this.initVideo(),null==this.videoAd)return this.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),this.videoShowing=!1,this._videoErrorEvent(),void(e&&e(!1));this.videocallback=e,this.videoAd.show().then(function(){}).catch(function(){o._videoErrorEvent(),o.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),e&&e(!1),o.videoShowing=!1})}},e.prototype.destroyVideo=function(){this.videoAd&&(this.videoAd.offLoad(),this.videoAd.offError(),this.videoAd.offClose()),this.videoAd=null},e.prototype.create_ad=function(t){var e=this;return new Promise(function(n){var o="";if(t==u.ad_native_type.banner?o=h.AdParams.oppo.native_banner:t==u.ad_native_type.inter1?o=h.AdParams.oppo.native1:t==u.ad_native_type.inter2&&(o=h.AdParams.oppo.native2),""==o||void 0===o||null==o||e.is_limit_native_length(t)||e.platformVersion()<1051)return n(null);var i=window.qg.createNativeAd({adUnitId:o}),a=function(n){if(e.logi("native data load:"),n&&n.adList){var o=n.adList.pop();o.ad=i,o.type=t,e.add_native_data(o),e.logi("native data load succ:"+JSON.stringify(o)),i.offLoad(a)}};i.onLoad(a);var r=function(t){e.logi("native data error: "+JSON.stringify(t),"color: red"),i.offError(r)};i.onError(r),i.load(),setTimeout(n,500)})},e.prototype.create_custom_ad=function(t){var e="",n={};if(t==u.ad_native_type.banner?(e=h.AdParams.oppo.native_banner||h.AdParams.oppo.native_custom_banner,r.default.adConfig.useNative||(e=h.AdParams.oppo.native_custom_banner)):t==u.ad_native_type.inter1?(e=h.AdParams.oppo.native1||h.AdParams.oppo.native_custom1,r.default.adConfig.useNative||(e=h.AdParams.oppo.native_custom1)):t==u.ad_native_type.inter2&&(e=h.AdParams.oppo.native2||h.AdParams.oppo.native_custom2,r.default.adConfig.useNative||(e=h.AdParams.oppo.native_custom2)),t==u.ad_native_type.banner)h.AdParams.oppo.bannerOnTop&&(n.top=0);else{var o=.85*Math.min(r.default.screenWidth,r.default.screenHeight),i=o/16*15.125,a=(r.default.screenWidth-o)/2,s=(r.default.screenHeight-i)/2+150;n.width=o,n.left=a,n.top=s}return""==e||void 0===e||null==e||this.platformVersion()<1094?null:window.qg.createCustomAd({adUnitId:e,style:n})},e.prototype.initNativeAd=function(){var t=this;r.default.adConfig.useNative?(this.logi("\u4f7f\u7528\u539f\u751f\u81ea\u6e32\u67d3\u5e7f\u544a"),this.create_ad(u.ad_native_type.banner).then(function(){return t.create_ad(u.ad_native_type.inter1)}).then(function(){return t.create_ad(u.ad_native_type.inter2)}).then(function(){t.loop_get_native_data()})):this.logi("\u4f7f\u7528\u539f\u751f\u6a21\u677f\u5e7f\u544a")},e.prototype.showInterstitialNative=function(t,e,n,o){o&&o(),this.logi("\u4e0d\u4f7f\u7528\u8fd9\u4e2a\u5e7f\u544a")},e.prototype.hideInterstitialNative=function(){t.prototype.hideInterstitialNative.call(this)},e.prototype.showNativeInterstitial=function(t,e,n){var o=this;if(void 0===n&&(n=0),!window.ovad._boxShowing){if(window.ovad._boxShowing=!0,this.isGameCd)return e&&e(),void this.logi("showNativeInterstitial \u5e7f\u544aCD\u4e2d");window.ovad._boxShowing=!0,setTimeout(function(){o.privateShowInter(t,e)},r.default.isShenHe?0:1e3*n)}},e.prototype.privateShowInter=function(t,e){var n=this;if(this.get_time()-this.interShowTime<=1e3*r.default.adConfig.interTick||r.default.isShenHe)return this.logi("\u9650\u5236\u4e862"),window.ovad._boxShowing=!1,e&&e();this.hideNativeInterstitial();var o=null,i=0;if(r.default.adConfig.useNative?this.interIdx%2==1?(o=this.getLocalNativeData(u.ad_native_type.inter1),i=u.ad_native_type.inter1,null!=o&&void 0!==o||(o=this.getLocalNativeData(u.ad_native_type.inter2),i=u.ad_native_type.inter2)):(o=this.getLocalNativeData(u.ad_native_type.inter2),i=u.ad_native_type.inter2,null!=o&&void 0!==o||(o=this.getLocalNativeData(u.ad_native_type.inter1),i=u.ad_native_type.inter1)):this.interIdx%2==1?(o=this.create_custom_ad(u.ad_native_type.inter1),i=u.ad_native_type.inter1):(o=this.create_custom_ad(u.ad_native_type.inter2),i=u.ad_native_type.inter2),this.interIdx++,this.logi("\u663e\u793a:"+i),null==o||void 0===o)this.logi("native_data null"),window.ovad._boxShowing=!1,e&&e();else if(r.default.adConfig.useNative){this.logi("native inter ");var a=cc.instantiate(d.default.getRes("gx/prefab/ad/native_interstitial",cc.Prefab));this.nativeInter=a.getComponent("gx_native_interstitial"),this.nativeInter&&this.nativeInter.show(o,function(){n.interShowTime=n.get_time(),window.ovad._boxShowing=!0,t&&t()},function(){window.ovad._boxShowing=!1,e&&e()})}else{this.customInter&&(this.customInter.destroy(),this.customInter=null),this.logi("custom inter "),o.onHide(function(){if(window.cc){var t=cc.director.getScene().getChildByName("BLOCK");t&&t.destroy()}o&&o.offHide(),window.ovad._boxShowing=!1,e&&e()});try{o.show().then(function(){if(n.interShowTime=n.get_time(),window.cc&&!cc.director.getScene().getChildByName("BLOCK")){var e=new cc.Node;e.width=2e3,e.height=2e3,e.name="BLOCK",cc.director.getScene().addChild(e),e.zIndex=cc.macro.MAX_ZINDEX,e.addComponent(cc.BlockInputEvents);var i=cc.winSize;e.x=i.width/2,e.y=i.height/2;var a=0;e.on(cc.Node.EventType.TOUCH_START,function(){a++,console.log("\u89e6\u6478\u4e86"),4==a&&e.destroy()})}n.customInter=o,n.logi("show custom inter  success"),t&&t()}).catch(function(t){if(n.logi("show custom inter fail with:"+t.errCode+","+t.errMsg),window.ovad._boxShowing=!1,e&&e(),window.cc){var o=cc.director.getScene().getChildByName("BLOCK");o&&o.destroy()}})}catch(c){if(this.logi("catch error"),this.logi(c),window.ovad._boxShowing=!1,e&&e(),window.cc){var s=cc.director.getScene().getChildByName("BLOCK");s&&s.destroy()}}}},e.prototype.showOtherNativeInterstitial=function(t,e,n){var o=this;return void 0===n&&(n=0),r.default.gGB("af")?this.isGameCd?(e&&e(),void this.logi("showNativeInterstitial \u5e7f\u544aCD\u4e2d")):void s.default.once(function(){o.privateShowInter(t,e)},r.default.isShenHe?0:1e3*n):(this.logi("\u9650\u5236\u4e861"),void(e&&e()))},e.prototype.showNativeIcon=function(t){if(this.isGameCd)return this.logi("showNativeIcon \u5e7f\u544aCD\u4e2d");if(!r.default.adConfig.useNative)return this.logi("native\u65e0\u6cd5\u663e\u793a \u73b0\u5728\u662fcustom ");var e=u.ad_native_type.native_icon,n=h.AdParams.oppo.native_icon;n==h.AdParams.oppo.native1?e=u.ad_native_type.inter1:n==h.AdParams.oppo.native_banner&&(e=u.ad_native_type.banner);var o=this.getLocalNativeData(e);if(null==o||void 0===o)return this.logi("showNativeIcon \u6682\u65e0\u5e7f\u544a\u6570\u636e");var i=cc.instantiate(d.default.getRes("gx/prefab/ad/native_icon",cc.Prefab));this.nativeIcon=i.getComponent("gx_native_icon"),this.nativeIcon&&this.nativeIcon.show(t,o)},e.prototype.hideNativeIcon=function(){t.prototype.hideNativeIcon.call(this)},e.prototype.loop_get_native_data=function(){var t=this._native_data_cache.length<5?1e3*d.default.randomInt(15,20):3e4;setTimeout(this.initNativeAd.bind(this),t)},e.prototype.loop_get_custom_data=function(){var t=this._native_custom_inter_cache.length<5||this._native_custom_banner_cache.length<5?1e3*d.default.randomInt(15,20):3e4;setTimeout(this.initNativeAd.bind(this),t)},e.prototype.initGamePortal=function(){var t=this,e=this;this.supportGameBox()&&h.AdParams.oppo.gamePortal&&window.qg.createGamePortalAd&&(this.destroyGamePortal(),this.portalAd=window.qg.createGamePortalAd({adUnitId:h.AdParams.oppo.gamePortal}),this.portalAd.onLoad(function(){e.logi("game portal ad load succ")}),this.portalAd.onClose(function(){e._game_portal_hide&&t._game_portal_hide()}),this.portalAd.onError(function(t){e.logi("game portal ad error: "+JSON.stringify(t),"color: red")}))},e.prototype.showGamePortal=function(t,e,n){var o=this;return void 0===n&&(n=!0),this.supportGameBox()?(this.portalAd||this.initGamePortal(),this.portalAd?(this._game_portal_hide=e,void this.portalAd.load().then(function(){o.portalAd.show().then(function(){o.logi("show success"),o.hideBanner(),t&&t()}).catch(function(t){o.loge("showGamePortal show error:",t),e&&e(),n&&o.createToast("\u52aa\u529b\u52a0\u8f7d\u4e2d,\u8bf7\u7a0d\u540e\u518d\u8bd5~")})}).catch(function(t){o.loge("showGamePortal load error:",t),e&&e(),n&&o.createToast("\u52aa\u529b\u52a0\u8f7d\u4e2d,\u8bf7\u7a0d\u540e\u518d\u8bd5~")})):(e&&e(),void(n&&this.createToast("\u52aa\u529b\u52a0\u8f7d\u4e2d,\u8bf7\u7a0d\u540e\u518d\u8bd5~")))):e&&e()},e.prototype.destroyGamePortal=function(){this.portalAd&&(this.portalAd.destroy(),this.portalAd=null)},e.prototype.initGameBanner=function(){var t=this;window.qg.getSystemInfoSync().platformVersion>=1076&&h.AdParams.oppo.gameBanner&&window.qg.createGameBannerAd&&(this.destroyGameBanner(),this.gameBannerAd=window.qg.createGameBannerAd({adUnitId:h.AdParams.oppo.gameBanner}),this.gameBannerAd.onLoad(function(){t.logi("\u76d2\u5b50\u6a2a\u5e45\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")}),this.gameBannerAd.onError(function(e){t.logi(e)}))},e.prototype.showGameBanner=function(){var t=this;this.gameBannerAd||this.initGameBanner(),this.gameBannerAd&&this.gameBannerAd.show().then(function(){t.logi("show success")}).catch(function(e){t.logi("show fail with:"+e.errCode+","+e.errMsg)})},e.prototype.hideGameBanner=function(){this.gameBannerAd&&this.gameBannerAd.hide()},e.prototype.destroyGameBanner=function(){this.gameBannerAd&&(this.gameBannerAd.destroy(),this.gameBannerAd=null)},e.prototype.showAddDesktop=function(t,e){if(!this.addIconNode||void 0===this.addIconNode||!cc.isValid(this.addIconNode.node)){var n=cc.instantiate(d.default.getRes("gx/prefab/add_icon",cc.Prefab));this.addIconNode=n.getComponent("Gx_add_icon"),this.addIconNode&&this.addIconNode.show(t,e)}},e.prototype.hasAddDesktop=function(t,e,n){var o=this;this.platformVersion()>=1044&&window.qg.hasShortcutInstalled?window.qg.hasShortcutInstalled({success:function(n){o.logi(" hasShortcutInstalled "+(n?"has add":"can add")),0==n?t&&t():e&&e()},fail:function(t){o.loge(" hasShortcutInstalled error: "+JSON.stringify(t)),n&&n()},complete:function(){}}):n&&n()},e.prototype.addDesktop=function(t,e,n){var o=this;void 0===n&&(n=!0),this.platformVersion()>=1040&&window.qg.installShortcut?window.qg.installShortcut({success:function(){setTimeout(function(){o.hasAddDesktop(function(){e&&e()},function(){t&&t()})},1e3)},fail:function(t){o.loge(" installShortcut error: "+JSON.stringify(t)),e&&e(),n&&window.qg.showToast({title:"\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"none"})}}):e&&e()},e.prototype.login=function(t,e){this.platformVersion()>=1040&&window.qg.login&&window.qg.login({success:function(e){t&&t(e)},fail:function(t){e&&e(t)}})},e.prototype.reportAdClick=function(e){t.prototype.reportAdClick.call(this,e),r.default.uploadOcpx("gads")},e.prototype.openGameAd=function(){var t=this;!r.default.isShenHe&&r.default.adConfig.showBanner>0&&s.default.once(function(){t.clickNative()},1e3*r.default.adConfig.showBanner)},e.prototype.logi=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.LOG.apply(this,a(["[OppoAdapter]"],e))},e.prototype.loge=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.LOGE.apply(this,a(["[OppoAdapter]"],e))},e.prototype.logw=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.LOGW.apply(this,a(["[OppoAdapter]"],e))},e.prototype.showGameOverAD=function(){this.showVideo(function(){},"GxGameOverAd")},e.prototype.userFrom=function(t){if(window.testDataToServer&&testDataToServer.isAdUser)return t&&t(!0);t&&t(!1)},e.prototype.showPositionBanner=function(t,e,n,o){var i=this;if(this.hideBanner(),h.AdParams.oppo.banner){if(this.bannerAd=window.qg.createBannerAd({adUnitId:h.AdParams.oppo.banner,style:{left:t,top:e}}),this.bannerAd.onError(function(t){i.loge(" position normal banner error: ",JSON.stringify(t))}),null==this.bannerAd)return this.logi("position banner\u7a7a"),void(o&&o());this.bannerAd.show().then(function(){n&&n(),i.logi("position normal banner show success")}).catch(function(t){o&&o(),i.loge("position banner error",t)})}else o&&o()},e}(l.default);n.default=g,cc._RF.pop()},{"../../GxAdParams":"GxAdParams","../../GxGame":"GxGame","../../core/GxEnum":"GxEnum","../../core/GxGameUtil":"GxGameUtil","../../util/DataStorage":"DataStorage","../../util/GxTimer":"GxTimer","../../util/GxUtils":"GxUtils","../base/BaseAdapter":"BaseAdapter"}],QQAdapter:[function(t,e,n){"use strict";cc._RF.push(e,"d1748kdfvlEsq2gBEzIKbt2","QQAdapter");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var a=arguments[e],r=0,s=a.length;r<s;r++,i++)o[i]=a[r];return o};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../audio/GxAudioUtil"),s=t("../../GxGame"),c=t("../../util/GxTimer"),d=t("../../util/GxUtils"),l=t("../base/BaseAdapter"),u=t("../../GxAdParams"),h=t("../../util/DataStorage"),p=t("../../util/OpenDataUtil"),f=t("../../core/GxConstant"),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.customBanner=null,e.customInter=null,e.blockAdTimer=null,e.interShowCount=0,e.canshowovervideo=!1,e.canshowovervideo2=!1,e.isShowingVideo=!1,e.ismailiang=!1,e.appId="",e.openId="",e._shareToFriendCallback=null,e.isShowBlock=!1,e.blockShowCount=0,e.shuXinTime=-1,e}return i(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){var e=this;if(!this.isInitAd){this.isInitAd=!0;try{p.default.initChannel(f.default.IS_WECHAT_GAME?"wx":"qq")}catch(o){}if(this.initOpenId(),t.prototype.initAd.call(this),this.initBanner(),this.initVideo(),s.default.gGB("w")){var n=s.default.gGN("t",60);setTimeout(function(){e.canshowovervideo=!0},1e3*n)}s.default.gGB("c")&&(n=s.default.gGN("ct",60),setTimeout(function(){e.canshowovervideo2=!0,e.showVideo(function(){},"GxQQInitAd")},1e3*n))}},e.prototype.initOpenId=function(){var t=this;qq.onShareMessageToFriend(function(e){t.logi("\u5b9a\u5411\u5206\u4eab\u7ed3\u679c\uff1a"+e.success),e&&e.success?t.logi("\u5b9a\u5411\u5206\u4eab\u6210\u529f"):t.logi("\u5b9a\u5411\u5206\u4eab\u5931\u8d25"),t._shareToFriendCallback?console.log("\u53ef\u4ee5\u56de\u8c03"):console.log("\u4e0d\u53ef\u4ee5\u56de\u8c03\u4e86"),t._shareToFriendCallback&&t._shareToFriendCallback(e&&e.success)});var e=h.default.getItem("__gx_openId__","");if(e)return this.openId=e,this.logi("\u83b7\u53d6\u5230\u7f13\u5b58\u7684openId:"+this.openId),void this.initSubmsg();try{window.qq?this.appId=u.AdParams.qq.appId:this.appId=u.AdParams.wx.appId;var n=this;this.appId?(this.logi("\u83b7\u53d6\u5230appid:"+this.appId),qq.login({success:function(t){t.code?(n.logi("\u83b7\u53d6code\u6210\u529f\uff1a"+t.code),n.requestGet(f.default.Code2SessionUrl+"?appId="+n.appId+"&code="+t.code,function(t){n.logi(t.data),1==t.data.code?(n.openId=t.data.data.openid,n.logi("\u83b7\u53d6openid\u6210\u529f\uff1a"+n.openId),h.default.setItem("__gx_openId__",n.openId),n.initSubmsg()):n.logw("\u767b\u5f55\u5931\u8d25\uff01"+t.data.msg)},function(t){n.logw("\u767b\u5f55\u5931\u8d25\uff01"+t.errMsg),n.logw(t)})):n.logw("\u83b7\u53d6\u767b\u5f55code\u5931\u8d25\uff01"+t.errMsg)},fail:function(t){n.logw("qq login\u5931\u8d25\uff01"+t.errMsg)}})):n.logw("\u83b7\u53d6wx appid\u5931\u8d25\u6216\u8005 GxAdParams\u4e2d\u6ca1\u6709\u914d\u7f6ewx\u6216\u8005 qq\u7684appid")}catch(o){this.logw(o),this.logw("\u8bfb\u53d6project.config.json\u5931\u8d25")}},e.prototype.initsceneid=function(){var t=qq.getLaunchOptionsSync().scene;if(u.AdParams.qq.sceneidtest)var e=["2054","1011"];else e=["2054"];for(var n=0;n<=e.length-1;n++)t==e[n]?(console.log("\u662f\u4e70\u91cf\u7528\u6237"),this.ismailiang=!0):(console.log("\u662f\u666e\u901a\u7528\u6237"),this.ismailiang=!1)},e.prototype.showGameOverAD=function(){var t=this;if(s.default.gGB("w")&&1==this.canshowovervideo){this.showVideo(function(){},"GxQQGameOverAD"),this.canshowovervideo=!1;var e=s.default.gGN("t",60);setTimeout(function(){t.canshowovervideo=!0},1e3*e)}},e.prototype.initNormalBanner=function(t){var e=this;if(void 0===t&&(t=!1),!(u.AdParams.qq.banner.length<=0)){this.destroyNormalBanner();var n={width:300},o=qq.getSystemInfoSync(),i=o.screenHeight,a=o.screenWidth;u.AdParams.qq.bannerOnTop?(n.top=0,a>i&&(n.left=a/4)):(n.top=i-92,n.left=(a-.92*a)/2,n.width=.92*a),this.bannerAd=qq.createBannerAd({adUnitId:u.AdParams.qq.banner,style:n,adIntervals:Math.max(s.default.adConfig.bannerUpdateTime,30)}),t&&this.bannerAd.onLoad(function(){e.bannerAd.show().then(function(){e.logi("init end banner success")}).catch(function(){e.logi("init end banner error")})}),this.bannerAd.onError(function(t){e.loge("normal banner error: ",JSON.stringify(t)),e.loge("banner \u53c2\u6570\uff1a"+u.AdParams.qq.banner),!t||30002!=t.errCode&&1001!=t.errCode||(e.logi("\u9500\u6bc1banner"),e.destroyNormalBanner())});var r=this;this.bannerAd.onResize(function(t){console.log("banner onResize:"+t.width,t.height),console.log("banner onResize:"+(a-.4*a)/2),r.bannerAd.style.left<(a-t.width)/2&&(r.bannerAd.style.left=(a-t.width)/2),u.AdParams.qq.bannerOnTop||(r.bannerAd.style.top=i-t.height)})}},e.prototype.showNormalBanner=function(){this.initNormalBanner(!0)},e.prototype.hideNormalBanner=function(){this.bannerAd&&this.bannerAd.hide()},e.prototype.destroyNormalBanner=function(){this.bannerAd&&(this.bannerAd.destroy(),this.bannerAd=null)},e.prototype.initBanner=function(){t.prototype.initBanner.call(this)},e.prototype.showBanner=function(){var t=this;s.default.gGB("b")&&(this.hideBanner(),this.bannerDelayTimer=c.default.once(function(){s.default.adConfig.bannerUpdateTime>0&&(null==t.bannerTimer&&(t.bannerTimer=new c.default),t.bannerTimer&&t.bannerTimer.once(function(){t.showBanner()},1e3*s.default.adConfig.bannerUpdateTime)),t.showNormalBanner()},10))},e.prototype.hideBanner=function(){t.prototype.hideBanner.call(this),this.hideNormalBanner(),this.destroyCustomBanner()},e.prototype.initVideo=function(){var t=this;if(null!=u.AdParams.qq.video&&""!=u.AdParams.qq.video){this.destroyVideo(),this.logi("\u6fc0\u52b1\u53c2\u6570\uff1a"+u.AdParams.qq.video),this.videoAd=qq.createRewardedVideoAd({adUnitId:u.AdParams.qq.video});var e=this;this.videoAd.onLoad(function(){e.logi("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f")}),this.videoAd.onError(function(){e._videoErrorEvent()}),this.videoAd.onClose(function(n){if(r.default.setMusicVolume(1),r.default.setSoundVolume(1),n&&n.isEnded?(e.logi("\u6b63\u5e38\u64ad\u653e\u7ed3\u675f\uff0c\u53ef\u4ee5\u4e0b\u53d1\u6e38\u620f\u5956\u52b1"),t.videocallback&&t.videocallback(!0),t._videoCompleteEvent()):(t._videoCloseEvent(),t.videocallback&&t.videocallback(!1)),t.isShowingVideo=!1,t.canshowovervideo2&&(t.canshowovervideo2=!1,s.default.gGB("c"))){var o=s.default.gGN("ct",60);setTimeout(function(){t.canshowovervideo2=!0,t.showVideo(function(){},"GxQQGameEnd")},1e3*o)}t.videoAd.load()}),this.videoAd.load()}},e.prototype.showVideo=function(e,n){var o=this;if(void 0===n&&(n=""),this.isShowingVideo)e&&e(!1);else{if(t.prototype.showVideo.call(this,null,n),null==this.videoAd&&this.initVideo(),null==this.videoAd)return e&&e(!0),void this._videoErrorEvent();this.videocallback=e,this.videoAd.show().then(function(){r.default.setMusicVolume(0),r.default.setSoundVolume(0),o.isShowingVideo=!0}).catch(function(){o._videoErrorEvent(),o.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),o.initVideo()})}},e.prototype.destroyVideo=function(){this.videoAd&&(this.videoAd.offLoad(),this.videoAd.offError(),this.videoAd.offClose()),this.videoAd=null},e.prototype.showInterstitial=function(t,e){var n=this;if(null==u.AdParams.qq.inter||0==u.AdParams.qq.inter.length)return e&&e();this.destroyNormalInter(),this.interAd=qq.createInterstitialAd({adUnitId:u.AdParams.qq.inter});var o=this,i=function(){o.logi("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d"),n.interAd.offLoad(i)};this.interAd.onLoad(i),this.interAd.load().then(function(){n.logi("\u666e\u901a\u63d2\u5c4f\u52a0\u8f7d\u6210\u529f"),n.interShowTime=n.get_time(),n.interAd.show().then(function(){var i=function(){o.logi("\u5173\u95ed\u63d2\u5c4f"),o.interAd.offClose(i),e&&e()};n.interAd.onClose(i),t&&t()}).catch(function(t){n.logi(t),n.logi("\u666e\u901a\u63d2\u5c4f\u5c55\u793a\u5931\u8d25"),e&&e()})}).catch(function(t){n.interAd.offLoad(i),n.logi("\u666e\u901a\u63d2\u5c4f\u52a0\u8f7d\u5931\u8d25"+JSON.stringify(t)),e&&e()})},e.prototype.destroyNormalInter=function(){this.interAd&&(this.interAd.offLoad(),this.interAd.offError()),this.interAd=null},e.prototype.showInterstitialNative=function(t,e,n,o){this.loge("showInterstitialNative \u6ca1\u7528"),o&&o()},e.prototype.hideInterstitialNative=function(){t.prototype.hideInterstitialNative.call(this)},e.prototype.showNativeInterstitial=function(t,e,n){var o=this;if(void 0===n&&(n=0),this.get_time()-this.interShowTime<=1e3*s.default.adConfig.interTick)return e&&e();setTimeout(function(){o.hideNativeInterstitial(),o.showInterstitial(t,e)},s.default.isShenHe?0:1e3*n)},e.prototype.showOtherNativeInterstitial=function(t,e,n){void 0===n&&(n=0),s.default.gGB("w")?this.showNativeInterstitial(t,e,n):(this.logi("\u6807\u7b7e\u6ca1\u5230\u65f6\u95f4"),e&&e())},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this),this.destroyCustomInter()},e.prototype.showNativeIcon=function(){this.logi("showNativeIcon\u65e0")},e.prototype.hideNativeIcon=function(){t.prototype.hideNativeIcon.call(this)},e.prototype.initQQBlockAd=function(t,e,n,o,i){var a=this;if(void 0===n&&(n=!0),void 0===o&&(o=""),void 0===i&&(i=300),u.AdParams.qq.block){this.blockAd&&this.blockAd.destroy();var r=qq.getSystemInfoSync(),s=r.screenHeight,d=(r.screenWidth,u.AdParams.qq.block);this.blockShowCount%2==0?(d=u.AdParams.qq.block)&&0!=d.length||(d=u.AdParams.qq.block2):(d=u.AdParams.qq.block2)&&0!=d.length||(d=u.AdParams.qq.block),this.logi("block :"+d),this.blockShowCount++,this.blockAd=qq.createBlockAd({adUnitId:d,size:1,orientation:"landscape",style:{top:s/2,left:10}}),null==this.blockAdTimer&&(this.blockAdTimer=new c.default),this.blockAd.onLoad(function(){a.blockAd.show(),a.logi("QQ\u6e38\u620f\u79ef\u6728\u5e7f\u544a\u83b7\u53d6\u6210\u529f"),t&&t()}),this.blockAd.onError(function(t){a.logi("QQ\u6e38\u620f\u79ef\u6728\u5e7f\u544a\u83b7\u53d6\u5931\u8d25"),a.loge(t),e&&e()}),this.blockAd.onResize(function(){}),this.isShowBlock=!0,this.destorBlock(),this.shuaXinBlock()}else e&&e()},e.prototype.shuaXinBlock=function(){var t=this;this.shuXinTime=setTimeout(function(){t.initQQBlockAd()},5e3)},e.prototype.destorBlock=function(){(this.shuXinTime=null)&&clearInterval(this.shuXinTime)},e.prototype.showQQBlockAd=function(t,e,n,o,i){void 0===n&&(n=!1),void 0===o&&(o=""),void 0===i&&(i=300),this.isShowBlock?console.log("\u53ea\u80fd\u4e3b\u52a8\u8c03\u7528\u4e00\u6b21"):qq.createBlockAd&&u.AdParams.qq.block?this.initQQBlockAd(t,e,n,o,i):(e&&e(),this.logi("\u6682\u4e0d\u652f\u6301\u4e92\u63a8\u76d2\u5b50\u76f8\u5173 API"))},e.prototype.hideQQBlockAd=function(){this.blockAd&&this.blockAd.hide(),this.blockAdTimer&&this.blockAdTimer.clear(),this.blockAdTimer=null},e.prototype.destroyQQBlockAd=function(){this.blockAd&&(this.blockAdTimer&&this.blockAdTimer.clear(),this.blockAdTimer=null,this.blockAd.destroy(),this.blockAd=null)},e.prototype.initQQAppBox=function(t,e,n){void 0===n&&(n=!1)},e.prototype.showQQAppBox=function(t,e){var n=this;qq.createAppBox&&u.AdParams.qq.box?(null==this.appBox&&(this.appBox=qq.createAppBox({adUnitId:u.AdParams.qq.box})),this.appBox.load().then(function(){n.appBox.show().then(function(){n.logi("appBox button show success");var t=function(){n.logi("appbox close"),n.appBox.offClose(t),e&&e()};n.appBox.onClose(t)}).catch(function(t){n.logi("appBox \u5e7f\u544a\u663e\u793a\u5931\u8d25",t),e&&e()})}).catch(function(t){n.appBox=null,n.logi(t),n.logi("appbox\u52a0\u8f7d\u5931\u8d25"),e&&e()})):(e&&e(),this.logi("\u6682\u4e0d\u652f\u6301appBox\u76f8\u5173 API"))},e.prototype.hideQQAppBox=function(){this.destroyAppBox()},e.prototype.showGamePortal=function(){this.showQQAppBox(function(){},function(){})},e.prototype.destroyAppBox=function(){null!=this.appBox&&(this.appBox.offClose(),this.appBox.destroy()),this.appBox=null},e.prototype.showAddDesktop=function(t,e){if(!this.addIconNode||void 0===this.addIconNode||!cc.isValid(this.addIconNode.node,!0)){var n=cc.instantiate(d.default.getRes("gx/prefab/add_icon",cc.Prefab));this.addIconNode=n.getComponent("Gx_add_icon"),this.addIconNode&&this.addIconNode.show(e)}},e.prototype.hasAddDesktop=function(t,e,n){this.platformVersion()>=1041?qq.hasShortcutInstalled({success:function(n){n?e&&e():t&&t()},fail:function(){n&&n()}}):(this.logi("\u4e0d\u652f\u6301\u6dfb\u52a0\u684c\u9762"),n&&n())},e.prototype.addDesktop=function(t,e){qq.saveAppToDesktop?qq.saveAppToDesktop({success:function(){t()},fail:function(){e&&e()}}):e&&e()},e.prototype.login=function(t,e){this.platformVersion()>=1040&&qq.login({success:function(e){t&&t(e)},fail:function(t){e&&e(t)}})},e.prototype.destroyCustomBanner=function(){this.customBanner&&this.customBanner.destroy(),this.customBanner=null},e.prototype.destroyCustomInter=function(){this.customInter&&this.customInter.destroy(),this.customInter=null},e.prototype.logi=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.LOG.apply(this,a(["[QQAdapter]"],e))},e.prototype.loge=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.LOGE.apply(this,a(["[QQAdapter]"],e))},e.prototype.logw=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.LOGW.apply(this,a(["[QQAdapter]"],e))},e.prototype.shareMessageToFriend=function(t){console.log("qq\u8bbe\u7f6e\u56de\u8c03"),p.default.checkHasOpenData()?(this._shareToFriendCallback=t,t?console.log("\u8bbe\u7f6e\u4e86\u56de\u8c03"):console.log("\u6ca1\u6709\u8bbe\u7f6e\u56de\u8c03"),p.default.shareMessageToFriend()):t&&t(!1)},e.prototype.requestGet=function(t,e,n){qq.request({url:t,success:function(t){e&&e(t)},fail:function(t){n&&n(t)}})},e.prototype.getSubIds=function(){return u.AdParams.qq.subIds&&u.AdParams.qq.subIds.length>0?u.AdParams.qq.subIds:[]},e.prototype.initSubmsg=function(){var t=this;qq.uma&&qq.uma.setOpenid(this.openId),window.TDAPP&&(window.TDAPP.register({profileId:this.openId,profileType:1}),window.TDAPP.login({profileId:this.openId,profileType:1}));for(var e=this.getSubIds(),n=this,o=function(o){var a=e[o];i.requestGet(f.default.SubmsgBaseUrl+"/"+(f.default.IS_QQ_GAME?"qq":"wx")+"/checkSub?appId="+u.AdParams.qq.appId+"&openId="+i.openId+"&tmplId="+a,function(e){n.logi(e.data),1==e.data.code?e.data.data.subnum>0?t.logi("\u5df2\u8ba2\u9605\uff1a"+a):(t.logi("\u672a\u8ba2\u9605\uff1a"+a),t.waitSubIds.push(a)):(n.logw("\u83b7\u53d6\u5931\u8d25\uff01"+e.data.msg),t.waitSubIds.push(a))},function(e){n.logw("\u83b7\u53d6\u5931\u8d252\uff01"+e.errMsg),n.logw(e),t.waitSubIds.push(a)})},i=this,a=0;a<e.length;a++)o(a)},e.prototype.submsg=function(t,e){var n=this;this.requestGet(f.default.SubmsgBaseUrl+"/"+(f.default.IS_QQ_GAME?"qq":"wx")+"/subMsg?appId="+u.AdParams.qq.appId+"&openId="+this.openId+"&tmplId="+t,function(t){n.logi(t.data),1==t.data.code?(n.logi("\u8ba2\u9605\u6210\u529f"),e&&e(!0)):(n.logw("\u8ba2\u9605\u5931\u8d25\uff01"+t.data.msg),e&&e(!1))},function(t){n.logw("\u8ba2\u9605\u5931\u8d252\uff01"+t.errMsg),n.logw(t),e&&e(!1)})},e.prototype.setOpenDataShareCallback=function(t){this._shareToFriendCallback=t},e.prototype.userFrom=function(t){try{if(window.testDataToServer&&testDataToServer.isAdUser)return t&&t(!0);var e=h.default.getItem("__clickid__");if(e)return t&&t(!0);var n=qq.getLaunchOptionsSync(),o=n.scene;if(2054==o||"2054"==o)return t&&t(!0);var i=n.query;if(e=i.gdt_vid)return h.default.setItem("__clickid__",e),t&&t(!0);if(e=i.qz_gdt)return h.default.setItem("__clickid__",e),t&&t(!0);var a=i.weixinadinfo;return a&&a.weixinadinfo.split(".")[0]?t&&t(!0):t&&t(!1)}catch(r){t&&t(!1)}},e}(l.default);n.default=g,cc._RF.pop()},{"../../GxAdParams":"GxAdParams","../../GxGame":"GxGame","../../audio/GxAudioUtil":"GxAudioUtil","../../core/GxConstant":"GxConstant","../../util/DataStorage":"DataStorage","../../util/GxTimer":"GxTimer","../../util/GxUtils":"GxUtils","../../util/OpenDataUtil":"OpenDataUtil","../base/BaseAdapter":"BaseAdapter"}],ResUtil:[function(t,e,n){"use strict";cc._RF.push(e,"96e6eE0CRlOloFdAq9PbKCb","ResUtil"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("./GxLog"),i=function(){function t(){}return t.loadPrefab=function(t,e){cc.resources?cc.resources.load(t,cc.Prefab,function(n,o){n&&console.error("[gx_game] "+t+" loadPrefab Failed"+n),e&&e(n,o)}):cc.loader?cc.loader.loadRes(t,cc.Prefab,function(n,o){n&&console.error("[gx_game] "+t+" loadPrefab Failed"+n),e&&e(n,o)}):e&&e("no loader",null)},t.loadJsonAsset=function(t,e){cc.resources?cc.resources.load(t,cc.JsonAsset,function(n,o){n&&console.error("[gx_game] "+t+" loadJsonAsset Failed"+n),e&&e(n,o)}):cc.loader?cc.loader.loadRes(t,cc.JsonAsset,function(n,o){n&&console.error("[gx_game] "+t+" loadJsonAsset Failed"+n),e&&e(n,o)}):e&&e("no loader",null)},t.loadSprite=function(t,e){if(cc.resources)cc.resources.load(t,cc.SpriteFrame,function(n,o){n&&console.error("[gx_game] "+t+" loadSprite Failed"+n),e&&e(n,o)});else if(cc.loader)cc.loader.loadRes(t,cc.SpriteFrame,function(n,o){n&&console.error("[gx_game] "+t+" loadSprite Failed"+n),e&&e(n,o)});else if(window.Laya){var n=window.Laya;n.loader.load("gameass/background.png",n.Handler.create(this,function(t){console.log("ok"),e&&e("",t)}))}else e&&e("no loader",null)},t.loadResDir=function(t,e){return new Promise(function(n,i){cc.resources?cc.resources.loadDir(t,e,function(e,a){if(e)return o.default.e("\u52a0\u8f7d\u5931\u8d25",t),i(e);n(a)}):cc.loader.loadResDir(t,e,function(e,a){if(e)return o.default.e("\u52a0\u8f7d\u5931\u8d25",t),i(e);n(a)})})},t.loadRemoteSpiteFrame=function(t,e){if(!t.startsWith("http"))return o.default.w("\u52a0\u8f7d\u56fe\u7247\u5730\u5740\u4e0d\u5bf9\uff1a"+t),void e("\u52a0\u8f7d\u56fe\u7247\u5730\u5740\u4e0d\u5bf9",null);var n=t.toLowerCase();n.endsWith(".jpg")||n.endsWith(".png")||n.endsWith(".gif")?cc.assetManager?cc.assetManager.loadRemote(t,function(t,n){e(t,n?new cc.SpriteFrame(n):null)}):cc.loader.load(t,function(t,n){t&&console.log(t),e&&e(t,n?new cc.SpriteFrame(n):null)}):cc.assetManager?cc.assetManager.loadRemote(t,{ext:".png"},function(t,n){e(t,n?new cc.SpriteFrame(n):null)}):cc.loader.load({url:t,type:"png"},function(t,n){t&&console.log(t),e&&e(t,n?new cc.SpriteFrame(n):null)})},t}();n.default=i,cc._RF.pop()},{"./GxLog":"GxLog"}],TDSDK:[function(t,e,n){"use strict";cc._RF.push(e,"9021fHZaMND5bSvMnngFXEd","TDSDK"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){this.logList=[],this.refreshMockDataStatus=1,this.readLastSessionStatus=1,this.refreshSessionStatus=1,this.lastMockData=null,this.pageLeaveTimer=null,this.heartBeat_timer=null,this.fetchList=[],this.initTime=(new Date).getTime(),this.pageEnterTime=(new Date).getTime(),this.lastPage=null,this.from=null,this.debug=!0,this.inited=!1,this.needInitEvent=!1,this.logPath="internal://files/tdlog/",this.uploadUrl="https://ap.3edc.cn/q/a/v1",this.defaultPageName="game",this.mock_data={action:{},device:{type:"mobile",deviceId:{tid:""},hardwareConfig:{brightness:100,cpu:{coreNum:4,name:"cpuName"},totalDiskSpace:1e5,manufacture:"manufacture",brand:"brand",model:"model",pixel:"720*1280*1"},softwareConfig:{os:"osType",osVersionName:"osVersionName",osVersionCode:"osVersionCode",language:"zh",locale:"CN",platformVersionName:"platformVersionName",platformVersionCode:"platformVersionCode"},runtimeConfig:{freeDiskSpace:1e4,batteryLevel:1,batteryState:!1}},networks:[{type:"wifi",available:!1,connected:!1},{type:"cellular",available:!1,connected:!1,current:[]}],locations:[{lat:100,lng:30}],appContext:{sessionStartTime:0,sessionId:"",account:{accountId:"",type:0}},app:{appKey:"",channel:"quickapp",globalId:"com.package.name",displayName:"",versionName:"",versionCode:"",installTime:""},sdk:{from:1,version:1,minorVersion:0,build:9,platform:"quickapp",framework:"quickapp"},ts:"xxxxx"}}return t.getInstance=function(){return null!==this.instance&&null!=this.instance||(this.instance=new t),this.instance},t.prototype.initApp=function(t,e,n,o){this.mock_data.app.globalId=t,this.mock_data.app.displayName=e,this.mock_data.app.versionName=n,this.mock_data.app.versionCode=o},t.prototype.init=function(t,e,n){var o=this;if(void 0===n&&(n=null),t)if(e)if(n||console.warn("td openId\u4e3a\u7a7a\u5c06\u9ed8\u8ba4\u751f\u6210"),this.inited)this.log("init end");else{this.mock_data.app.appKey=t,this.mock_data.app.channel=e,this._setInstallTime(),n||(n=this.getItem("deviceId",""))||(n=this.uuid(32)),this.setItem("deviceId",n),this.defaultPageName=e,this.mock_data.device.deviceId.tid=n,this.log("this.quickInit called ");try{if(this.inited=!0,this.needInitEvent=!0,this.readLastSession(),this._refreshMockData(),this.lastMockData&&this.lastMockData.appContext&&this.lastMockData.appContext.sessionId&&this.lastMockData.appContext.sessionStartTime>0){var i=this.getItem("lastPage","");if(i&&(this.setItem("lastPage",""),i=this._jsonParse(i),this.lastPage=i),this.lastPage&&this.lastPage.leaveTime>0){var a=JSON.parse(JSON.stringify(this.lastMockData)),r=parseInt((this.lastPage.leaveTime-this.lastMockData.appContext.sessionStartTime)/1e3+"");a.action={domain:"session",name:"end",data:{start:this.lastMockData.appContext.sessionStartTime,duration:r}},a.ts=(new Date).getTime();var s=[];s.push(a),this.save4Fetch(s)}}this.startNewSession(!0),setTimeout(function(){o._migrate()},5e3)}catch(i){console.log("\u521d\u59cb\u5316\u5185\u5bb9\u9519\u8bef~~",i)}this.updateBasedataInStorage(this.mock_data),this.pageEnter(this.defaultPageName),setInterval(function(){o.pageLeave(o.defaultPageName),setTimeout(function(){o.pageEnter(o.defaultPageName)},10)},5e3),setInterval(function(){o.reportSession()},1e4)}else console.error("td tdChannel\u4e3a\u7a7a \u521d\u59cb\u5316td\u5931\u8d25");else console.error("td appkey\u4e3a\u7a7a   \u521d\u59cb\u5316td\u5931\u8d25")},t.prototype.reportSession=function(){if(this.mock_data.appContext.sessionStartTime>0){var t=(new Date).getTime(),e=JSON.parse(JSON.stringify(this.mock_data)),n=parseInt((t-this.mock_data.appContext.sessionStartTime)/1e3+"");e.action={domain:"session",name:"end",data:{start:this.mock_data.appContext.sessionStartTime,duration:n}},e.ts=t;var o=[];o.push(e),this.save4Fetch(o),this.startNewSession(!1)}},t.prototype.random=function(){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",e=t.length,n="",o=0;o<12;o++)n+=t.charAt(Math.floor(Math.random()*e));return n},t.prototype.uuid=function(t){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),n=[],o=e.length,i=0;i<t;i++)n[i]=e[0|Math.random()*o];return n.join("")},t.prototype.setItem=function(t,e){t="td_"+t,window.cc?cc.sys.localStorage.setItem(t,e):window.Laya?Laya.LocalStorage.setItem(t,e):console.warn("td\u4fdd\u5b58\u5931\u8d25")},t.prototype.getItem=function(t,e){void 0===e&&(e=""),t="td_"+t;var n="";return window.cc?n=cc.sys.localStorage.getItem(t):window.Laya?n=Laya.LocalStorage.getItem(t):console.warn("td\u83b7\u53d6\u5931\u8d25"),n||e},t.prototype.save4Fetch=function(t){t&&"object"==typeof t&&(Array.isArray(t)||(t=[t]),t=JSON.stringify(t),this.logList.push({uri:this.logPath+"event_"+(new Date).getTime()+Math.random(),text:t}))},t.prototype.fetch=function(){this.log("tdsdk-fetching");for(var t=this.logList.length;t>0;){var e=this.logList.shift();t--;var n=new XMLHttpRequest;n.open("POST",this.uploadUrl,!0),n.setRequestHeader("content-type","application/json"),n.onreadystatechange=function(){4==n.readyState&&("application/json"===n.getResponseHeader("content-type")?JSON.parse(n.responseText):console.log(n.responseText))},n.send(e.text)}},t.prototype.heartBeat=function(){var t=this;clearInterval(this.heartBeat_timer),this.fetch(),this.heartBeat_timer=setInterval(function(){t.fetch()},3e3)},t.prototype._jsonParse=function(t){var e=null;try{t&&(e=JSON.parse(t))}catch(t){console.log(t)}return e},t.prototype.readLastSession=function(){this.readLastSessionStatus=2;var t=this.getItem("model_base_data","");if(t){if(t=this._jsonParse(t)){this.lastMockData=t;var e=JSON.parse(JSON.stringify(t.appContext));if(e.account&&"string"==typeof e.account.type)try{for(var n in this.ProfileType)if(this.ProfileType[n]==e.account.type){e.account.type=n;break}}catch(t){}this.mock_data.appContext=e}else this.log("no last session data");this.readLastSessionStatus=3}else this.lastMockData=null,this.readLastSessionStatus=3},t.prototype._migrate=function(){this.log("migrate"),this.log("migrate:no data")},t.prototype.quickDestory=function(){clearInterval(this.heartBeat_timer)},t.prototype.log=function(t){this.debug&&console.log("tdsdk",t)},t.prototype._setInstallTime=function(){var t=(new Date).getTime(),e=this.getItem("TDSDK_installTime","");e?e=Number(e):this.setItem("TDSDK_installTime",t),this.mock_data.app.installTime=e},t.prototype._refreshMockData=function(){this.refreshMockDataStatus=3},t.prototype.handleAppInit=function(){var t=JSON.parse(JSON.stringify(this.mock_data));t.action={domain:"app",name:"init",data:{first:null==this.lastMockData}},t.ts=(new Date).getTime(),this.save4Fetch(t)},t.prototype.handleNeWSession=function(){var t=JSON.parse(JSON.stringify(this.mock_data));t.action={domain:"session",name:"begin",data:{interval:this.lastPage?parseInt(((new Date).getTime()-this.lastPage.leaveTime)/1e3+""):0}},t.ts=(new Date).getTime(),this.save4Fetch(t)},t.prototype.pageLeave=function(t){try{var e;clearInterval(this.heartBeat_timer),this.inited?(this.log("call pageLeave"),e={name:t,leaveTime:(new Date).getTime(),startTime:this.pageEnterTime},this.lastPage=e,this.setItem("lastPage",JSON.stringify(e)),clearTimeout(this.pageLeaveTimer),this.pageLeaveTimer=setTimeout(function(){this.refreshSessionStatus=2},100)):console.log("\u6ca1\u6709\u8c03\u7528init\u4e8b\u4ef6")}catch(t){console.log("pageLeave-error:",t)}},t.prototype.selfEvent=function(t,e,n,o){var i=this;void 0===e&&(e=""),void 0===n&&(n={}),void 0===o&&(o=-100);var a={eventId:t};e&&(a.label=e),n&&"object"==typeof n&&Object.keys(n).length>0&&(a.params=n),-100!=o&&(a.value=o);try{var r,s;this.inited?a&&(a.eventId||/0/.test(a.eventId))&&(r={ts:(new Date).getTime(),param:a},3===this.refreshMockDataStatus&&3===this.refreshSessionStatus?this._doSelfEvent(r):s=setInterval(function(){3==i.refreshMockDataStatus&&3===i.refreshSessionStatus&&(clearInterval(s),i._doSelfEvent(r))},50)):console.log("\u6ca1\u6709\u8c03\u7528init\u4e8b\u4ef6")}catch(a){console.log(a)}},t.prototype._doSelfEvent=function(t){var e=t.param,n=JSON.parse(JSON.stringify(this.mock_data));if(n.action={domain:"appEvent",name:e.eventId||""},(e.label||/0/.test(e.label))&&(n.action.data=n.action.data||{},n.action.data.eventLabel=e.label),void 0!==e.value){if("number"!=typeof e.value||isNaN(e.value))return void console.error("param \u4e2dvalue\u53ea\u80fd\u4e3anumber");n.action.data=n.action.data||{},n.action.data.value=e.value,delete e.value}if(e.params){n.action.data=n.action.data||{},n.action.data.eventParam={};var o,i=0;for(o in e.params)""!==e.params[o]&&(n.action.data.eventParam[o]=e.params[o],i++);0==i&&delete n.action.data.eventParam}var a,r=0;for(a in n.action.data)r++;0==r&&delete n.action.data,n.ts=t.ts,this.save4Fetch(n)},t.prototype.pageEnter=function(t){var e=this;try{var n;this.inited?(clearTimeout(this.pageLeaveTimer),this.log("call pageEnter"),this.pageEnterTime=(new Date).getTime(),3===this.refreshMockDataStatus&&3==this.readLastSessionStatus?this.sendLastPageLeave(t):n=setInterval(function(){3==e.refreshMockDataStatus&&3==e.readLastSessionStatus&&(clearInterval(n),e.sendLastPageLeave(t))},50),this.heartBeat()):console.log("\u6ca1\u6709\u8c03\u7528init\u4e8b\u4ef6")}catch(t){console.log("pageEnter_error:",t)}},t.prototype.handlePageEnter=function(t){this.log("call handlePageEnter"),this.refreshSessionStatus=3,this.pageEnterTime=(new Date).getTime();var e=JSON.parse(JSON.stringify(this.mock_data));e.action={domain:"page",name:"enter",data:{name:t,startTime:this.pageEnterTime,from:""}},e.ts=(new Date).getTime(),this.from&&(e.action.data.from=this.from),this.from="fromStateName",this.save4Fetch(e)},t.prototype.sendLastPageLeave=function(t){if(this.lastPage)this.calculateLastPage(t);else{var e=this.getItem("lastPage","");e?(this.setItem("lastPage",""),e=this._jsonParse(e),this.lastPage=e,this.calculateLastPage(t)):(this.startNewSession(!0),this.handlePageEnter(t),this.lastMockData=this.mock_data)}},t.prototype.calculateLastPage=function(t){var e,n,o=this.lastPage,i=(new Date).getTime()-o.leaveTime,a=(this.log("gap:"+i),3e4<i?this.lastMockData:this.mock_data);null!=a&&((n=JSON.parse(JSON.stringify(a))).action={domain:"page",name:"leave",data:{name:o.name,duration:parseInt((o.leaveTime-o.startTime)/1e3+""),startTime:o.startTime,from:""}},n.ts=(new Date).getTime(),(e=[]).push(n),this.save4Fetch(e)),3e4<i?this.startNewSession(!0):(this.needInitEvent&&(this.needInitEvent=!1,this.handleAppInit()),this.setItem("model_base_data",JSON.stringify(this.mock_data))),this.lastMockData=this.mock_data,this.handlePageEnter(t)},t.prototype.startNewSession=function(t){var e=(new Date).getTime();this.mock_data.appContext=this.mock_data.appContext||{sessionStartTime:0,sessionId:"",account:{accountId:"",type:0}},this.mock_data.appContext.sessionStartTime=e,this.mock_data.appContext.sessionId="quickapp-".concat(e+"","-").concat(this.random()),t&&(this.needInitEvent=!1,this.handleAppInit()),this.handleNeWSession(),this.setItem("model_base_data",JSON.stringify(this.mock_data))},t.prototype.setTDProfile=function(t,e){if(t&&"object"==typeof t)if("update"===e||t.accountId||/0{1}/.test(t.accountId))if("update"!==e&&"number"!=typeof t.accountType)console.warn("accountType\u4e3a\u5fc5\u586b!");else{var n,o={accountId:"",type:0},i=(!this.mock_data.appContext.account||"update"!=e&&t.accountId!=this.mock_data.appContext.account.accountId||(o=JSON.parse(JSON.stringify(this.mock_data.appContext.account))),{_setProfileId:function(t,e){if(!e&&!/0{1}/.test(e))return"accountId\u4e3a\u5fc5\u586b\u5b57\u6bb5\uff01";t.accountId=e},_setProfileType:function(t,e){if("number"!=typeof e||e!=e||e<-1||6<e&&e<11||20<e)return"\u8bf7\u4e0a\u4f20\u6b63\u786e\u7684accountType";t.type=e},_setName:function(t,e){if("string"!=typeof e)return"account name \u7c7b\u578b\u9519\u8bef";t.name=e},_setAge:function(t,e){if("number"!=typeof e||e!=e)return"profile age \u7c7b\u578b\u9519\u8bef";t.age=e},_setGender:function(t,e){if(0!==e&&1!==e&&2!==e)return"profile gender \u7c7b\u578b\u9519\u8bef";t.gender=e},_setProperty:function(t,e,n){if("number"==typeof n&&n!=n||"string"!=typeof n&&"number"!=typeof n)return"profile property \u7c7b\u578b\u9519\u8bef";t[e]=n}}),a={accountId:"_setProfileId",accountType:"_setProfileType",name:"_setName",gender:"_setGender",age:"_setAge"},r=new RegExp("^property[1-9]$");for(n in t){var s=t[n],c=a[n];if(!c||"update"===e&&"accountId"===n){if(r.test(n)||"property10"===n){var d=i._setProperty(o,n,s);if(d)return void console.log(d)}}else if(d=i[c](o,s))return void console.log(d)}this.mock_data.appContext.account=o,"login"!=e&&"register"!=e&&"update"!=e||this._genProfileEvent(t,e),this.updateBasedataInStorage(this.mock_data)}else console.warn("accountId \u4e3a\u5fc5\u586b!");else console.warn("account\u4fe1\u606f\u4e3a\u5fc5\u586b\uff01")},t.prototype.login=function(t){var e,n=this;3==this.readLastSessionStatus&&3==this.refreshMockDataStatus?this.setTDProfile(t,"login"):e=setInterval(function(){3==n.readLastSessionStatus&&3==n.refreshMockDataStatus&&(clearInterval(e),n.setTDProfile(t,"login"))},50)},t.prototype.register=function(t){var e,n=this;3==this.readLastSessionStatus&&3==this.refreshMockDataStatus?this.setTDProfile(t,"register"):e=setInterval(function(){3==n.readLastSessionStatus&&3==n.refreshMockDataStatus&&(clearInterval(e),n.setTDProfile(t,"register"))},50)},t.prototype.updateProfile=function(t){var e,n=this;3==this.readLastSessionStatus&&3==this.refreshMockDataStatus?this.setTDProfile(t,"update"):e=setInterval(function(){3==n.readLastSessionStatus&&3==n.refreshMockDataStatus&&(clearInterval(e),n.setTDProfile(t,"update"))},50)},t.prototype._genProfileEvent=function(t,e){var n=JSON.parse(JSON.stringify(this.mock_data));n.action={domain:"account",name:e,data:t},n.ts=(new Date).getTime(),this.save4Fetch(n)},t.prototype.updateBasedataInStorage=function(t){var e=this.getItem("model_base_data","");e&&(e=this._jsonParse(e),t.device=e.device,this.setItem("model_base_data",JSON.stringify(t)))},t.prototype._isObject=function(t){return t&&"object"==typeof t},t.prototype._isStrNotEmpty=function(t){return t||/0{1}/.test(t)},t.prototype._isNumber=function(t){return"number"==typeof t&&t==t},t.prototype._isCurrencyTypeAvailabal=function(t){return t&&"string"==typeof t&&3===t.length},t.prototype._checkIapParam=function(t){return this._isObject(t)?this._isStrNotEmpty(t.orderId)?this._isNumber(t.amount)?!!this._isCurrencyTypeAvailabal(t.currencyType)||(console.warn("\u8bf7\u8f93\u5165\u6b63\u786e\u7684currencyType!"),!1):(console.warn("\u8bf7\u8f93\u5165\u6b63\u786e\u7684amount!"),!1):(console.warn("\u8bf7\u8f93\u5165\u6b63\u786e\u7684orderId!"),!1):(console.warn("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u53c2\u6570!"),!1)},t.prototype.onPlaceOrder=function(t){var e,n=this;this.inited?this._checkIapParam(t)&&(3===this.refreshMockDataStatus&&3===this.refreshSessionStatus?this._genIapEvent(t,"placeOrder"):e=setInterval(function(){3==n.refreshMockDataStatus&&3===n.refreshSessionStatus&&(clearInterval(e),n._genIapEvent(t,"placeOrder"))},50)):console.log("\u6ca1\u6709\u8c03\u7528init\u4e8b\u4ef6")},t.prototype.onOrderPaySucc=function(t){var e,n,o=this;this.inited?this._checkIapParam(t)&&((e=JSON.parse(JSON.stringify(t))).paymentType&&this._isStrNotEmpty(e.paymentType)&&(e.payType=e.paymentType),delete e.paymentType,3===this.refreshMockDataStatus&&3===this.refreshSessionStatus?this._genIapEvent(t,"pay"):n=setInterval(function(){3==o.refreshMockDataStatus&&3===o.refreshSessionStatus&&(clearInterval(n),o._genIapEvent(t,"pay"))},50)):console.log("\u6ca1\u6709\u8c03\u7528init\u4e8b\u4ef6")},t.prototype.onCancelOrder=function(t){var e,n=this;this.inited?this._checkIapParam(t)&&(3===this.refreshMockDataStatus&&3===this.refreshSessionStatus?this._genIapEvent(t,"cancelOrder"):e=setInterval(function(){3==n.refreshMockDataStatus&&3===n.refreshSessionStatus&&(clearInterval(e),n._genIapEvent(t,"cancelOrder"))},50)):console.log("\u6ca1\u6709\u8c03\u7528init\u4e8b\u4ef6")},t.prototype._genIapEvent=function(t,e){var n=JSON.parse(JSON.stringify(this.mock_data));n.action={domain:"iap",name:e,data:t},n.ts=(new Date).getTime(),this.save4Fetch(n)},t}();n.default=o,cc._RF.pop()},{}],TTAdMonitor:[function(t,e,n){"use strict";cc._RF.push(e,"6b46d7X989Hyorhk6xVH+cw","TTAdMonitor");var o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var a=arguments[e],r=0,s=a.length;r<s;r++,i++)o[i]=a[r];return o};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../GxAdParams"),a=t("../../util/DataStorage"),r=t("./TTAdapter"),s=function(){function t(){this.checkInterval=30,this.tryGetCount=0,this.clickId="",this.gameTime=0,this.videoReward=0,this.reported=!1,this.checkAdTargetTimeout=-1,this.gameTimeEnd=!1,this._openId="",this.ecpmObj={targetEcpm:300,gameTime:10,targetVideo:2}}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.initAdMonitor=function(t){var e=this;this._openId=t,console.log("\u83b7\u53d6\u5230\u7684clickId:"+this.getClickId()),this.getAdConfig();var n=setInterval(function(){e.gameTime+=e.checkInterval,e.gameTime>=60*e.ecpmObj.gameTime&&!e.gameTimeEnd&&(e.gameTimeEnd=!0,e.checkAdTarget(),clearInterval(n))},5e3);setTimeout(function(){e.checkAdTarget()},1e3*this.checkInterval)},t.prototype.rewardAdEnd=function(){this.videoReward++,this.checkAdTarget()},t.prototype.getAdConfig=function(){if(this.tryGetCount++,!(this.tryGetCount>=11)){var t=this;r.default.getInstance().requestPost("https://api.sjzgxwl.com/tt/getConfigNew?appId="+i.AdParams.tt.appId+"&openId="+t._openId,{launchOptions:tt.getLaunchOptionsSync()},function(e){t.logi(e.data),1==e.data.code?(t.logi("\u83b7\u53d6ecpm\u914d\u7f6e\u6210\u529f\uff1a"),t.ecpmObj=e.data.data.content,e.data.data.clickid&&(t.clickId=e.data.data.clickid),t.ttReport()):(t.logw("\u83b7\u53d6ecpm\u914d\u7f6e\u5931\u8d25\uff01"+e.data.msg),setTimeout(function(){t.getAdConfig()},2e3))},function(e){t.logw("\u83b7\u53d6ecpm\u914d\u7f6e\u5931\u8d25\uff01"+e.errMsg),setTimeout(function(){t.getAdConfig()},2e3)})}},t.prototype.ttReport=function(){var t=this;a.default.getItem("tt_event_active"),this.sendToTAQ("active",function(e){e?(console.log("\u4e0a\u62a5\u6fc0\u6d3b\u6210\u529f"),a.default.setItem("__clickid__",t.getClickId()),a.default.setItem("tt_event_active","success"),a.default.getItem("tt_install_time")||a.default.setItem("tt_install_time",(new Date).valueOf()+"")):console.log("\u4e0a\u62a5\u6fc0\u6d3b\u5931\u8d25")});var e=a.default.getItem("tt_install_time");e=e?parseInt(e):(new Date).valueOf();var n=new Date(new Date(e).toLocaleDateString()).valueOf(),o=(new Date).valueOf()-n,i=Math.floor(o/24/60/60/1e3);if(i>=1&&i<=6){var r=["next_day_open","retention_3d","retention_4d","retention_5d","retention_6d","retention_7d"][i-1];a.default.getItem("tt_event_"+r),console.log("\u4e0a\u62a5\u4e8b\u4ef6\uff1a"+r),this.sendToTAQ(r,function(t){t?(console.log("\u4e0a\u62a5\u4e8b\u4ef6\uff1a"+r+":\u6210\u529f"),a.default.setItem("tt_event_"+r,"success")):console.log("\u4e0a\u62a5\u4e8b\u4ef6\uff1a"+r+":\u5931\u8d25")})}else console.log("\u4f20\u7684number\u4e0d\u80fd\u7528\uff1a"+i)},t.prototype.logi=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.log.apply(console,o(["[TTAdMonitor]"],t))},t.prototype.loge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.error.apply(console,o(["[TTAdMonitor]"],t))},t.prototype.logw=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.warn.apply(console,o(["[TTAdMonitor]"],t))},t.prototype.checkAdTarget=function(){var t=this;clearTimeout(this.checkAdTargetTimeout),this._checkAdTarget(),this.checkAdTargetTimeout=setTimeout(function(){t.checkAdTarget()},1e3*this.checkInterval)},t.prototype.sendToTAQ=function(t,e){if(!this.getClickId())return console.warn("clickId\u7a7a  \u4e0d\u4e0a\u62a5 \u4e86"),void e(!1);var n=this;r.default.getInstance().requestPost("https://api.sjzgxwl.com/tt/report?appId="+i.AdParams.tt.appId+"&eventType="+t+"&openId="+n._openId+"&clickId="+this.getClickId(),{launchOptions:tt.getLaunchOptionsSync()},function(t){n.logi(t.data),1==t.data.code?e(!0):e(!1)},function(){e(!1)})},t.prototype.getClickId=function(){if(this.clickId)return this.clickId;var t=tt.getLaunchOptionsSync(),e=t.query,n=e.clickid;if(n);else{var o=e.ad_params;if(o&&(n=o.clickid),n);else{var i=t.ad_params;n=i?i.clickid:a.default.getItem("__clickid__")}}return n},t.prototype._checkAdTarget=function(){if(this.gameTime>=60*this.ecpmObj.gameTime&&this.videoReward>=this.ecpmObj.targetVideo||window.rywDEBUG){if("true"==a.default.getItem("__ttTaq__"))return void console.log("\u672c\u5730\u5df2\u7ecf\u6709\u4e0a\u62a5\u8bb0\u5f55\u4e86");if(this.reported)return void console.log("\u6b63\u5728\u4e0a\u62a5");this.reported=!0;var t=new Date,e=([t.getFullYear()+"\u5e74",t.getMonth()+1+"\u6708",t.getDate()+"\u65e5"].join("-"),this);if(0==e.ecpmObj.targetEcpm)return void e.sendToTAQ("game_addiction",function(t){t||(e.reported=!1)});r.default.getInstance().requestPost("https://api.sjzgxwl.com/tt/getEcpm?appId="+i.AdParams.tt.appId+"&openId="+e._openId,{launchOptions:tt.getLaunchOptionsSync()},function(t){if(e.logi(t.data),1==t.data.code){e.logi("\u83b7\u53d6ecpm\u6210\u529f\uff1a");for(var n=t.data.data.records,o=n.length,i=0,a=0;a<o;a++)i+=n[a].cost;console.log("\u603b\u5171\u7684const:"+i);var r=i/1e5*1e3/o;(i<=0||o<=0)&&(r=0),console.log("\u5f53\u524d\u8ba1\u7b97\u7684ecmp:"+r),r>=e.ecpmObj.targetEcpm?(console.log("ecpm\u8fbe\u5230"+e.ecpmObj.targetEcpm+" \u4e0a\u62a5"),e.sendToTAQ("game_addiction",function(t){t||(e.reported=!1)})):(e.reported=!1,console.log("ecpm\u6ca1\u8fbe\u5230"+e.ecpmObj.targetEcpm))}else e.logw("\u83b7\u53d6ecpm\u5931\u8d25\uff01"+t.data.msg),e.reported=!1},function(t){e.logw("\u83b7\u53d6ecpm\u5931\u8d25\uff01"+t.errMsg),e.logw(t),e.reported=!1})}else console.log("\u65f6\u95f4\uff1a"+(this.gameTime>=60*this.ecpmObj.gameTime)+"\u6fc0\u52b1\u6b21\u6570\uff1a"+(this.videoReward>=this.ecpmObj.targetVideo))},t}();n.default=s,cc._RF.pop()},{"../../GxAdParams":"GxAdParams","../../util/DataStorage":"DataStorage","./TTAdapter":"TTAdapter"}],TTAdapter:[function(t,e,n){"use strict";cc._RF.push(e,"1050dBcHW1A5bSvQk9iblOB","TTAdapter");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var a=arguments[e],r=0,s=a.length;r<s;r++,i++)o[i]=a[r];return o};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../GxGame"),s=t("../../util/GxTimer"),c=t("../../util/GxUtils"),d=t("../base/BaseAdapter"),l=t("../../core/GxEnum"),u=t("../../GxAdParams"),h=t("../../core/GxConstant"),p=t("../../util/DataStorage"),f=t("../../sdk/GxEngine"),g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shareRcorderLayer=null,e.gxEngine=null,e.recorderTime=0,e.canReward=!1,e.openId="",e.anonymousId="",e.getOpenidTry=0,e}return i(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){var e=this;this.isInitAd||(this.isInitAd=!0,t.prototype.initAd.call(this),tt.getEnvInfoSync&&(u.AdParams.tt.appId=tt.getEnvInfoSync().microapp.appId),console.log("\u5f53\u524dappid:"+u.AdParams.tt.appId),this.gxEngine=new f.default,this.initBanner(),this.initVideo(),this.initRecorder(),this.getOpenId(function(t,n){tt.uma&&(tt.uma.setAnonymousid(n),tt.uma.setOpenid(t)),window.TDAPP&&(window.TDAPP.register({profileId:t,profileType:1}),window.TDAPP.login({profileId:t,profileType:1})),e.gxEngine.init({openId:t,appToken:u.AdParams.tt.appId,appId:u.AdParams.tt.appId}).then(function(){console.log("gxEngine\u521d\u59cb\u5316\u6210\u529f")}).catch(function(){console.log("gxEngine\u521d\u59cb\u5316\u5931\u8d25")})}),tt.onShow(function(t){console.log("\u542f\u52a8\u573a\u666f\u5b57\u6bb5\uff1a",t.launch_from,", ",t.location),"homepage"!=t.launch_from&&"sidebar_card"!=t.location||(console.log("\u662f\u4ece\u4fa7\u8fb9\u680f\u542f\u52a8\u7684"),e.canReward=!0)}))},e.prototype.getOpenId=function(t){var e=this,n=p.default.getItem("__gx_openId__",null),o=p.default.getItem("__gx_anonymousId__",null);if(n&&o)return console.log("\u83b7\u53d6\u5230\u7f13\u5b58\u7684openid\uff1a"+n),console.log("\u83b7\u53d6\u5230\u7f13\u5b58\u7684anonymousId\uff1a"+o),e.openId=n,e.anonymousId=o,void(t&&t(n,o));e.getOpenidTry>=5?console.warn("\u83b7\u53d6openId\u91cd\u8bd5\u6700\u5927\u6b21\u6570\u4e86"):window.tt.login({force:!0,success:function(n){console.log("login \u8c03\u7528\u6210\u529f"+n.code+" "+n.anonymousCode),n.code?e.requestGet(h.default.Code2SessionUrl+"?appId="+u.AdParams.tt.appId+"&code="+n.code+"&anonymousCode="+n.anonymousCode,function(n){e.logi(n.data),1==n.data.code?(e.openId=n.data.data.openid,e.anonymousId=n.data.data.anonymousid,e.logi("\u83b7\u53d6openid\u6210\u529f\uff1a"+e.openId),e.logi("\u83b7\u53d6anonymousId\u6210\u529f\uff1a"+e.anonymousId),p.default.setItem("__gx_openId__",e.openId),p.default.setItem("__gx_anonymousId__",e.anonymousId),t&&t(e.openId,e.anonymousId)):(e.logw("\u767b\u5f55\u5931\u8d25\uff01"+n.data.msg),setTimeout(function(){e.getOpenidTry++,e.getOpenId(t)},3e3))},function(n){e.logw("\u767b\u5f55\u5931\u8d25\uff01"+n.errMsg),e.logw(n),setTimeout(function(){e.getOpenidTry++,e.getOpenId(t)},3e3)}):(console.log("\u767b\u5f55\u6ca1code"),setTimeout(function(){e.getOpenidTry++,e.getOpenId(t)},3e3))},fail:function(){console.log("login \u8c03\u7528\u5931\u8d25"),setTimeout(function(){e.getOpenidTry++,e.getOpenId(t)},3e3)}})},e.prototype.initBanner=function(){var t=this;0!=u.AdParams.tt.banner.length&&(this.bannerAd&&this.destroyBanner(),this.bannerAd=tt.createBannerAd({adUnitId:u.AdParams.tt.banner,adIntervals:Math.max(30,r.default.adConfig.bannerUpdateTime),style:{left:0,top:r.default.screenHeight,width:r.default.screenWidth/2}}),this.bannerAd.onLoad(function(){console.log(" banner \u52a0\u8f7d\u5b8c\u6210")}),this.bannerAd.onError(function(t){console.log(" banner \u5e7f\u544a\u9519\u8bef"+JSON.stringify(t))}),this.bannerAd.onResize(function(e){t.bannerAd.style.top=r.default.screenHeight-e.height,t.bannerAd.style.left=(r.default.screenWidth-e.width)/2}))},e.prototype.showBanner=function(){var t=this;null==this.bannerAd&&this.initBanner(),null!=this.bannerAd&&this.bannerAd.show().then(function(){}).catch(function(){t.initBanner(),t.bannerAd.show()})},e.prototype.hideBanner=function(){this.bannerAd&&this.bannerAd.hide()},e.prototype.destroyBanner=function(){this.bannerAd&&this.bannerAd.destroy(),this.bannerAd=null},e.prototype.initVideo=function(){var t=this;null==u.AdParams.tt.video||u.AdParams.tt.video.length<=0?console.warn("\u6fc0\u52b1\u89c6\u9891\u53c2\u6570\u7a7a"):(this.destroyVideo(),this.videoAd=tt.createRewardedVideoAd({adUnitId:u.AdParams.tt.video}),this.videoAd.load(),this.videoAd.onLoad(function(t){console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d",t)}),this.videoAd.onError(function(e){console.log("\u6fc0\u52b1\u89c6\u9891-\u5931\u8d25",e),t._videoErrorEvent()}),this.videoAd.onClose(function(e){console.log("\u6fc0\u52b1\u89c6\u9891\u5173\u95ed"),t.recorderResume(),e&&e.isEnded?(t.gxEngine.rewardAdEnd(),console.log("\u6fc0\u52b1\u89c6\u9891\u5b8c\u6210"),t.videocallback&&t.videocallback(!0),t._videoCompleteEvent()):(t._videoCloseEvent(),t.videocallback&&t.videocallback(!1)),t.videoAd.load()}))},e.prototype.showVideo=function(e,n){var o=this;if(void 0===n&&(n=""),t.prototype.showVideo.call(this,null,n),null==this.videoAd&&this.initVideo(),null==this.videoAd)return this._videoErrorEvent(),void(e&&e(!1));this.videocallback=e,this.videoAd.show().then(function(){o.recorderPause()}).catch(function(){o.videoAd.load().then(function(){return o.videoAd.show()}).then(function(){o.recorderPause()}).catch(function(){o.videoAd.load(),o._videoErrorEvent(),tt.showModal({title:"\u6682\u65e0\u5e7f\u544a",content:"\u5206\u4eab\u6e38\u620f\u83b7\u53d6\u5956\u52b1\uff1f",confirmText:"\u5206\u4eab",success:function(t){t.confirm&&r.default.shareGame(function(t){o.videocallback&&o.videocallback(t)})},fail:function(){tt.showToast({title:"\u6682\u65e0\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"none"}),o.videocallback&&o.videocallback(!1)}})})})},e.prototype.destroyVideo=function(){this.videoAd&&this.videoAd.destroy(),this.videoAd=null},e.prototype.showInterstitial=function(t,e){var n=this;if(!tt.createInterstitialAd||null==u.AdParams.tt.inter||u.AdParams.tt.inter.length<=0)return e&&e();this.destroyNormalInter(),this.interAd=tt.createInterstitialAd({adUnitId:u.AdParams.tt.inter}),this.interAd&&this.interAd.onLoad(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d"),t&&t()}),this.interAd&&this.interAd.onError(function(t){console.log("show inter err"+JSON.stringify(t)),n.destroyNormalInter()}),this.interAd&&this.interAd.onClose(function(){n.recorderResume(),e&&e(),n.destroyNormalInter()}),this.interAd&&this.interAd.load().then(function(){n.interAd.show().then(function(){n.recorderPause(),n.hideBanner(),n.interShowTime=n.get_time()})})},e.prototype.destroyNormalInter=function(){this.interAd&&this.interAd.destroy(),this.interAd=null},e.prototype.showNativeInterstitial=function(t,e,n){var o=this;void 0===n&&(n=0),this.get_time()-this.interShowTime<=1e3*r.default.adConfig.interTick||(this.hideNativeInterstitial(),null==this.nativeInterTimer&&(this.nativeInterTimer=new s.default),this.nativeInterTimer.once(function(){var n=o.getLocalNativeData(l.ad_native_type.inter1);if(null==n||void 0===n)o.showInterstitial(t,e);else{var i=cc.instantiate(c.default.getRes("gx/prefab/ad/native_interstitial",cc.Prefab));o.nativeInter=i.getComponent("gx_native_interstitial"),o.nativeInter&&o.nativeInter.show(n,function(){o.interShowTime=o.get_time(),o.hideBanner(),t&&t()},e)}},r.default.isShenHe?0:1e3*n))},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this),this.destroyNormalInter()},e.prototype.initRecorder=function(){var t=this;tt.getGameRecorderManager&&(this.gameRecorder=tt.getGameRecorderManager(),this.gameRecorder.onStart(function(e){console.log("\u5f55\u5236\u5f00\u59cb",JSON.stringify(e)),t.gameRecorderState=d.RECORDER_STATE.START,t.recorderTime=t.get_time(),t.videoPath=null}),this.gameRecorder.onError(function(e){console.log("\u5f55\u5236\u51fa\u9519",JSON.stringify(e)),t.gameRecorderState=d.RECORDER_STATE.NO}),this.gameRecorder.onStop(function(e){t.gameRecorderState=d.RECORDER_STATE.NO,t.videoPath=null,e&&e.videoPath?t.get_time()-t.recorderTime>=3e3?(t.videoPath=e.videoPath,console.log("\u5f55\u5c4f\u505c\u6b62\uff0c\u5f55\u5236\u6210\u529f\u3002videoID is "+e.videoPath)):console.log("\u5f55\u5c4f\u505c\u6b62\uff0c\u5f55\u5236\u5931\u8d25\u3002\u5f55\u5c4f\u65f6\u95f4<3s"):console.log("\u5f55\u5c4f\u505c\u6b62\uff0c\u5f55\u5236\u5931\u8d25"),t.onRecoderStop&&t.onRecoderStop(null!=t.videoPath)}),this.gameRecorder.onPause(function(){console.log("\u6682\u505c\u5f55\u5236"),t.gameRecorderState=d.RECORDER_STATE.PAUSE}),this.gameRecorder.onResume(function(){console.log("\u7ee7\u7eed\u5f55\u5236"),t.gameRecorderState=d.RECORDER_STATE.RESUME}))},e.prototype.recorderPause=function(){this.gameRecorder&&this.gameRecorderState==d.RECORDER_STATE.START&&this.gameRecorder.pause()},e.prototype.recorderResume=function(){this.gameRecorder&&this.gameRecorderState==d.RECORDER_STATE.PAUSE&&this.gameRecorder.resume()},e.prototype.recorderStart=function(){this.gameRecorder&&this.gameRecorderState==d.RECORDER_STATE.NO&&this.gameRecorder&&this.gameRecorder.start({duration:300})},e.prototype.recorderStop=function(t){this.gameRecorder&&this.gameRecorderState!=d.RECORDER_STATE.NO&&(this.onRecoderStop=t,this.gameRecorder&&this.gameRecorder.stop())},e.prototype.shareRecorder=function(t,e){var n=this;if(null==this.gameRecorder||null==this.videoPath)return this.createToast("\u5206\u4eab\u5931\u8d25"),e&&e();tt.shareAppMessage({channel:"video",query:"",templateId:u.AdParams.tt.shareTemplateId,title:u.AdParams.tt.gameName,desc:u.AdParams.tt.gameName,extra:{videoPath:this.videoPath,videoTopics:[u.AdParams.tt.gameName],hashtag_list:[u.AdParams.tt.gameName]},success:function(){console.log("\u5206\u4eab\u89c6\u9891\u6210\u529f"),t&&t(),n.onRecoderStop=null,n.videoPath=null},fail:function(t){console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25",t),e&&e(),t.errMsg.search(/short/gi)>-1?n.createToast("\u5206\u4eab\u5931\u8d25"):t.errMsg.search(/cancel/gi)>-1?n.createToast("\u53d6\u6d88\u5206\u4eab"):n.createToast("\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01")}})},e.prototype.showGamePortal=function(){if("ios"!==tt.getSystemInfoSync().platform){for(var t=[],e=0,n=r.default.recommedList;e<n.length;e++){var o=n[e];t.push({appId:o,query:"",extraData:{}})}t.length>0?tt.showMoreGamesModal({appLaunchOptions:t,success:function(t){console.log("success",t.errMsg)},fail:function(t){console.log("fail",t.errMsg)}}):this.createToast("\u6682\u65e0\u5e7f\u544a\uff01")}},e.prototype.showRecorderLayer=function(){console.warn("//TODO   show recorderLayer"),null==this.shareRcorderLayer||void 0===this.shareRcorderLayer||cc.isValid(this.shareRcorderLayer.node,!0)},e.prototype.requestGet=function(t,e,n){tt.request({url:t,success:function(t){e&&e(t)},fail:function(t){n&&n(t)}})},e.prototype.requestPost=function(t,e,n,o){tt.request({url:t,data:e,header:{"content-type":"application/json"},method:"POST",dataType:"JSON",responseType:"text",success:function(t){try{n&&n({statusCode:t.statusCode,header:t.header,data:JSON.parse(t.data)}),console.log("\u8f6c\u6362\u6210\u529f")}catch(e){console.log(e),console.log("\u8f6c\u6362\u5931\u8d25"),n&&n(t)}},fail:function(t){o&&o(t)}})},e.prototype.logi=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.LOG.apply(this,a(["[TTAdapter]"],e))},e.prototype.loge=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.LOGE.apply(this,a(["[TTAdapter]"],e))},e.prototype.logw=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.LOGW.apply(this,a(["[TTAdapter]"],e))},e.prototype.addDesktop=function(t){tt.addShortcut({success:function(){t&&t()},fail:function(t){console.log("\u6dfb\u52a0\u684c\u9762\u5931\u8d25",t.errMsg)}})},e.prototype.hasAddDesktop=function(t,e){tt.checkShortcut({success:function(t){console.log("\u68c0\u67e5\u5feb\u6377\u65b9\u5f0f",t.status),t.status.exist&&(console.log("\u9690\u85cf\u684c\u9762"),e&&e())},fail:function(t){console.log("\u68c0\u67e5\u5feb\u6377\u65b9\u5f0f\u5931\u8d25",t.errMsg)}})},e.prototype.userFrom=function(t){try{var e=p.default.getItem("__clickid__");return e?t&&t(!0):(e=tt.getLaunchOptionsSync().query.clickid)?(p.default.setItem("__clickid__",e),t&&t(!0)):t&&t(!1)}catch(n){t&&t(!1)}},e}(d.default);n.default=g,cc._RF.pop()},{"../../GxAdParams":"GxAdParams","../../GxGame":"GxGame","../../core/GxConstant":"GxConstant","../../core/GxEnum":"GxEnum","../../sdk/GxEngine":"GxEngine","../../util/DataStorage":"DataStorage","../../util/GxTimer":"GxTimer","../../util/GxUtils":"GxUtils","../base/BaseAdapter":"BaseAdapter"}],VivoAdapter:[function(t,e,n){"use strict";cc._RF.push(e,"cf181GJSAFGM6/cu3LXQk34","VivoAdapter");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var a=arguments[e],r=0,s=a.length;r<s;r++,i++)o[i]=a[r];return o};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../audio/GxAudioUtil"),s=t("../../GxGame"),c=t("../../util/GxTimer"),d=t("../../util/GxUtils"),l=t("../base/BaseAdapter"),u=t("../../core/GxEnum"),h=t("../../GxAdParams"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.customBanner=null,e.customInter=null,e.portalAdTimer=null,e.videoArr=[],e.videoNum=0,e.interShowCount=0,e.videoShowing=!1,e}return i(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){if(!this.isInitAd){this.isInitAd=!0,t.prototype.initAd.call(this);var e=qg.getSystemInfoSync();e.miniGame&&e.miniGame.package,this.initBanner(),this.initNormalBanner(),this.videoArr=[],h.AdParams.vivo.video.includes("_")&&(this.videoArr=h.AdParams.vivo.video.split("_")),this.initVideo(),this.initNativeAd(),this.initGamePortal(),s.default.adConfig.interTick=s.default.gGN("ae",10),this.ac(),this.ab()}},e.prototype.ac=function(){var t=this,e=s.default.gGN("ac",20);setTimeout(function(){window.ovad._boxShowing?t.ac():s.default.gGB("ac")&&(window.ovad._boxShowing=!0,t.privateShowInter(function(){},function(){t.ac()}))},1e3*e)},e.prototype.ab=function(){var t=this,e=s.default.gGN("ab",35);setTimeout(function(){s.default.gGB("ab")&&t._vv()},1e3*e)},e.prototype._vv=function(){var t=this;this.showVideo(function(){var e=s.default.gGN("ab",35);setTimeout(function(){t._vv()},1e3*e)},"GxVV")},e.prototype.initNormalBanner=function(){var t=this;if(!(this.platformVersion()<1031||h.AdParams.vivo.banner.length<=0)){this.destroyNormalBanner();var e={};if(h.AdParams.vivo.bannerOnTop){e={top:0};var n=qg.getSystemInfoSync(),o=n.screenHeight,i=n.screenWidth;i>o&&(e.left=i/4)}else e={};this.bannerAd=qg.createBannerAd({posId:h.AdParams.vivo.banner,style:e,adIntervals:Math.max(s.default.adConfig.bannerUpdateTime,30)}),this.bannerAd.onError(function(e){t.loge("normal banner error: ",JSON.stringify(e)),e&&30002==e.errCode&&(t.logi("\u9500\u6bc1banner"),t.destroyNormalBanner())})}},e.prototype.showNormalBanner=function(){var t=this;null==this.bannerAd&&this.initNormalBanner(),null!=this.bannerAd&&this.bannerAd.show().then(function(){t.logi("normal banner show success")})},e.prototype.hideNormalBanner=function(){this.bannerAd&&this.bannerAd.hide(),this.destroyNormalBanner()},e.prototype.destroyNormalBanner=function(){this.bannerAd&&(this.bannerAd.destroy(),this.bannerAd=null)},e.prototype.initBanner=function(){t.prototype.initBanner.call(this)},e.prototype.showBanner=function(){var t=this;this.hideBanner(),console.error("\u8fd9\u91cc\u4e0d\u8d70\u5565\u539f\u56e0");var e=this.getLocalNativeData(u.ad_native_type.banner);if(s.default.adConfig.bannerUpdateTime>0&&(null==this.bannerTimer&&(this.bannerTimer=new c.default),this.bannerTimer&&this.bannerTimer.once(function(){t.showBanner()},1e3*s.default.adConfig.bannerUpdateTime)),null==e||void 0===e)this.showCustomBanner();else{var n=cc.instantiate(d.default.getRes("gx/prefab/ad/native_banner",cc.Prefab));this.bannerNode=n.getComponent("gx_native_banner"),this.bannerNode.show(e,function(){},function(){t.bannerTimer&&t.bannerTimer.clear()})}},e.prototype.hideBanner=function(){t.prototype.hideBanner.call(this),this.hideNormalBanner(),this.destroyCustomBanner()},e.prototype.initVideo=function(t){var e=this;if(void 0===t&&(t=!1),!(this.platformVersion()<1041||null==h.AdParams.vivo.video||""==h.AdParams.vivo.video)){this.destroyVideo(),this.videoAd=window.qg.createRewardedVideoAd({posId:this.videoArr.length>0?this.videoArr[this.videoNum]:h.AdParams.vivo.video});var n=this;this.videoAd.onLoad(function(){n.logi("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d\u6210\u529f")}),this.videoAd.onError(function(e){this.videoArr.length>0?(this.videoNum++,this.videoNum<this.videoArr.length?this.initVideo():(this.videoNum=0,n.logi("\u6fc0\u52b1\u89c6\u9891onerror"),n.logi(e),t&&n.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),n._videoErrorEvent())):(n.logi("\u6fc0\u52b1\u89c6\u9891onerror"),n.logi(e),t&&n.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),n._videoErrorEvent())}),this.videoAd.onClose(function(t){r.default.setMusicVolume(1),r.default.setSoundVolume(1),t&&t.isEnded?(n.logi("\u6b63\u5e38\u64ad\u653e\u7ed3\u675f\uff0c\u53ef\u4ee5\u4e0b\u53d1\u6e38\u620f\u5956\u52b1"),e.videocallback&&e.videocallback(!0),n._videoCompleteEvent()):(n._videoCloseEvent(),e.videocallback&&e.videocallback(!1)),e.videoAd.load(),e.videoShowing=!1}),this.videoAd.load()}},e.prototype.showVideo=function(e,n){var o=this;if(void 0===n&&(n=""),this.videoShowing)e&&e(!1);else{if(t.prototype.showVideo.call(this,null,n),this.videoShowing=!0,null==this.videoAd&&this.initVideo(!0),null==this.videoAd)return this.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),this.videoShowing=!1,this._videoErrorEvent(),void(e&&e(!1));this.videocallback=e,this.videoAd.show().then(function(){r.default.setMusicVolume(0),r.default.setSoundVolume(0)}).catch(function(){o._videoErrorEvent(),o.logi("\u6fc0\u52b1\u89c6\u9891onerror2"),o.videocallback&&o.videocallback(!1),o.videocallback=null,o.createToast("\u6682\u65e0\u89c6\u9891\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),o.videoShowing=!1,o.videoAd.load()})}},e.prototype.createToast=function(t){console.log("toast:"+t),qg.showToast({message:t})},e.prototype.destroyVideo=function(){this.videoAd&&(this.videoAd.offLoad(),this.videoAd.offError(),this.videoAd.offClose()),this.videoAd=null},e.prototype.showInterstitial=function(t,e){var n=this;if(console.log("\u666e\u901a \u63d2\u5c4f"),this.platformVersion()<1031||null==h.AdParams.vivo.inter||0==h.AdParams.vivo.inter.length)return e&&e();this.destroyNormalInter(),this.interAd=qg.createInterstitialAd({posId:h.AdParams.vivo.inter});var o=this;this.interAd.onLoad(function(){o.logi("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d"),t&&t()}),this.interAd.onClose(function(){e&&e()}),this.interAd.load().then(function(){return n.interAd.show()}).then(function(){n.interShowTime=n.get_time()}).catch(function(t){n.logi("\u666e\u901a\u63d2\u5c4f\u5c55\u793a\u5931\u8d25"+JSON.stringify(t)),e&&e()})},e.prototype.destroyNormalInter=function(){this.interAd&&(this.interAd.offLoad(),this.interAd.offError()),this.interAd=null},e.prototype.create_ad=function(t){var e=this;return new Promise(function(n){var o="";if(t==u.ad_native_type.native_icon?o=h.AdParams.vivo.native_icon:t==u.ad_native_type.inter1?o=h.AdParams.vivo.native1:t==u.ad_native_type.inter2&&(o=h.AdParams.vivo.native2),""==o||void 0===o||null==o||e.is_limit_native_length(t)||e.platformVersion()<1053)return n(null);var i=qg.createNativeAd({posId:o}),a=function(n){if(e.logi("[gx_game]native data load:"),n&&n.adList){var o=n.adList.pop();o.ad=i,o.type=t,e.add_native_data(o),e.logi("[gx_game]native data load succ:"+JSON.stringify(o)),i.offLoad(a)}};i.onLoad(a);var r=function(t){e.logi("[gx_game]native data error: "+JSON.stringify(t),"color: red"),i.offError(r)};i.onError(r),i.load(),setTimeout(n,1500)})},e.prototype.initNativeAd=function(){var t=this;this.create_ad(u.ad_native_type.banner).then(function(){return t.create_ad(u.ad_native_type.native_icon)}).then(function(){return t.create_ad(u.ad_native_type.inter1)}).then(function(){return t.create_ad(u.ad_native_type.inter2)}).then(function(){t.loop_get_native_data()})},e.prototype.showInterstitialNative=function(t,e,n,o){this.hideInterstitialNative();var i=this.getLocalNativeData(u.ad_native_type.inter1);if(null==i||void 0===i)o&&o();else{var a=cc.instantiate(d.default.getRes("gx/prefab/ad/native_inner_interstitial",cc.Prefab));this.innerInter=a.getComponent("gx_native_inner_interstitial"),this.innerInter&&this.innerInter.show(t,i,e,function(){n&&n()},o)}this.hideInterstitialNative()},e.prototype.hideInterstitialNative=function(){t.prototype.hideInterstitialNative.call(this)},e.prototype.showNativeInterstitial=function(t,e,n){var o=this;void 0===n&&(n=0),window.ovad._boxShowing||(window.ovad._boxShowing=!0,setTimeout(function(){o.privateShowInter(t,e)},s.default.isShenHe?0:1e3*n))},e.prototype.privateShowInter=function(t,e){var n=this;if(this.get_time()-this.interShowTime<=1e3*s.default.adConfig.interTick)return window.ovad._boxShowing=!1,e&&e();this.hideNativeInterstitial();var o=this.getLocalNativeData(u.ad_native_type.inter2);if(null==o||void 0===o)this.showCustomInter(t,function(){window.ovad._boxShowing=!1,e&&e()});else{var i=cc.instantiate(d.default.getRes("gx/prefab/ad/native_interstitial",cc.Prefab));this.nativeInter=i.getComponent("gx_native_interstitial"),this.nativeInter&&this.nativeInter.show(o,function(){n.interShowTime=n.get_time(),t&&t()},function(){window.ovad._boxShowing=!1,e&&e()})}},e.prototype.showOtherNativeInterstitial=function(t,e,n){var o=this;if(void 0===n&&(n=0),!s.default.gGB("af"))return this.logi("\u9650\u5236\u4e861"),void(e&&e());setTimeout(function(){window.ovad._boxShowing=!0,o.privateShowInter(t,e)},s.default.isShenHe?0:1e3*n)},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this),this.destroyCustomInter()},e.prototype.showNativeIcon=function(t){this.hideNativeIcon();var e=u.ad_native_type.native_icon,n=h.AdParams.vivo.native_icon;n==h.AdParams.vivo.native1?e=u.ad_native_type.inter1:n==h.AdParams.vivo.native2&&(e=u.ad_native_type.inter2);var o=this.getLocalNativeData(e);if(null!=o&&void 0!==o){var i=cc.instantiate(d.default.getRes("gx/prefab/ad/native_icon",cc.Prefab));this.nativeIcon=i.getComponent("gx_native_icon"),this.nativeIcon&&this.nativeIcon.show(t,o)}else this.logi("showNativeIcon \u6682\u65e0\u5e7f\u544a\u6570\u636e")},e.prototype.hideNativeIcon=function(){t.prototype.hideNativeIcon.call(this)},e.prototype.loop_get_native_data=function(){var t=this._native_data_cache.length<5?1e3*d.default.randomInt(15,20):3e4;setTimeout(this.initNativeAd.bind(this),t)},e.prototype.initGamePortal=function(t,e,n,o,i){var a=this;void 0===n&&(n=!0),void 0===o&&(o=""),void 0===i&&(i=300),h.AdParams.vivo.boxPortal?(this.portalAd=qg.createBoxPortalAd({posId:h.AdParams.vivo.boxPortal,image:o,marginTop:i}),null==this.portalAdTimer&&(this.portalAdTimer=new c.default),this.portalAd.onShow(function(e){a.logi("\u76d2\u5b50\u4e5d\u5bab\u683c\u5e7f\u544a\u5c55\u793a",e),t&&t(),a.hideBanner()}),this.portalAd.onClose(function(){e&&e(),a.portalAd.isDestroyed||a.portalAd.show()})):e&&e()},e.prototype.showGamePortal=function(t,e,n,o,i){var a=this;void 0===n&&(n=!0),void 0===o&&(o=""),void 0===i&&(i=300),qg.createBoxPortalAd&&s.default.adConfig.adunit_portal?(null==this.portalAd&&this.initGamePortal(t,e,n,o,i),null!=this.portalAd?this.portalAd.show().then(function(){a.logi("portalAd button show success"),a.portalAdTimer&&a.portalAdTimer.clear(),a.portalAdTimer=null}).catch(function(r){a.logi("\u76d2\u5b50\u4e5d\u5bab\u683c\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25",r),!r||30002!=r.code&&40218!=r.code?(e&&e(),n&&a.createToast("\u52aa\u529b\u52a0\u8f7d\u4e2d,\u8bf7\u7a0d\u540e\u518d\u8bd5~")):a.portalAdTimer.once(function(){a.destroyGamePortal(),a.showGamePortal(t,e,!1,o,i)},1e4)}):this.logi("portalAd is null")):(e&&e(),this.logi("\u6682\u4e0d\u652f\u6301\u4e92\u63a8\u76d2\u5b50\u76f8\u5173 API"))},e.prototype.hideGamePortal=function(){this.portalAd&&this.portalAd.hide(),this.portalAdTimer&&this.portalAdTimer.clear(),this.portalAdTimer=null},e.prototype.destroyGamePortal=function(){this.portalAd&&(this.portalAdTimer&&this.portalAdTimer.clear(),this.portalAdTimer=null,this.portalAd.destroy(),this.portalAd=null)},e.prototype.showAddDesktop=function(t,e){if(!this.addIconNode||void 0===this.addIconNode||!cc.isValid(this.addIconNode.node,!0)){var n=cc.instantiate(d.default.getRes("gx/prefab/add_icon",cc.Prefab));this.addIconNode=n.getComponent("Gx_add_icon"),this.addIconNode&&this.addIconNode.show(e)}},e.prototype.hasAddDesktop=function(t,e,n){this.platformVersion()>=1041?qg.hasShortcutInstalled({success:function(n){n?e&&e():t&&t()},fail:function(){n&&n()}}):(this.logi("\u4e0d\u652f\u6301\u6dfb\u52a0\u684c\u9762"),n&&n())},e.prototype.addDesktop=function(t,e){var n=this;qg.installShortcut?qg.installShortcut({success:function(){setTimeout(function(){n.hasAddDesktop(function(){e&&e()},function(){t&&t()})},1e3)},fail:function(){e&&e()}}):e&&e()},e.prototype.login=function(t,e){this.platformVersion()>=1040&&qg.login({success:function(e){t&&t(e)},fail:function(t){e&&e(t)}})},e.prototype.showCustomBanner=function(){var t=this,e=h.AdParams.vivo.custom_banner;if(null==e||void 0===e||e.length<=0||!qg.createCustomAd)return this.showNormalBanner();this.destroyCustomBanner(),this.customBanner=qg.createCustomAd({posId:e,style:{}}),this.customBanner.show().then(function(){}).catch(function(e){t.loge("custom banner show error: "+JSON.stringify(e)),t.destroyCustomBanner(),t.showNormalBanner()});var n=function(){t.customBanner.offClose(n),t.destroyCustomBanner()};this.customBanner.onClose(n)},e.prototype.destroyCustomBanner=function(){this.customBanner&&this.customBanner.destroy(),this.customBanner=null},e.prototype.showCustomInter=function(t,e){var n=this,o=h.AdParams.vivo.custom1;if(this.interShowCount%2==0?(o=h.AdParams.vivo.custom1)&&0!=o.length||(o=h.AdParams.vivo.custom2):(o=h.AdParams.vivo.custom2)&&0!=o.length||(o=h.AdParams.vivo.custom1),this.logi("custom :"+o),this.interShowCount++,null==o||void 0===o)return this.showInterstitial(t,e),e&&e();this.destroyCustomInter(),this.customInter=qg.createCustomAd({posId:o,style:this._getNativeInterStyle()}),this.customInter.show().then(function(){if(n.interShowTime=n.get_time(),window.cc&&!cc.director.getScene().getChildByName("BLOCK")){var e=new cc.Node;e.width=2e3,e.height=2e3,e.name="BLOCK",cc.director.getScene().addChild(e),e.zIndex=cc.macro.MAX_ZINDEX,e.addComponent(cc.BlockInputEvents);var o=cc.winSize;e.x=o.width/2,e.y=o.height/2;var i=0;e.on(cc.Node.EventType.TOUCH_START,function(){i++,console.log("\u89e6\u6478\u4e86"),4==i&&e.destroy()})}t&&t()}).catch(function(){if(window.cc){var t=cc.director.getScene().getChildByName("BLOCK");t&&t.destroy()}});var i=function(){if(window.cc){var t=cc.director.getScene().getChildByName("BLOCK");t&&t.destroy()}e&&e(),n.customInter.offClose(i),n.destroyCustomInter()};this.customInter.onClose(i);var a=function(o){if(window.cc){var i=cc.director.getScene().getChildByName("BLOCK");i&&i.destroy()}n.loge(" custom inter error: "+JSON.stringify(o)),n.customInter.offError(a),n.destroyCustomInter(),n.showInterstitial(t,e)};this.customInter.onError(a)},e.prototype._getNativeInterStyle=function(){var t=qg.getSystemInfoSync(),e=t.screenHeight,n=t.screenWidth,o={};if(n>e){(a=n/1080*720)>1280&&(a=1280),(r=a/720*525)>720&&(r=720);var i=(e-r)/2;i<=15&&(i=50),o={left:(n-a)/2,top:i=50}}else{var a,r;(a=n/1080*720)<720&&(a=720),a>1280&&(a=1280),(r=a/720*525)<525&&(r=525),r>720&&(r=720),o={left:0,top:(e-r)/2+150}}return o},e.prototype.destroyCustomInter=function(){if(window.cc){var t=cc.director.getScene().getChildByName("BLOCK");t&&t.destroy()}this.customInter&&this.customInter.destroy(),this.customInter=null},e.prototype.logi=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.LOG.apply(this,a(["[VivoAdapter]"],e))},e.prototype.loge=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.LOGE.apply(this,a(["[VivoAdapter]"],e))},e.prototype.showGameOverAD=function(){this.showVideo(function(){},"GxGameOverAd")},e.prototype.userFrom=function(t){try{if(window.testDataToServer&&testDataToServer.isAdUser)return t&&t(!0);var e=!1;if(qg.getLaunchOptionsSync){var n=null,o=qg.getLaunchOptionsSync();console.log(JSON.stringify(o)),console.log(o.query),o.query&&console.log(o.query.type),"ad"===o.query.type&&(e=!0);try{var i=o.referrerInfo.extraData;if(i)n=i.ad_id||i.adid||null;else{var a=o.query.internal;if("deeplink"===(a&&a.channel?a.channel:"")){var r=a.custom_params;console.log(r);var s=JSON.parse(r).cus_origin_uri,c=s.match(/ad_id=([^&]+)/),d=s.match(/adid=([^&]+)/);c&&c.length>=2&&(n=c[1]),d&&d.length>=2&&(n=d[1])}}}catch(n){console.log("----\u5f02\u5e38\u4e86"),console.log(n)}n&&(e=!0),console.log("---e"+n)}else console.log("---\u4f4e\u7248\u672c");return t&&t(e)}catch(n){t&&t(!1)}},e.prototype.showPositionBanner=function(t,e,n,o){var i=this;if(this.hideBanner(),h.AdParams.vivo.banner){if(this.bannerAd=window.qg.createBannerAd({adUnitId:h.AdParams.vivo.banner,style:{left:t,top:e},adIntervals:Math.max(s.default.adConfig.bannerUpdateTime,30)}),this.bannerAd.onError(function(t){i.loge(" position normal banner error: ",JSON.stringify(t))}),null==this.bannerAd)return this.logi("position banner\u7a7a"),void(o&&o());this.bannerAd.show().then(function(){n&&n(),i.logi("position normal banner show success")}).catch(function(t){o&&o(),i.loge("position banner error",t)})}else o&&o()},e}(l.default);n.default=p,cc._RF.pop()},{"../../GxAdParams":"GxAdParams","../../GxGame":"GxGame","../../audio/GxAudioUtil":"GxAudioUtil","../../core/GxEnum":"GxEnum","../../util/GxTimer":"GxTimer","../../util/GxUtils":"GxUtils","../base/BaseAdapter":"BaseAdapter"}],WxAdapter:[function(t,e,n){"use strict";cc._RF.push(e,"d37295KLTlNKp/nGh/vt/73","WxAdapter");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),i=0;for(e=0;e<n;e++)for(var a=arguments[e],r=0,s=a.length;r<s;r++,i++)o[i]=a[r];return o};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../GxGame"),s=t("../../util/GxTimer"),c=t("../base/BaseAdapter"),d=t("../../GxAdParams"),l=t("./WxCustomAd"),u=t("../../util/DataStorage"),h=t("../../util/OpenDataUtil"),p=t("../../core/GxConstant"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shareRcorderLayer=null,e.recorderTime=0,e.customInterAd=null,e.customLeftAd=null,e.customRightAd=null,e._showedCustomInter=!0,e._loadEndCustomInter=!0,e.interCount=0,e.appId="",e.openId="",e._shareToFriendCallback=null,e.normalInterShowed=!0,e.shareValue=0,e.rewardValue=0,e}return i(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,h.default.initChannel(p.default.IS_WECHAT_GAME?"wx":"qq"),this.initOpenId(),t.prototype.initAd.call(this),r.default.adConfig.interTick=0,this.initVideo(),this.initCustomInter(),this.initCustomLeft(),this.initCustomRight(),this.initInter(),this.initRecorder())},e.prototype.initOpenId=function(){var t=this;wx.onShareMessageToFriend(function(e){t.logi("\u5b9a\u5411\u5206\u4eab\u7ed3\u679c\uff1a"+e.success),e&&e.success?t.logi("\u5b9a\u5411\u5206\u4eab\u6210\u529f"):t.logi("\u5b9a\u5411\u5206\u4eab\u5931\u8d25"),t._shareToFriendCallback&&t._shareToFriendCallback(e&&e.success),t._shareToFriendCallback=null}),window.qq?this.appId=d.AdParams.qq.appId:this.appId=d.AdParams.wx.appId;var e=u.default.getItem("__gx_openId__","");if(e)return this.openId=e,this.logi("\u83b7\u53d6\u5230\u7f13\u5b58\u7684openId:"+this.openId),void this.initSubmsg();try{var n=this;this.appId?(this.logi("\u83b7\u53d6\u5230appid:"+this.appId),wx.login({success:function(t){t.code?(n.logi("\u83b7\u53d6code\u6210\u529f\uff1a"+t.code),n.requestGet(p.default.Code2SessionUrl+"?appId="+n.appId+"&code="+t.code,function(t){n.logi(t.data),1==t.data.code?(n.openId=t.data.data.openid,n.logi("\u83b7\u53d6openid\u6210\u529f\uff1a"+n.openId),u.default.setItem("__gx_openId__",n.openId),n.initSubmsg()):n.logw("\u767b\u5f55\u5931\u8d25\uff01"+t.data.msg)},function(t){n.logw("\u767b\u5f55\u5931\u8d25\uff01"+t.errMsg),n.logw(t)})):n.logw("\u83b7\u53d6\u767b\u5f55code\u5931\u8d25\uff01"+t.errMsg)},fail:function(t){n.logw("wx login\u5931\u8d25\uff01"+t.errMsg)}})):n.logw("\u83b7\u53d6wx appid\u5931\u8d25\u6216\u8005 GxAdParams\u4e2d\u6ca1\u6709\u914d\u7f6ewx\u6216\u8005 qq\u7684appid")}catch(o){this.logw(o),this.logw("\u8bfb\u53d6project.config.json\u5931\u8d25")}},e.prototype.initBanner=function(){if(0!=d.AdParams.wx.banner.length){this.bannerAd&&this.destroyBanner();var t;t=r.default.screenHeight<r.default.screenWidth?{top:r.default.screenHeight-100,left:(r.default.screenWidth-.3*r.default.screenWidth)/2,width:.3*r.default.screenWidth}:{top:r.default.screenHeight-125,left:(r.default.screenWidth-.9*r.default.screenWidth)/2,width:.9*r.default.screenWidth},this.bannerAd=wx.createBannerAd({adUnitId:d.AdParams.wx.banner,adIntervals:Math.max(30,r.default.adConfig.bannerUpdateTime),style:t}),this.bannerAd.onLoad(function(){console.log(" banner \u52a0\u8f7d\u5b8c\u6210")}),this.bannerAd.onError(function(t){console.log(" banner \u5e7f\u544a\u9519\u8bef"+JSON.stringify(t))}),this.bannerAd.onResize(function(){})}},e.prototype.showBanner=function(){var t=this;this.initBanner(),null!=this.bannerAd&&this.bannerAd.show().then(function(){}).catch(function(){t.initBanner(),t.bannerAd.show()})},e.prototype.hideBanner=function(){this.bannerAd&&(this.bannerAd.offLoad(),this.bannerAd.offError(),this.bannerAd.offResize(),this.bannerAd.hide()),this.destroyBanner()},e.prototype.destroyBanner=function(){this.bannerAd&&this.bannerAd.destroy(),this.bannerAd=null},e.prototype.initVideo=function(){var t=this;null==d.AdParams.wx.video||d.AdParams.wx.video.length<=0||(this.destroyVideo(),this.videoAd=wx.createRewardedVideoAd({adUnitId:d.AdParams.wx.video}),this.videoAd.onLoad(function(e){if(console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d",e),e){var n=e.shareValue;1!=n&&0!==n||(t.shareValue=e.shareValue);var o=e.rewardValue;1!=o&&0!==o||(t.rewardValue=e.rewardValue)}}),this.videoAd.onError(function(e){console.log("\u6fc0\u52b1\u89c6\u9891-\u5931\u8d25",e),t._videoErrorEvent()}),this.videoAd.onClose(function(e){console.log("\u6fc0\u52b1\u89c6\u9891\u5173\u95ed"),t.recorderResume(),cc.director.resume(),e&&e.isEnded?(console.log("\u6fc0\u52b1\u89c6\u9891\u5b8c\u6210"),t.videocallback&&t.videocallback(!0),t._videoCompleteEvent()):(t.videocallback&&t.videocallback(!1),t._videoCloseEvent()),t.videoAd.load()}))},e.prototype.showVideo=function(e,n){var o=this;if(void 0===n&&(n=""),t.prototype.showVideo.call(this,null,n),null==this.videoAd&&this.initVideo(),null==this.videoAd)return e&&e(!1),void this._videoErrorEvent();this.videocallback=e,this.videoAd.show().then(function(){o.recorderPause(),cc.director.pause()}).catch(function(){o.videoAd.load().then(function(){return o.videoAd.show()}).then(function(){o.recorderPause(),cc.director.pause()}).catch(function(){o._videoErrorEvent(),o.initVideo(),wx.showToast({title:"\u6682\u65e0\u5e7f\u544a\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",icon:"none"}),o.videocallback&&o.videocallback(!1)})})},e.prototype.destroyVideo=function(){this.videoAd&&this.videoAd.destroy(),this.videoAd=null},e.prototype.initInter=function(){var t=this;null==d.AdParams.wx.inter||d.AdParams.wx.inter.length<=0||(this.destroyNormalInter(),this.interAd=wx.createInterstitialAd({adUnitId:d.AdParams.wx.inter}),this.interAd&&this.interAd.onLoad(function(){t.logi("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d")}),this.interAd&&this.interAd.onError(function(e){t.logi("show inter err"+JSON.stringify(e)),t.destroyNormalInter()}),this.interAd&&this.interAd.load())},e.prototype.showInterstitial=function(t,e){var n=this;if(!wx.createInterstitialAd||null==d.AdParams.wx.inter||d.AdParams.wx.inter.length<=0)return e&&e();console.log(this.interAd),null==this.interAd?(this.logi("\u9700\u8981\u91cd\u65b0\u52a0\u8f7d\u63d2\u5c4f"),this.initInter()):this.logi("\u4e0d\u9700\u8981\u91cd\u65b0\u52a0\u8f7d\u63d2\u5c4f"),this.interAd?(this.logi("\u63d2\u5c4f\u4e0d\u7a7a  \u76f4\u63a5 \u663e\u793a"),this.interAd&&this.interAd.onClose(function(){n.recorderResume(),cc.director.resume(),e&&e(),n.destroyNormalInter(),n.initInter()}),this.interAd.show().then(function(){n.recorderPause(),cc.director.pause(),t&&t(),n.hideBanner(),n.interShowTime=n.get_time()}).catch(function(){e&&e(),n.destroyNormalInter(),n.initInter()})):(this.logi("\u63d2\u5c4f\u7a7a \u4e0d\u80fd\u5c55\u793a\u4e86"),e&&e())},e.prototype.destroyNormalInter=function(){this.logi("\u9500\u6bc1\u63d2\u5c4f"),this.interAd&&this.interAd.destroy(),this.interAd=null},e.prototype.showNativeInterstitial=function(t,e,n){var o=this;void 0===n&&(n=0),this.get_time()-this.interShowTime<=1e3*r.default.adConfig.interTick||(this.hideNativeInterstitial(),null==this.nativeInterTimer&&(this.nativeInterTimer=new s.default),this.nativeInterTimer.once(function(){o.interCount++,o.interCount%2==1?o.showInterstitial(t,e):o.showCustomInter(t,e)},r.default.isShenHe?0:1e3*n))},e.prototype.showOtherNativeInterstitial=function(t,e,n){void 0===n&&(n=0),this.showNativeInterstitial(t,e,n)},e.prototype.initCustomInter=function(){null==d.AdParams.wx.inter_custom||d.AdParams.wx.inter_custom.length<=0||(this.customInterAd=new l.default,this.customInterAd.init(d.AdParams.wx.inter_custom,l.CustomAdType.Type5x3,30))},e.prototype.initCustomLeft=function(){null==d.AdParams.wx.custom_left||d.AdParams.wx.custom_left.length<=0||(this.customLeftAd=new l.default,this.customLeftAd.init(d.AdParams.wx.custom_left,l.CustomAdType.TypeLeftOne,30))},e.prototype.initCustomRight=function(){null==d.AdParams.wx.custom_right||d.AdParams.wx.custom_right.length<=0||(this.customRightAd=new l.default,this.customRightAd.init(d.AdParams.wx.custom_right,l.CustomAdType.TypeRightOne,30))},e.prototype.showCustomInter=function(t,e){this.customInterAd?this.customInterAd.show(t,e):(console.warn("customInter\u7a7a \u662f\u4e0d\u662f\u6ca1\u521d\u59cb\u5316init Ad"),this.initCustomInter())},e.prototype.showCustomLeft=function(t,e){this.customLeftAd&&this.customLeftAd.show(t,e)},e.prototype.showCustomRight=function(t,e){this.customRightAd&&this.customRightAd.show(t,e)},e.prototype.hideCustomInter=function(){this.customInterAd&&this.customInterAd.hide()},e.prototype.hideCustomLeft=function(){this.customLeftAd&&this.customLeftAd.hide()},e.prototype.hideCustomRight=function(){this.customRightAd&&this.customRightAd.hide()},e.prototype.hideNativeInterstitial=function(){t.prototype.hideNativeInterstitial.call(this)},e.prototype.initRecorder=function(){},e.prototype.recorderPause=function(){},e.prototype.recorderResume=function(){},e.prototype.recorderStart=function(){},e.prototype.recorderStop=function(){},e.prototype.shareRecorder=function(t,e){var n=this;if(null==this.gameRecorder||null==this.videoPath)return this.createToast("\u5206\u4eab\u5931\u8d25"),e&&e();wx.shareAppMessage({channel:"video",query:"",title:r.default.shareWord[0]||"",desc:r.default.shareWord[2]||r.default.shareWord[1]||"",extra:{videoPath:this.videoPath,videoTopics:[r.default.shareWord[2]],hashtag_list:[r.default.shareWord[2]]},success:function(){console.log("\u5206\u4eab\u89c6\u9891\u6210\u529f"),t&&t(),n.onRecoderStop=null,n.videoPath=null},fail:function(t){console.log("\u5206\u4eab\u89c6\u9891\u5931\u8d25",t),e&&e(),t.errMsg.search(/short/gi)>-1?n.createToast("\u5206\u4eab\u5931\u8d25"):t.errMsg.search(/cancel/gi)>-1?n.createToast("\u53d6\u6d88\u5206\u4eab"):n.createToast("\u5206\u4eab\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\uff01")}})},e.prototype.showGamePortal=function(){},e.prototype.showRecorderLayer=function(){},e.prototype.logi=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.LOG.apply(this,a(["[WxAdapter]"],e))},e.prototype.loge=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.LOGE.apply(this,a(["[WxAdapter]"],e))},e.prototype.logw=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.prototype.LOGW.apply(this,a(["[WxAdapter]"],e))},e.prototype.shareMessageToFriend=function(t){console.log("\u5fae\u4fe1\u8bbe\u7f6e\u56de\u8c03"),h.default.checkHasOpenData()?(this._shareToFriendCallback=t,h.default.shareMessageToFriend()):t&&t(!1)},e.prototype.getSubIds=function(){return d.AdParams.wx.subIds&&d.AdParams.wx.subIds.length>0?d.AdParams.wx.subIds:[]},e.prototype.requestGet=function(t,e,n){wx.request({url:t,success:function(t){e&&e(t)},fail:function(t){n&&n(t)}})},e.prototype.initSubmsg=function(){var t=this;wx.uma&&wx.uma.setOpenid(this.openId),window.TDAPP&&(window.TDAPP.register({profileId:this.openId,profileType:1}),window.TDAPP.login({profileId:this.openId,profileType:1}));for(var e=this.getSubIds(),n=this,o=function(o){var a=e[o];i.requestGet(p.default.SubmsgBaseUrl+"/"+(p.default.IS_QQ_GAME?"qq":"wx")+"/checkSub?appId="+d.AdParams.wx.appId+"&openId="+i.openId+"&tmplId="+a,function(e){n.logi(e.data),1==e.data.code?e.data.data.subnum>0?t.logi("\u5df2\u8ba2\u9605\uff1a"+a):(t.logi("\u672a\u8ba2\u9605\uff1a"+a),t.waitSubIds.push(a)):(n.logw("\u83b7\u53d6\u5931\u8d25\uff01"+e.data.msg),t.waitSubIds.push(a))},function(e){n.logw("\u83b7\u53d6\u5931\u8d252\uff01"+e.errMsg),n.logw(e),t.waitSubIds.push(a)})},i=this,a=0;a<e.length;a++)o(a)},e.prototype.submsg=function(t,e){var n=this;this.requestGet(p.default.SubmsgBaseUrl+"/"+(p.default.IS_QQ_GAME?"qq":"wx")+"/subMsg?appId="+d.AdParams.wx.appId+"&openId="+this.openId+"&tmplId="+t,function(t){n.logi(t.data),1==t.data.code?(n.logi("\u8ba2\u9605\u6210\u529f"),e&&e(!0)):(n.logw("\u8ba2\u9605\u5931\u8d25\uff01"+t.data.msg),e&&e(!1))},function(t){n.logw("\u8ba2\u9605\u5931\u8d252\uff01"+t.errMsg),n.logw(t),e&&e(!1)})},e.prototype.setOpenDataShareCallback=function(t){this._shareToFriendCallback=t},e.prototype.userFrom=function(t){try{var e=u.default.getItem("__clickid__");if(e)return t&&t(!0);var n=wx.getLaunchOptionsSync().query;if(e=n.gdt_vid)return u.default.setItem("__clickid__",e),t&&t(!0);var o=n.weixinadinfo;return o&&o.weixinadinfo.split(".")[0]?t&&t(!0):t&&t(!1)}catch(i){t&&t(!1)}},e.prototype.preShowVideo=function(t){1==this.shareValue?t&&t(!0):t&&t(!1)},e}(c.default);n.default=f,cc._RF.pop()},{"../../GxAdParams":"GxAdParams","../../GxGame":"GxGame","../../core/GxConstant":"GxConstant","../../util/DataStorage":"DataStorage","../../util/GxTimer":"GxTimer","../../util/OpenDataUtil":"OpenDataUtil","../base/BaseAdapter":"BaseAdapter","./WxCustomAd":"WxCustomAd"}],WxCustomAd:[function(t,e,n){"use strict";var o;cc._RF.push(e,"f9ec7YstblOuLFag0fMkklh","WxCustomAd"),Object.defineProperty(n,"__esModule",{value:!0}),n.CustomAdType=void 0,function(t){t.TypeLeftOne="TypeLeftOne",t.TypeRightOne="TypeRightOne",t.Type5x3="Type5x3",t.Type5x2="Type5x2",t.TypeMoreBanner="TypeMoreBanner"}(o=n.CustomAdType||(n.CustomAdType={}));var i=function(){function t(){this._isLandscape=!1,this._userClosed=!0,this._adType="",this._adUnitId="",this._adInstance=null,this._showing=!1,this._style=null,this._refreshTime=0,this._timer=null,this._closeCallback=null,this._firstLoad=!0,this._showed=!0,this._screenInfo=null,this._loadEnd=!1}return t.prototype.init=function(t,e,n){if(void 0===n&&(n=60),window.wx&&(this._screenInfo=wx.getSystemInfoSync()),this._screenInfo.screenHeight<this._screenInfo.screenWidth?this._isLandscape=!0:this._isLandscape=!1,this._adType=e,this._adUnitId=t,this._refreshTime=n,this._screenInfo&&"devtoolsD"!=this._screenInfo.platform){var i={};switch(e){case o.TypeLeftOne:i={left:0,top:50,width:375};break;case o.TypeRightOne:i={left:this._screenInfo.screenWidth-70,top:50,width:375};break;case o.Type5x3:i=this._isLandscape?{left:this._screenInfo.screenWidth/2-180,top:10,width:this._screenInfo.screenWidth/5,fixed:!1}:{left:0,top:this._screenInfo.screenHeight/2-230,fixed:!1};break;case o.Type5x2:i={left:(this._screenInfo.screenWidth-360)/2,top:(this._screenInfo.screenHeight-188)/2-60,width:360};break;case o.TypeMoreBanner:i={left:(this._screenInfo.screenWidth-360)/2,top:this._screenInfo.screenHeight-106,width:360};break;default:console.error("\u8fd9\u662f\u54ea\u4e2a"),console.error("\u8fd9\u662f\u54ea\u4e2a"),console.error("\u8fd9\u662f\u54ea\u4e2a"),console.error("\u8fd9\u662f\u54ea\u4e2a")}this._style=i,t&&t.length>0&&this.loadAd()}else console.log("\u7248\u672c\u4f4e\u4e0d\u521d\u59cb\u5316")},t.prototype.setRefreshTime=function(t){this._refreshTime=t},t.prototype._onLoadCallback=function(){console.log(this._adType+"loadEnd")},t.prototype._onErrorCallback=function(){console.log(this._adType+"loadError")},t.prototype._onHideCallback=function(){this._userClosed&&this.setShowStatus(!1,"_onHideCallback"),this._adType==o.Type5x3&&(console.log("hide 5x3\u4e86"),this._closeCallback&&console.log("hide  \u53ef\u4ee5 \u56de\u8c03\u5173\u95ed"),this._closeCallback&&this._closeCallback(!0),this._closeCallback=null,this._userClosed&&this._reloadAd())},t.prototype._reloadAd=function(){this._adInstance&&(this._adInstance.offLoad(this._onLoadCallback),this._adInstance.offError(this._onErrorCallback),this._adInstance.offClose(this._onCloseCallback),this._adInstance.offHide(this._onHideCallback),this._adInstance.destroy(),this._adInstance=null),this._showed=!0,this.loadAd()},t.prototype._onCloseCallback=function(){this.setShowStatus(!1,"_onCloseCallback"),this._closeCallback&&console.log("close \u53ef\u4ee5 \u56de\u8c03\u5173\u95ed"),console.log(this._adType+":close"),this._closeCallback&&this._closeCallback(!0),this._closeCallback=null,this._reloadAd()},t.prototype.loadAd=function(){var t=this;if(null!=this._timer&&clearTimeout(this._timer),this._showed){var e=wx.createCustomAd({adUnitId:this._adUnitId,style:this._style}),n=this,o=function(){if(e){n._showed=!1,n._loadEnd=!0;var t=n._showing;e.offLoad(o),e.offError(i),n._adInstance&&(n._adInstance.offLoad(n._onLoadCallback),n._adInstance.offError(n._onErrorCallback),n._adInstance.destroy(),n._adInstance=null),n._adInstance=e,n._adInstance.onLoad(n._onLoadCallback.bind(n)),n._adInstance.onError(n._onErrorCallback.bind(n)),n._adInstance.onClose(n._onCloseCallback.bind(n)),n._adInstance.onHide(n._onHideCallback.bind(n)),t&&n.show()}n._refreshTime>0&&(n._timer=setTimeout(function(){n.loadAd()},n._firstLoad?1e3*n._refreshTime+1e3*Math.floor(16*Math.random()+5):1e3*n._refreshTime),n._firstLoad=!1)},i=function(a){console.log(n._adType+t._adUnitId+"loadAdError:::"+JSON.stringify(a)),e&&(e.offLoad(o),e.offError(i),e.destroy(),e=null),n._refreshTime>0&&(n._timer=setTimeout(function(){n.loadAd()},1e3*(n._refreshTime/3+Math.floor(16*Math.random()+5))))};e.onLoad(o),e.onError(i)}else this._timer=setTimeout(function(){t.loadAd()},15e3)},t.prototype.show=function(t,e){var n=this;void 0===t&&(t=null),void 0===e&&(e=null),this._closeCallback=e,this._userClosed=!0,this._showed=!0,this._adInstance?this._adInstance.show().then(function(){n.setShowStatus(!0,"show 1"),t&&t(!0)}).catch(function(e){console.log(n._adType+"\u663e\u793a\u5931\u8d25"),"the advertisement has shown"==!e.errMsg?(console.log(JSON.stringify(e)),n.setShowStatus(!1,"show 2")):(n._closeCallback&&n._closeCallback(!1),n._closeCallback=null),t&&t(!1)}):(console.log(this._adType+"\u5e7f\u544a\u5b9e\u4f8b\u7a7a \u663e\u793a\u5931\u8d25"),this.setShowStatus(!1,"show 3"),t&&t(!1),this._closeCallback&&this._closeCallback(!1),this._closeCallback=null)},t.prototype.showAndCallback=function(t){var e=this;this._showed=!0,this._adInstance?(this._adType==o.TypeMoreBanner&&(this._adInstance._style=this._style),this._adInstance.show().then(function(){t&&t(!0),e.setShowStatus(!0,"showAndCallback 1")}).catch(function(n){"the advertisement has shown"==!n.errMsg?(console.log(e._adType+"\u663e\u793a\u5931\u8d25"),console.log(JSON.stringify(n)),e.setShowStatus(!1,"showAndCallback 2"),t&&t(!1)):t&&t(!0)})):(this.setShowStatus(!1,"showAndCallback 3"),t&&t(!1))},t.prototype.showDownAndCallback=function(t){var e=this;this._showed=!0,this._adInstance?(this._adType==o.TypeMoreBanner&&(this._adInstance._style={left:(this._screenInfo.screenWidth-.4*this._screenInfo.screenWidth)/2,top:this._screenInfo.screenHeight-.2*this._screenInfo.screenWidth}),this._adInstance.show().then(function(){e.setShowStatus(!0,"showDownAndCallback 1"),t&&t(!0)}).catch(function(n){"the advertisement has shown"==!n.errMsg?(console.log(e._adType+"\u663e\u793a\u5931\u8d25"),console.log(JSON.stringify(n)),e.setShowStatus(!1,"showDownAndCallback 2"),t&&t(!1)):t&&t(!0)})):(this.setShowStatus(!1,"showDownAndCallback 3"),t&&t(!1))},t.prototype.setShowStatus=function(t){this._showing=t,this._adType,o.TypeMoreBanner},t.prototype.isShowing=function(){return!(!this._adInstance||!this._adInstance.isShow())},t.prototype.hide=function(){this.setShowStatus(!1,"hide"),this._userClosed=!1,console.log("\u9690\u85cf\u5e7f\u544a"),this._adInstance&&this._adInstance.hide()},t.prototype.isReady=function(){return this._adInstance&&this._loadEnd?(console.log("\u51c6\u5907\u597d\u4e86"),!0):(console.log("\u6ca1\u51c6\u5907\u597d "),!1)},t}();n.default=i,cc._RF.pop()},{}],ZFBAdapter:[function(t,e,n){"use strict";cc._RF.push(e,"352b2w7UT5EALqiuyzuSoud","ZFBAdapter");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a=t("../../GxAdParams"),r=t("../base/BaseAdapter"),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._systemInfo=null,e}return i(e,t),e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initAd=function(){this.isInitAd||(this.isInitAd=!0,this._systemInfo=my.getSystemInfoSync(),t.prototype.initAd.call(this),this.initBanner(),this.initVideo())},e.prototype.initBanner=function(){var t=this;if(0!=a.AdParams.zfb.banner.length){this.bannerAd&&this.destroyBanner();var e=.8*this._systemInfo.windowWidth;e>320&&(e=320);var n=.26*e,o=(this._systemInfo.windowWidth-e)/2,i=this._systemInfo.windowHeight-n;this.bannerAd=my.createBannerAd({adUnitId:a.AdParams.zfb.banner,style:{left:o,top:i,width:e}}),this.bannerAd.onLoad(function(){console.log(" banner \u52a0\u8f7d\u5b8c\u6210"),console.log("\u80fd\u83b7\u5f97\u4ec0\u4e48\uff1a"+JSON.stringify(t.bannerAd))}),this.bannerAd.onError(function(t){console.log(" banner \u5e7f\u544a\u9519\u8bef"+JSON.stringify(t))}),console.log(JSON.stringify(this.bannerAd))}},e.prototype.showBanner=function(){var t=this;null==this.bannerAd&&this.initBanner(),null!=this.bannerAd&&this.bannerAd.show().then(function(){}).catch(function(){t.initBanner(),t.bannerAd.show()})},e.prototype.hideBanner=function(){this.bannerAd&&this.bannerAd.hide()},e.prototype.destroyBanner=function(){this.bannerAd&&this.bannerAd.destroy(),this.bannerAd=null},e.prototype.initVideo=function(){var t=this;null==a.AdParams.zfb.video||a.AdParams.zfb.video.length<=0?console.warn("\u6fc0\u52b1\u89c6\u9891\u53c2\u6570\u7a7a"):(this.destroyVideo(),this.videoAd=my.createRewardedAd({adUnitId:a.AdParams.zfb.video}),this.videoAd.onLoad(function(t){console.log("\u6fc0\u52b1\u89c6\u9891\u52a0\u8f7d",t)}),this.videoAd.onError(function(t){console.log("\u6fc0\u52b1\u89c6\u9891-\u5931\u8d25",t)}),this.videoAd.onClose(function(e){console.log("\u6fc0\u52b1\u89c6\u9891\u5173\u95ed"),t.recorderResume(),e&&e.isEnded?(console.log("\u6fc0\u52b1\u89c6\u9891\u5b8c\u6210"),t.videocallback&&t.videocallback(!0)):t.videocallback&&t.videocallback(!1)}))},e.prototype.showVideo=function(e,n){var o=this;void 0===n&&(n=""),t.prototype.showVideo.call(this,null,n),null==this.videoAd&&this.initVideo(),null!=this.videoAd?(this.videocallback=e,this.videoAd.show().then(function(){o.recorderPause()}).catch(function(){o.videoAd.load().then(function(){return o.videoAd.show()}).then(function(){o.recorderPause()}).catch(function(){o.videoAd.load(),console.log("\u6682\u65e0\u5e7f\u544a"),o.videocallback&&o.videocallback(!1)})})):e&&e(!1)},e.prototype.destroyVideo=function(){this.videoAd&&this.videoAd.destroy(),this.videoAd=null},e.prototype.showInterstitial=function(t,e){var n=this;if(!my.createInterstitialAd||null==a.AdParams.zfb.inter||a.AdParams.zfb.inter.length<=0)return e&&e();this.destroyNormalInter(),this.interAd=my.createInterstitialAd({adUnitId:a.AdParams.zfb.inter}),this.interAd&&this.interAd.onLoad(function(){console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d"),n.interAd.show().then(function(){n.recorderPause(),t&&t()})}),this.interAd&&this.interAd.onError(function(t){console.log("show inter err"+JSON.stringify(t)),n.destroyNormalInter()}),this.interAd&&this.interAd.onClose(function(){n.recorderResume(),e&&e(),n.destroyNormalInter()})},e.prototype.destroyNormalInter=function(){this.interAd&&this.interAd.destroy(),this.interAd=null},e.prototype.showNativeInterstitial=function(t,e){this.showInterstitial(t,e)},e.prototype.showOtherNativeInterstitial=function(t,e){this.showInterstitial(t,e)},e.prototype.recorderPause=function(){this.gameRecorder&&this.gameRecorderState==r.RECORDER_STATE.START&&this.gameRecorder.pause()},e.prototype.recorderResume=function(){this.gameRecorder&&this.gameRecorderState==r.RECORDER_STATE.PAUSE&&this.gameRecorder.resume()},e}(r.default);n.default=s,cc._RF.pop()},{"../../GxAdParams":"GxAdParams","../base/BaseAdapter":"BaseAdapter"}],gxGameEnd:[function(t,e,n){"use strict";cc._RF.push(e,"2a044t1h7hO3ZviipKy6nQz","gxGameEnd");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../GxGame"),s=cc._decorator,c=s.ccclass,d=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnArr=[],e.touchNode=null,e.dotNode=null,e.switchOpen=!1,e}return i(e,t),e.prototype.start=function(){var t=this;this.touchNode.on(cc.Node.EventType.TOUCH_END,function(){if(t.switchOpen){console.log("\u53ef\u4ee5\u7684"),t.dotNode.opacity=Math.abs(255-t.dotNode.opacity);for(var e=255==t.dotNode.opacity,n=0;n<t.btnArr.length;n++){var o=t.btnArr[n];if(o){var i=o.node.getChildByName("videoIcon");i&&(i.active=e)}}}});for(var e=function(e){var o=n.btnArr[e];o&&(o.enableAutoGrayEffect=!1,o.interactable=!1,o.node.on(cc.Node.EventType.TOUCH_END,function(e){255==t.dotNode.opacity?r.default.Ad().showVideo(function(){cc.Component.EventHandler.emitEvents(o.clickEvents,e)}):cc.Component.EventHandler.emitEvents(o.clickEvents,e)},n))},n=this,o=0;o<this.btnArr.length;o++)e(o)},e.prototype.onEnable=function(){this.switchOpen=r.default.gGB("gev"),this.switchOpen?(this.touchNode.opacity=255,this.dotNode.opacity=255):(this.dotNode.opacity=0,this.touchNode.opacity=0);for(var t=0;t<this.btnArr.length;t++)if(this.btnArr[t]){var e=this.btnArr[t].node.getChildByName("videoIcon");e&&(e.active=this.switchOpen)}},a([d({type:cc.Button,tooltip:"\u8981\u63a7\u5236\u7684\u6309\u94ae"})],e.prototype,"btnArr",void 0),a([d({type:cc.Node,tooltip:"\u89e6\u6478\u63a7\u5236\u70b9\u663e\u793a\u4e0d\u663e\u793a"})],e.prototype,"touchNode",void 0),a([d({type:cc.Node,tooltip:"\u70b9"})],e.prototype,"dotNode",void 0),a([c],e)}(cc.Component);n.default=l,cc._RF.pop()},{"../../GxGame":"GxGame"}],gx_native_banner:[function(t,e,n){"use strict";cc._RF.push(e,"8bca6xGYB9PFKmCb5Rqel2l","gx_native_banner");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../core/GxEnum"),s=t("../../GxGame"),c=t("../../util/ResUtil"),d=t("../../GxAdParams"),l=t("../../core/GxConstant"),u=cc._decorator,h=u.ccclass,p=u.property,f=function(t){function e(){var e=t.call(this)||this;return e.icon_close=null,e.lb_title=null,e.lb_desc=null,e.ad_logo=null,e.img_icon=null,e.is_reprot_click=!1,e.onShow=null,e.onHide=null,e.has_click_warp=!1,e}return i(e,t),e.prototype.click_adv_warp=function(){this.report_click(),this.has_click_warp=!0},e.prototype.show=function(t,e,n){if(this.onShow=e,this.onHide=n,this.node&&cc.isValid(this.node)&&(this.node.parent=cc.director.getScene(),cc.game.addPersistRootNode(this.node),this.node.zIndex=cc.macro.MAX_ZINDEX,this.node.active=!1),cc.isValid(this.node)&&!this.node.active){if(cc.winSize.width<=cc.winSize.height?this.node.scale=cc.winSize.width/this.node.width:this.node.scale=.7,d.AdParams.oppo.bannerOnTop){var o=this.node.getComponent(cc.Widget);o?(o.isAlignBottom=!1,o.isAlignTop=!0,o.top=0):(o.isAlignTop=!1,o.isAlignBottom=!0,o.bottom=0)}this.set_default_pos(),this.on_show(t)}},e.prototype.start=function(){var t=this.node.getChildByName("native_node");if(t){var e=t.getChildByName("adflag"),n=t.getChildByName("adflagmi");e&&(l.default.IS_MI_GAME?e.active=!1:e.active=!0),n&&(l.default.IS_MI_GAME?n.active=!0:n.active=!1)}this.node.on(cc.Node.EventType.TOUCH_END,this.on_click_adv,this)},e.prototype.update_view=function(){if(cc.isValid(this.node)&&this.node.activeInHierarchy)if(s.default.adConfig.canRefresh){var t=s.default.Ad().getLocalNativeData(r.ad_native_type.banner);t?(this.native_data=t,this.refresh()):this.hide()}else this.hide();else this.hide()},e.prototype.on_show=function(t){this.native_data=t||s.default.Ad().getLocalNativeData(r.ad_native_type.banner),this.native_data?(this.node.active=!0,this.is_reprot_click=!1,this.refresh()):this.hide()},e.prototype.refresh=function(){var t=this;this.lb_desc.string=this.native_data.desc||"",this.lb_title.string=this.native_data.title||"",this.ad_logo.string=this.native_data.logoTxt||"\u5e7f\u544a",l.default.IS_HUAWEI_GAME&&(this.ad_logo.string="\u5e7f\u544a");var e=this.native_data.imgUrlList;if(e.length<=0&&(e=this.native_data.iconUrlList),e.length>0){var n=e[0];n.lastIndexOf("."),c.default.loadRemoteSpiteFrame(n,function(e,n){if(cc.isValid(t.node,!0))return e?t.img_icon.getComponent(cc.Sprite).spriteFrame=null:void(t.img_icon.getComponent(cc.Sprite).spriteFrame=n)})}this.report_show(),this.onShow&&this.onShow()},e.prototype.on_click_adv2=function(){this.on_click_adv()},e.prototype.on_click_adv=function(){this.is_reprot_click||(this.is_reprot_click=!0,this.report_click())},e.prototype.on_click_close=function(){this.hide()},e.prototype.report_click=function(){this.native_data&&(s.default.Ad().reportAdClick(this.native_data),this.update_view())},e.prototype.report_show=function(){this.native_data&&s.default.Ad().reportAdShow(this.native_data)},e.prototype.hide=function(){this.node&&this.node.active&&(this.node.active=!1),this.on_hide()},e.prototype.on_hide=function(){this.onHide&&this.onHide()},e.prototype.set_default_pos=function(){this.node.x=0,this.node.y=-cc.winSize.height/2},e.prototype.onDisable=function(){this.unschedule(this.update_view)},e.prototype.onDestroy=function(){this.unschedule(this.update_view)},a([p(cc.Node)],e.prototype,"icon_close",void 0),a([p(cc.Label)],e.prototype,"lb_title",void 0),a([p(cc.Label)],e.prototype,"lb_desc",void 0),a([p(cc.Label)],e.prototype,"ad_logo",void 0),a([p(cc.Sprite)],e.prototype,"img_icon",void 0),a([h],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../../GxAdParams":"GxAdParams","../../GxGame":"GxGame","../../core/GxConstant":"GxConstant","../../core/GxEnum":"GxEnum","../../util/ResUtil":"ResUtil"}],gx_native_icon:[function(t,e,n){"use strict";cc._RF.push(e,"e8f48VSH7tMVrhCY6vxPMXz","gx_native_icon");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../core/GxEnum"),s=t("../../GxGame"),c=t("../../util/ResUtil"),d=t("../../core/GxConstant"),l=cc._decorator,u=l.ccclass,h=l.property,p=function(t){function e(){var e=t.call(this)||this;return e.icon_close=null,e.native_node=null,e.img_icon=null,e.ad_logo=null,e.set_background_on_show(),e}return i(e,t),e.prototype.on_click_adv=function(){this.report_click()},e.prototype.on_click_close=function(){this.hide()},e.prototype.report_click=function(){this.native_data&&(s.default.Ad().reportAdClick(this.native_data),this.update_view())},e.prototype.start=function(){var t=this.node.getChildByName("native_node");if(t){var e=t.getChildByName("adflag"),n=t.getChildByName("adflagmi");e&&(d.default.IS_MI_GAME?e.active=!1:e.active=!0),n&&(d.default.IS_MI_GAME?n.active=!0:n.active=!1)}},e.prototype.report_show=function(){this.native_data&&s.default.Ad().reportAdShow(this.native_data)},e.prototype.show=function(t,e){this.node&&!this.node.parent&&t&&e&&(this.native_data=e,this.node.parent=t,this.on_show())},e.prototype.update_view=function(){if(s.default.adConfig.canRefresh)this.hide();else if(cc.isValid(this.node)&&this.node.activeInHierarchy){var t=s.default.Ad().getLocalNativeData(r.ad_native_type.native_icon);t&&(this.native_data=t,this.refresh())}},e.prototype.report_click_update_view=function(t){this.node&&this.node.parent&&(this.native_data=t,this.refresh())},e.prototype.on_show=function(){this.icon_close.on(cc.Node.EventType.TOUCH_END,this.on_click_close,this),this.img_icon.node.on(cc.Node.EventType.TOUCH_END,this.on_click_adv,this),this.refresh()},e.prototype.refresh=function(){var t=this;this.ad_logo.string=this.native_data.logoTxt||"\u5e7f\u544a",d.default.IS_HUAWEI_GAME&&(this.ad_logo.string="\u5e7f\u544a");var e=this.native_data.imgUrlList;if(e.length<=0&&(e=this.native_data.iconUrlList),e.length>0){var n=e[0],o=n.lastIndexOf(".");n.substring(o+1),c.default.loadRemoteSpiteFrame(n,function(e,n){if(cc.isValid(t.node,!0))return e?t.img_icon.getComponent(cc.Sprite).spriteFrame=null:void(t.img_icon.getComponent(cc.Sprite).spriteFrame=n)})}this.report_show()},e.prototype.hide=function(){this.node&&this.node.parent&&(this.node.parent.removeChild(this.node),this.on_hide())},e.prototype.on_hide=function(){this.icon_close.off(cc.Node.EventType.TOUCH_END,this.on_click_close,this),this.img_icon.node.off(cc.Node.EventType.TOUCH_END,this.on_click_adv,this)},e.prototype.set_default=function(){},e.prototype.set_background_on_show=function(){},a([h(cc.Node)],e.prototype,"icon_close",void 0),a([h(cc.Node)],e.prototype,"native_node",void 0),a([h(cc.Sprite)],e.prototype,"img_icon",void 0),a([h(cc.Label)],e.prototype,"ad_logo",void 0),a([u],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../../GxGame":"GxGame","../../core/GxConstant":"GxConstant","../../core/GxEnum":"GxEnum","../../util/ResUtil":"ResUtil"}],gx_native_inner_interstitial:[function(t,e,n){"use strict";cc._RF.push(e,"7bd1dmem7VKNKT2vBv/lUQ2","gx_native_inner_interstitial");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../core/GxEnum"),s=t("../../GxGame"),c=t("../../util/ResUtil"),d=t("../../core/GxConstant"),l=cc._decorator,u=l.ccclass,h=l.property,p=function(t){function e(){var e=t.call(this)||this;return e.icon_close=null,e.lb_title=null,e.lb_desc=null,e.ad_logo=null,e.img_icon=null,e.click_back=void 0,e.has_click_warp=!1,e}return i(e,t),e.prototype.on_click_adv=function(){this.report_click()},e.prototype.click_adv_warp=function(){this.report_click(),this.has_click_warp=!0},e.prototype.on_click_close=function(){this.hide()},e.prototype.report_click=function(){this.native_data?(this.click_back&&this.click_back(),s.default.Ad().reportAdClick(this.native_data),this.update_view()):this.hide()},e.prototype.report_show=function(){this.native_data&&s.default.Ad().reportAdShow(this.native_data)},e.prototype.show=function(t,e,n,o,i){this.node&&!this.node.parent&&(this.native_data=e,this.show_back=o||void 0,this.hide_back=i||void 0,this.click_back=n||void 0,this.node.parent=t,this.set_default_pos(),this.on_show())},e.prototype.update_view=function(){if(s.default.adConfig.canRefresh){var t=s.default.Ad().getLocalNativeData(r.ad_native_type.inter1);t&&cc.isValid(this.node,!0)&&this.node.activeInHierarchy&&(this.native_data=t,this.refresh())}else this.hide()},e.prototype.report_click_update_view=function(t){this.node&&this.node.parent&&(this.native_data=t,this.refresh())},e.prototype.start=function(){var t=this.node.getChildByName("native_node");if(t){var e=t.getChildByName("adflag"),n=t.getChildByName("adflagmi");e&&(d.default.IS_MI_GAME?e.active=!1:e.active=!0),n&&(d.default.IS_MI_GAME?n.active=!0:n.active=!1)}},e.prototype.on_show=function(){this.icon_close.on(cc.Node.EventType.TOUCH_END,this.on_click_close,this),this.img_icon.node.on(cc.Node.EventType.TOUCH_END,this.on_click_adv,this),this.refresh(),this.show_back&&this.show_back()},e.prototype.refresh=function(){var t=this;this.lb_title.string=this.native_data.title||"",this.lb_desc.string=this.native_data.desc||"",this.ad_logo.string=this.native_data.logoTxt||"\u5e7f\u544a",d.default.IS_HUAWEI_GAME&&(this.ad_logo.string="\u5e7f\u544a");var e=this.native_data.imgUrlList;if(e.length<=0&&(e=this.native_data.iconUrlList),e.length>0){var n=e[0],o=n.lastIndexOf(".");n.substring(o+1),c.default.loadRemoteSpiteFrame(n,function(e,n){if(cc.isValid(t.node,!0))return e?t.img_icon.getComponent(cc.Sprite).spriteFrame=null:void(t.img_icon.getComponent(cc.Sprite).spriteFrame=n)})}this.report_show()},e.prototype.hide=function(){this.node&&this.node.parent&&(this.node.parent.removeChild(this.node),this.on_hide())},e.prototype.on_hide=function(){this.icon_close.off(cc.Node.EventType.TOUCH_END,this.on_click_close,this),this.img_icon.node.off(cc.Node.EventType.TOUCH_END,this.on_click_adv,this),this.hide_back&&this.hide_back()},e.prototype.set_default_pos=function(){var t=this.node.parent,e=t.width*(.5-t.anchorX),n=t.height*(.5-t.anchorY);this.node.position=cc.v3(e,n,0)},e.prototype.set_style_pos=function(){},e.prototype.onDisable=function(){this.hide_back&&this.hide_back(),this.hide_back=null,this.unschedule(this.update_view)},e.prototype.onDestroy=function(){this.hide_back&&this.hide_back(),this.hide_back=null,this.unschedule(this.update_view)},a([h(cc.Node)],e.prototype,"icon_close",void 0),a([h(cc.Label)],e.prototype,"lb_title",void 0),a([h(cc.Label)],e.prototype,"lb_desc",void 0),a([h(cc.Label)],e.prototype,"ad_logo",void 0),a([h(cc.Sprite)],e.prototype,"img_icon",void 0),a([u],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../../GxGame":"GxGame","../../core/GxConstant":"GxConstant","../../core/GxEnum":"GxEnum","../../util/ResUtil":"ResUtil"}],gx_native_interstitial:[function(t,e,n){"use strict";cc._RF.push(e,"9e0b4Nq7EdHo6HlzQQG5r61","gx_native_interstitial");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,o){var i,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(a<3?i(r):a>3?i(e,n,r):i(e,n))||r);return a>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../core/GxEnum"),s=t("../../GxGame"),c=t("../../util/ResUtil"),d=t("../../core/GxConstant"),l=cc._decorator,u=l.ccclass,h=l.property,p=function(t){function e(){var e=t.call(this)||this;return e.icon_close=null,e.lb_title=null,e.lb_desc=null,e.ad_logo=null,e.img_icon=null,e.img_bg=null,e.btn_check=null,e.easy_click=null,e.native_node=null,e.lageBg=null,e}return i(e,t),e.prototype.start=function(){var t=this.node.getChildByName("native_node");if(t){var e=t.getChildByName("adflag"),n=t.getChildByName("adflagmi");e&&(d.default.IS_MI_GAME?e.active=!1:e.active=!0),n&&(d.default.IS_MI_GAME?n.active=!0:n.active=!1)}this.node.zIndex=10001,cc.director.once("\u6e05\u9664\u539f\u751f",this.hide.bind(this))},e.prototype.on_click_adv2=function(){this.easy_click.active=!1,this.has_easy_click=!0,this.report_click()},e.prototype.on_click_adv=function(){this.report_click()},e.prototype.on_click_close=function(){this.hide()},e.prototype.report_click=function(){if(this.native_data)if(s.default.Ad().reportAdClick(this.native_data),s.default.adConfig.canRefresh){var t=s.default.Ad().getLocalNativeData(r.ad_native_type.inter2);t&&cc.isValid(this.node,!0)?(this.native_data=t,this.refresh()):this.hide()}else this.hide();else this.hide()},e.prototype.report_show=function(){this.native_data&&s.default.Ad().reportAdShow(this.native_data)},e.prototype.show=function(t,e,n){this.node&&!this.node.parent&&(this.native_data=t,this.node.parent=cc.director.getScene(),this.node.zIndex=1e5,this.show_back=e||void 0,this.hide_back=n||void 0,this.on_show())},e.prototype.on_show=function(){s.default.Ad().canIn()&&this.lageBg?(this.lageBg.active=!0,this.lageBg.on(cc.Node.EventType.TOUCH_END,this.on_click_adv,this)):this.lageBg.active=!1,this.native_node.on(cc.Node.EventType.TOUCH_END,this.on_click_adv,this),this.icon_close.on(cc.Node.EventType.TOUCH_END,this.on_click_close,this),this.img_bg.node.on(cc.Node.EventType.TOUCH_END,this.on_click_adv,this),this.btn_check.on(cc.Node.EventType.TOUCH_END,this.on_click_adv,this),this.easy_click.on(cc.Node.EventType.TOUCH_END,this.on_click_adv2,this),this.refresh(),this.show_back&&this.show_back()},e.prototype.refresh=function(){var t=this;this.lb_title.string=this.native_data.title||"",this.lb_desc.string=this.native_data.desc||"",this.ad_logo.string=this.native_data.logoTxt||this.native_data.source||"\u5e7f\u544a",d.default.IS_HUAWEI_GAME&&(this.ad_logo.string="\u5e7f\u544a");var e=this.native_data.imgUrlList;if(e.length<=0&&(e=this.native_data.iconUrlList),e.length>0){var n=e[0],o=n.lastIndexOf(".");n.substring(o+1),console.log("1111finalUrl:"+n),c.default.loadRemoteSpiteFrame(n,function(e,n){if(cc.isValid(t.node,!0))return e?t.img_bg.getComponent(cc.Sprite).spriteFrame=null:void(t.img_bg.getComponent(cc.Sprite).spriteFrame=n)});var i="";this.native_data.iconUrlList&&this.native_data.iconUrlList.length>0?i=this.native_data.iconUrlList[0]:this.native_data.icon&&(i=this.native_data.icon),i&&(this.img_icon.sizeMode=cc.Sprite.SizeMode.CUSTOM,this.img_icon.node.width=150,this.img_icon.node.width=150,c.default.loadRemoteSpiteFrame(i,function(e,n){if(cc.isValid(t.node,!0))return e?t.img_icon.spriteFrame=null:void(t.img_icon.spriteFrame=n)}))}this.report_show(),this.has_easy_click=!1},e.prototype.hide=function(){this.node&&this.node.parent&&(this.node.destroy(),this.on_hide())},e.prototype.on_hide=function(){this.lageBg&&this.lageBg.active&&this.lageBg.on(cc.Node.EventType.TOUCH_END,this.on_click_adv,this),this.lageBg.active=!1,this.native_node.off(cc.Node.EventType.TOUCH_END,this.on_click_adv,this),this.icon_close.off(cc.Node.EventType.TOUCH_END,this.on_click_close,this),this.img_bg.node.off(cc.Node.EventType.TOUCH_END,this.on_click_adv,this),this.btn_check.off(cc.Node.EventType.TOUCH_END,this.on_click_adv,this),this.easy_click.off(cc.Node.EventType.TOUCH_END,this.on_click_adv2,this),this.hide_back&&this.hide_back()},e.prototype.onDisable=function(){this.hide_back&&this.hide_back(),this.hide_back=null},e.prototype.onDestroy=function(){cc.director.off("\u6e05\u9664\u539f\u751f",this.hide.bind(this)),this.hide_back=null},a([h(cc.Node)],e.prototype,"icon_close",void 0),a([h(cc.Label)],e.prototype,"lb_title",void 0),a([h(cc.Label)],e.prototype,"lb_desc",void 0),a([h(cc.Label)],e.prototype,"ad_logo",void 0),a([h(cc.Sprite)],e.prototype,"img_icon",void 0),a([h(cc.Sprite)],e.prototype,"img_bg",void 0),a([h(cc.Node)],e.prototype,"btn_check",void 0),a([h(cc.Node)],e.prototype,"easy_click",void 0),a([h(cc.Node)],e.prototype,"native_node",void 0),a([h(cc.Node)],e.prototype,"lageBg",void 0),a([u],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../../GxGame":"GxGame","../../core/GxConstant":"GxConstant","../../core/GxEnum":"GxEnum","../../util/ResUtil":"ResUtil"}],ovad:[function(t,e,n){"use strict";cc._RF.push(e,"9ac2b4ZwDRMg73oDo8sM0jl","ovad"),Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../GxGame");window.ovad={_platform:window.qg?window.qg:null,_touchEndCallback:null,_logEnable:!0,_tvCD:!1,_tvUtilKey:"tv",_boxShowing:!1,_num:0,init:function(){var t=this;if(window.qg){this._platform=window.qg;var e=o.default.gGN("box",30);if(1==this._num)return;this._num=1,setTimeout(function(){o.default.gGB("box")&&t.aShowBox()},1e3*e)}},aShowBox:function(){var t=this;this.showBox(function(){},function(){setTimeout(function(){t.bShowBox()},1e3*o.default.gGN("box",30))},function(){},!1)},bShowBox:function(){this.aShowBox()},enterLv:function(t,e){if(!this._platform)return this._logger("platform is null"),void(e&&e());this._tvCD?this._logger("tvcd ing"):(this._tvCD=!0,o.default.gGB(this._tvUtilKey)?(this._touchEndCallback=e,this._platform.offTouchStart?(this._platform.offTouchStart(this._touchEnd),this._platform.onTouchStart(this._touchEnd)):(window.removeEventListener("touchstart",this._touchEnd,!1),window.addEventListener("touchstart",this._touchEnd,!1))):this._logger("no tv"))},_touchEnd:function(){setTimeout(function(){window.ovad._tvCD=!1},1e3*o.default.gGN(window.ovad._tvUtilKey,30)),window.ovad.offTouchStart?window.ovad._platform.offTouchStart(window.ovad._touchEnd):window.removeEventListener("touchstart",window.ovad._touchEnd,!1),window.ovad._logger("\u64ad\u653e\u5e7f\u544a"),o.default.Ad().showVideo(function(){window.ovad._touchEndCallback&&window.ovad._touchEndCallback()},"tv")},_logger:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logEnable&&console.log("ovad:"+t)},showBox:function(t,e,n,i){var a=this;void 0===i&&(i=!1),this._boxShowing?e&&e():(this._boxShowing=!0,o.default.Ad().showCrazyPoint(t,function(){a._boxShowing=!1,e&&e()},n,i))},showBanner:function(t,e,n,i){void 0===n&&(n=null),void 0===i&&(i=null),o.default.gGB("tbanner")&&o.default.Ad().showPositionBanner(t,e,n,i)}},cc._RF.pop()},{"../../GxGame":"GxGame"}],"uma.min":[function(t,e,n){"use strict";if(cc._RF.push(e,"8786ecbLvRJo62rcyq2DMUe","uma.min"),n.__esModule=!0,n.default=void 0,null!=window.qg&&null!=window.qg){var o=function(){},i=function(){return qg},a=function(t,e){function n(){this.constructor=t}E(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=function(t){var e=null;switch(t){case J:e=function(){var t=null,e=X().cloneCurrentSession();return e&&(t={header:{st:"1"},analytics:{sessions:[e]}}),t}();break;case W:e=function(){var t=null,e={},n=X().cloneCurrentSession();if(n){var o=M().get(),i=D().get();Array.isArray(o)&&o.length&&(n.pages=N.clone(o)),Array.isArray(i)&&i.length&&(n.shares=N.clone(i)),M().clear(),D().clear(),e.sessions=[n]}var a=V().getEkvs();return a&&(e.ekvs=N.clone(a),V().clear()),(e.sessions||e.ekvs)&&(t={analytics:e}),t}();break;case Q:e=function(){var t=null,e=V().getEkvs();return e&&(t={analytics:{ekvs:N.clone(e)}},V().clear()),t}()}return e},s=function(t,e){var n=c(t,e);return t&&t.id_tracking&&(n[e.id_tracking||"id_tracking"]=c(t.id_tracking,$)),n},c=function(t,e){var n={};for(var o in t)e[o]?n[e[o]]=t[o]:n[o]=t[o];return n},d=function(t,e){var n={};if(t)for(var o in t)t[o]&&(n[e[o]]=t[o]);return n},l=function(){return tt},u=function(t,e,n,o){K.instance().setIdType(B().getIdType()),K.instance().setIdTracking(B().getIdTracking());var i=B().getUserId();i&&t.analytics&&(t.analytics.active_user={puid:i,provider:B().getProvider()});var a=N.clone(K.instance().get());t.header=N.assign(a,t.header,{ts:Date.now(),testToken:l(),traceId:N.getRandomStr(10)+Date.now()+N.getRandomStr(9)});var r=function(t){return{h:s(t.header,Z),a:d(t.analytics,Y)}}(t),c=L(r),u={url:T.ENDPOINT+T.LOG_URL,method:"POST",data:ht(c),success:function(o){var i=o.code||o.status||o.statusCode;200===i||413===i?(I().i("\u6570\u636e\u53d1\u9001\u6210\u529f: ",t,c),function(t){t&&(K.instance().setItem(T.IMPRINT,t),ft.set(t),ft.save(),I().v("imprint: ",ft.getImpObj()),ft.getItem("ttn_invalid")&&(tt=""))}((o.data||{}).imprint),"function"==typeof e&&e(o)):(I().w("\u6570\u636e\u53d1\u9001\u5931\u8d25: ",c),"function"==typeof n&&n())},fail:function(){I().w("\u8d85\u65f6: ",c),"function"==typeof n&&n()},complete:function(){"function"==typeof o&&o()}};G.request(N.assign(u,{header:{"content-type":"text/plain","Msg-Type":G.getSdkType()+"/json"}}))},h=function(t){var e=t,n=[];this.enqueue=function(t){"number"==typeof e&&this.size()>=e&&this.dequeue(),n.push(t)},this.dequeue=function(){return n.shift()},this.front=function(){return n[0]},this.isEmpty=function(){return 0===n.length},this.clear=function(){n.length=0},this.size=function(){return n.length},this.items=function(){return n},this.print=function(){console.log(n.toString())}},p=function(t,e){this.id=t,this.ts=Date.now();var n=typeof e;if("string"===n&&e)this[t]=e;else if("object"===n)for(var o in e)({}).hasOwnProperty.call(e,o)&&(this[o]=e[o])},f=function(){var t=!1,e=!1,n=0;this.init=function(e){I().v("sdk version: "+T.IMPL_VERSION),t?I().v("Lib\u91cd\u590d\u5b9e\u4f8b\u5316"):q().load(function(){I().v("cache\u521d\u59cb\u5316\u6210\u529f: ",q().getAll()),B().setUseOpenid&&B().setUseOpenid(S().useOpenid()),B().init(function(){K.instance().init(),I().v("Header\u521d\u59cb\u5316\u6210\u529f")}),t=!0,"function"==typeof e&&e(),I().tip("SDK\u96c6\u6210\u6210\u529f")})},this.resume=function(n){var o;t&&!e&&(I().v("showOptions: ",n),e=!0,S().enableVerify()&&n&&n.query&&(o=n.query._ttn,tt=o||tt),this._resume(n))},this._resume=function(t){gt().load();var e=X().resume(t),n=X().getCurrentSessionId();function o(t,e){B().getId()||t<=0||B().getOpenIdAsync(S().appKey(),function(n){n?(I().v("\u83b7\u53d6id\u6210\u529f"),gt().send()):(I().v("\u83b7\u53d6openid\u5931\u8d25,\u542f\u52a8\u91cd\u8bd5,\u5269\u4f59\u53ef\u7528\u6b21\u6570",t-1),setTimeout(function(){o(t-1,e)},e))})}V().setSessionId(n),e&&gt().add(J,{},function(){B().setUseOpenid&&B().setUseOpenid(S().useOpenid()),S().useOpenid()&&S().autoGetOpenid()&&!B().getId()?(I().v("get id async"),o(10,3e3)):(I().v("session auto send"),gt().send())})},this.pause=function(o){t&&(e=!1,n=0,X().pause(),S().uploadUserInfo()&&mt().update(),gt().send(W,{},function(){gt().save(),q().save(),I().v("cache save success"),"function"==typeof o&&o()}))},this.setOpenid=function(t){I().v("setOpenId: %s",t),B().setOpenid(t),gt().send()},this.setUnionid=function(t){I().v("setUnionid: %s",t),B().setUnionid(t)},this.setUserid=function(t,e){I().v("setUserid: %s",t,e),B().setUserid(t,e)},this.setUserInfo=function(t){I().v("setUserInfo: %s",t),mt().setUserInfo(t)},this.setAnonymousid=function(t){I().v("setAnonymousId: %s",t),B().setAnonymousid(t),gt().send()},this.setAppVersion=function(t){t&&"string"!=typeof t?I().w("setAppVersion\u65b9\u6cd5\u53ea\u63a5\u53d7\u5b57\u7b26\u4e32\u7c7b\u578b\u53c2\u6570"):K.instance().setAppVersion(t)},this.setAlipayUserid=function(t){t&&"string"!=typeof t?I().w("setAlipayUserid\u65b9\u6cd5\u53ea\u63a5\u53d7\u5b57\u7b26\u4e32\u7c7b\u578b\u53c2\u6570"):(I().v("setAlipayUserid: %s",t),B().setAlipayUserid(t))},this.setDeviceId=function(t){if("string"==typeof t)return B().setDeviceId(t),t},this.setSuperProperty=function(t){if(t&&"string"!=typeof t)I().w("\u8d85\u7ea7\u5c5e\u6027\u53ea\u652f\u6301\u5b57\u7b26\u4e32\u7c7b\u578b");else{var e=this;K.instance().getSuperProperty()!==t&&(K.instance().setSuperProperty(t),e.pause(function(){e.resume()}))}},this.trackEvent=function(e,o){if(t&&(I().v("event: ",e,o),function(t,e){if(!t||"string"!=typeof t)return I().e('please check trackEvent id. id should be "string" and not null'),!1;var n=["id","ts","du"],o={};if(n.forEach(function(t){o[t]=1}),o[t])return I().e("eventId\u4e0d\u80fd\u4e0e\u4ee5\u4e0b\u4fdd\u7559\u5b57\u51b2\u7a81: "+n.join(",")),!1;if(t.length>T.MAX_EVENTID_LENGTH)return I().e("The maximum length of event id shall not exceed "+T.MAX_EVENTID_LENGTH),!1;if(e&&("object"!=typeof e||Array.isArray(e))&&"string"!=typeof e)return I().e("please check trackEvent properties. properties should be string or object(not include Array)"),!1;if("object"==typeof e){var i=0;for(var a in e)if({}.hasOwnProperty.call(e,a)){if(a.length>T.MAX_PROPERTY_KEY_LENGTH)return I().e("The maximum length of property key shall not exceed "+T.MAX_PROPERTY_KEY_LENGTH),!1;if(i>=T.MAX_PROPERTY_KEYS_COUNT)return I().e("The maximum count of properties shall not exceed "+T.MAX_PROPERTY_KEYS_COUNT),!1;if(o[a])return I().e("\u5c5e\u6027\u4e2d\u7684key\u4e0d\u80fd\u4e0e\u4ee5\u4e0b\u4fdd\u7559\u5b57\u51b2\u7a81: "+n.join(",")),!1;i+=1}}return!0}(e,o))){var i=new p(e,o);V().addEvent(i);var a=!!l(),r=a?0:T.EVENT_SEND_DEFAULT_INTERVAL,s=Date.now();("number"!=typeof n||"number"!=typeof r||n<=0||s-n>r)&&(n=s,gt().send(Q,{noCache:a},function(){}))}},this.trackShare=function(e){if(t)try{G.getSdkType().indexOf("game")>-1?(e=D().add(e,!0),I().v("shareQuery: ",e)):(e=D().add(e,!1),I().v("sharePath: ",e.path))}catch(t){I().v("shareAppMessage: ",t)}return e},this.trackPageStart=function(e){t&&M().addPageStart(e)},this.trackPageEnd=function(e){t&&M().addPageEnd(e)},this.onShareAppMessage=function(t){var e=this;G.onShareAppMessage(function(){return e.trackShare(t())})},this.shareAppMessage=function(t){this.trackShare(t),G.shareAppMessage(t)}},g=function(){},m=function t(e,n){var o,i;if(0===e||1===e&&n?o=T.ENDPOINT:2===e&&n?o=T.ENDPOINTB:n&&(o=_t[e]),e>=_t.length||n)return n&&(i=o,T.ENDPOINT=i),n&&I().v("\u547d\u4e2d\u53ef\u7528\u670d\u52a1",o),!n&&I().tip_w("\u672a\u547d\u4e2d\u53ef\u7528\u670d\u52a1"),!1;G.request({url:T.ENDPOINT+"/uminiprogram_logs/ckdh",success:function(n){200===(n.code||n.status||n.statusCode)&&n.data&&200===n.data.code?t(e+1,!0):t(e+1,!1)},fail:function(){t(e+1,!1)}})},v=function(t){I().v("\u5f00\u59cb\u6784\u5efa fetch body"),G.getSystemInfo(function(e){G.getNetworkInfo(function(n){var o=(n=n||{}).networkType;o=o===It?"unknown":o.toUpperCase(),xt.access=o,function(t,e){var n=t.brand||"";if(xt.deviceType="Phone",xt.sdkVersion=wt,xt.appkey=S().appKey(),xt.sdkType=G.getSdkType(),xt.umid=B().getId(),t){xt.language=t.language||"",xt.os=t.OS,xt.osVersion=t.OSVersion,xt.deviceName=t.deviceName,xt.platformVersion=t.platformVersion,xt.platformSdkVersion=t.platformSDKVersion,xt.deviceBrand=n;var o=t.resolution.split("*");St.isArray(o)&&(xt.resolutionHeight=Number(o[0]),xt.resolutionWidth=Number(o[1]))}!function(t){t&&(xt.installTime=t.install_datetime&&Date.parse(t.install_datetime),xt.scene=t.install_scene,xt.channel=t.install_channel,xt.campaign=t.install_campaign)}(ft.getImpObj()),e&&e(xt)}(e,t)})})},_=function(t){t&&St.each(t,function(t){Pt[t.k]=t})},y=function(){var t=this;this.STORAGE_NAME=null,b.once(b.messageType.CONFIG_LOADED,function(e){I().v("\u4e91\u914d\u521d\u59cb\u5316\u5f00\u59cb..."),t.init(e)})},A=function(t){var e={};for(var n in t){var o=t[n];if("object"==typeof o)for(var i in o)e[n+"."+i]=o[i];else e[n]=o}return e},w="[UMENG] -- ",I=function(){var t=null,e=!1;function n(){this.setDebug=function(t){e=t},this.d=function(){if(e)try{"string"==typeof arguments[0]&&(arguments[0]=w+arguments[0]),console.log.apply(console,arguments)}catch(w){}},this.i=function(){try{if(e)try{"string"==typeof arguments[0]&&(arguments[0]=w+arguments[0]),console.log.apply(console,arguments)}catch(w){}}catch(w){}},this.e=function(){if(e)try{"string"==typeof arguments[0]&&(arguments[0]=w+arguments[0]),console.log.apply(console,arguments)}catch(w){}},this.w=function(){if(e)try{"string"==typeof arguments[0]&&(arguments[0]=w+arguments[0]),console.log.apply(console,arguments)}catch(w){}},this.v=function(){if(e)try{"string"==typeof arguments[0]&&(arguments[0]=w+arguments[0]),console.log.apply(console,arguments)}catch(w){}},this.t=function(){if(e)try{console.log.apply(console,arguments)}catch(w){}},this.tip=function(){try{"string"==typeof arguments[0]&&(arguments[0]=w+arguments[0]),console.log.apply(console,arguments)}catch(w){}},this.tip_w=function(t){try{console.log("%c [UMENG] -- "+t,"background:red; padding: 4px; padding-right: 8px; border-radius: 4px; color: #fff;")}catch(t){}},this.err=function(){try{"string"==typeof arguments[0]&&(arguments[0]=w+arguments[0]),console.log.apply(console,arguments)}catch(w){}},this.repeat=function(t){for(var e=t;e.length<86;)e+=t;return e}}return function(){return null===t&&(t=new n),t}}(),S=function(){var t=null;function e(){var t={};this.useOpenid=function(){return!!t.useOpenid},this.useSwanid=function(){return!!t.useSwanid},this.autoGetOpenid=function(){return!!t.autoGetOpenid},this.appKey=function(){return t.appKey},this.uploadUserInfo=function(){return t.uploadUserInfo},this.enableVerify=function(){return t.enableVerify},this.set=function(e){t=e},this.get=function(){return t},this.setItem=function(e,n){t[e]=n},this.getItem=function(e){return t[e]}}return function(){return t||(t=new e),t}}();o.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var o=this;function i(){o.off(t,i),e.apply(n,arguments)}return i._=e,this.on(t,i,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,i=n.length;o<i;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],i=[];if(o&&e)for(var a=0,r=o.length;a<r;a++)o[a].fn!==e&&o[a].fn._!==e&&i.push(o[a]);return i.length?n[t]=i:delete n[t],this}};var b=new o;b.messageType={CONFIG_LOADED:0,UMA_LIB_INITED:1};var x,P=i(),G=new(function(){function t(){}return t.prototype.setStorage=function(t,e,n){P.setStorage?P.setStorage({key:t,value:e,success:function(){"function"==typeof n&&n(!0)},fail:function(){"function"==typeof n&&n(!1)}}):(localStorage.setItem(t,e),"function"==typeof n&&n(!0))},t.prototype.getStorage=function(t,e){if(P.getStorage)P.getStorage({key:t,success:function(t){"function"==typeof e&&e(t)},fail:function(n,o){I().w(t+"code = : "+o),"function"==typeof e&&e()}});else if(localStorage){var n=localStorage.getItem(t);"function"==typeof e&&e(n)}},t.prototype.removeStorage=function(t,e){P.deleteStorage?P.deleteStorage({key:t,success:function(){"function"==typeof e&&e(!0)},fail:function(){"function"==typeof e&&e(!1)}}):localStorage&&(localStorage.removeItem(t),"function"==typeof e&&e(!0))},t.prototype.getSystemInfo=function(t){P.getSystemInfo({success:function(e){var n={model:e.model,brand:e.brand,screenWidth:e.screenWidth,screenHeight:e.screenHeight,platform:e.osType,pixelRatio:e.pixelRatio,platformVersion:e.platformVersionCode,language:e.language,deviceName:e.model,OSVersion:e.osVersionName,resolution:"",statusBarHeight:e.statusBarHeight};if(e.system){var o=e.system.split(" ");Array.isArray(o)&&(!n.platform&&(n.platform=o[0]),!n.OSVersion&&(n.OSVersion=o[1]))}var i=Math.round(e.screenWidth*e.pixelRatio),a=Math.round(e.screenHeight*e.pixelRatio);n.resolution=i>a?i+"*"+a:a+"*"+i,"function"==typeof t&&t(n)},fail:function(){"function"==typeof t&&t()}})},t.prototype.getDeviceInfo=function(t){"function"==typeof t&&t("")},t.prototype.getNetworkInfo=function(t){P.getNetworkType({success:function(e){"function"==typeof t&&t({networkAvailable:"none"!==e.networkType,networkType:e.networkType})},fail:function(){"function"==typeof t&&t()}})},t.prototype.request=function(t){var e=t.success||function(){},n=t.fail||function(){},o=!1,i=null;t.success=function(t){o||(i&&clearTimeout(i),"function"==typeof e&&e(t))},t.fail=function(){o||(i&&clearTimeout(i),"function"==typeof n&&n(!1))},P.request?P.request(t):XMLHttpRequest&&function(t,e){void 0===e&&(e=!0),(t=t||{}).method=t.method||"GET",t.url=t.url||"",t.success=t.success||function(){},t.fail=t.fail||function(){};var n,o,i=new XMLHttpRequest,a=[];if("object"==typeof t.data){for(var r in t.data)a.push(r+"="+encodeURIComponent(t.data[r]));n=JSON.stringify(t.data||{}),o=a.join("&")}else"string"==typeof t.data&&(n=t.data,o=t.data);if("POST"===t.method?i.open(t.method,t.url,e):i.open(t.method,t.url+"?"+o||"",e),t.header&&"object"==typeof t.header){for(var s in t.header)i.setRequestHeader(s,t.header[s]);t.header["content-type"]||t.header["Content-Type"]||i.setRequestHeader("content-type","text/plain")}e&&(i.timeout=t.timeout||3e4),i.onreadystatechange=function(){if(4==i.readyState&&200==i.status){var e={};try{e=JSON.parse(i.responseText)}catch(t){}t.success({data:e,status:i.status})}else 4==i.readyState&&t.fail({data:null,status:i.status})},"POST"===t.method?i.send(n||""):i.send()}(t,!0),i=setTimeout(function(){i&&clearTimeout(i),o=!0,"function"==typeof n&&n(o)},t.timeout||3e4)},t.prototype.getSdkType=function(){return this.getPlatform()+"mp"},t.prototype.getPlatform=function(){return"quickgame"},t.prototype.getUserInfo=function(t){t&&t()},t.prototype.getAppInfoSync=function(){return{}},t.prototype.onShareAppMessage=function(){},t.prototype.shareAppMessage=function(){},t.prototype.getContext=function(){return i()},t.prototype.getLaunchOptionsSync=function(){var t=null;if(t)return t;if(!P.getLaunchOptionsSync)return{};try{t=P.getLaunchOptionsSync()}catch(I){t=null}return t||{}},t}()),E=function(t,e){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},T={SESSION_INTERVAL:3e4,LOG_URL:"/quickgamem_logs",GET_OPENID_URL:"",USERINFO_URL:"/uminiprogram_logs/comm/uif",ENDPOINT:"https://umini.shujupie.com",ENDPOINTB:"https://ulogs.umeng.com",DEVICE_INFO_KEY:"device_info",ADVERTISING_ID:"mobile_ad_id",ANDROID_ID:"android_id",CURRENT_SESSION:"current_session",SESSION_PAUSE_TIME:"session_pause_time",EVENT_SEND_DEFAULT_INTERVAL:15e3,EVENT_LAST_SEND_TIME:"last_send_time",MAX_EVENTID_LENGTH:128,MAX_PROPERTY_KEY_LENGTH:256,MAX_PROPERTY_KEYS_COUNT:100,REPORT_POLICY:"report_policy",REPORT_INTERVAL_TIME:"report_interval_time",REPORT_POLICY_START_SEND:"1",REPORT_POLICY_INTERVAL:"6",IMPRINT:"imprint",SEED_VERSION:"1.0.0",IMPL_VERSION:"2.7.1",ALIPAY_AVAILABLE_VERSION:"10.1.52",SHARE_PATH:"um_share_path",SHARES:"shares",REQUESTS:"requests",UUID:"um_uuid",UUID_SUFFIX:"ud",OPENID:"um_od",UNIONID:"um_unid",ALIPAYID:"um_alipayid",USERID:"um_userid",PROVIDER:"um_provider",SWANID:"um_swanid",ANONYMOUSID:"um_anonymousid",LAUNCH_OPTIONS:"LAUNCH_OPTIONS",UM_SSRC:"_um_ssrc",USER_INFO:"user_info",IS_ALIYUN:!1},N={isNumber:function(t){return!Number.isNaN(parseInt(t,10))},compareVersion:function(t,e){for(var n=String(t).split("."),o=String(e).split("."),i=0;i<Math.max(n.length,o.length);i++){var a=parseInt(n[i]||0,10),r=parseInt(o[i]||0,10);if(a>r)return 1;if(a<r)return-1}return 0},getRandomStr:function(t){for(var e="",n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],o=0;o<Number(t);o++)e+=n[Math.round(Math.random()*(n.length-1))];return e},clone:function(t){return JSON.parse(JSON.stringify(t))},startsWith:function(t,e){return!(!t||!e||0===e.length||e.length>t.length)&&t.substr(0,e.length)===e},endsWith:function(t,e){return!(!e||0===t.length||e.length>t.length)&&t.substring(t.length-e.length)===e},assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var o=arguments[n];if(o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},deepEqual:function t(e,n){if(e===n)return!0;if(e&&"object"==typeof e&&n&&"object"==typeof n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var o in e){if(Object.prototype.hasOwnProperty.call(n,o))return!1;if(!t(e[o],n[o]))return!1}return!0}return!1},trimStart:function(t,e){if(!t)return"";if("string"==typeof e&&e.length){var n=new RegExp("^"+e+"*");t=t.replace(n,"")}else t=t.replace(/^s*/,"");return t},trimEnd:function(t,e){if(!t)return"";var n,o;if("string"==typeof e&&e.length){for(n=new RegExp(e),o=t.length;n.test(t.charAt(o));)o-=1;return t.slice(0,o+1)}for(n=/s/,o=t.length-1;n.test(t.charAt(o));)o-=1;return t.slice(0,o+1)},isFunction:function(t){return"function"==typeof t}},C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._openid="",e._unionid="",e._useOpenid=!1,e}return a(e,t),e.prototype.initID=function(t){var e=this;e._idType=e._useOpenid?"openid":"uuid",I().v("id type: ",e._idType),G.getStorage(T.UNIONID,function(t){e._unionid=t}),this._useOpenid?G.getStorage(T.OPENID,function(n){e._openid=n,t&&t()}):t&&t()},e.prototype.setUseOpenid=function(t){this._useOpenid=t},e.prototype.setOpenid=function(t){!this._openid&&t&&(this._openid=t,G.setStorage(T.OPENID,t))},e.prototype.setUnionid=function(t){!this._unionid&&t&&(this._unionid=t,G.setStorage(T.UNIONID,t))},e.prototype.getIdTracking=function(){var e=t.prototype.getIdTracking.call(this);return this._openid&&(e.openid=this._openid),this._unionid&&(e.unionid=this._unionid),this._userid&&(e.userid=this._userid),e},e.prototype.getId=function(){return this._useOpenid?this._openid:this._uuid},e}(function(){function t(){this._uuid="",this._userid="",this._provider="",this._idType=""}return t.prototype.createUUID=function(){return N.getRandomStr(10)+Date.now()+N.getRandomStr(7)+T.UUID_SUFFIX},t.prototype.initUUID=function(t){var e=this;G.getStorage(T.UUID,function(n){n?e._uuid=n:(e._uuid=e.createUUID(),G.setStorage(T.UUID,e._uuid)),t&&t(n)})},t.prototype.initUserid=function(){var t=this;G.getStorage(T.USERID,function(e){!t._userid&&e&&(t._userid=e,I().v("userId is ",e))}),G.getStorage(T.PROVIDER,function(e){!t._provider&&e&&(t._provider=e,I().v("provider is ",e))})},t.prototype.init=function(t){var e=this;e.initUUID(function(){e.initUserid(),e.initID(t)})},t.prototype.setUserid=function(t,e){!this._userid&&t&&(this._userid=t,this._provider=e,G.setStorage(T.USERID,t),G.setStorage(T.PROVIDER,e))},t.prototype.getUserId=function(){return this._userid},t.prototype.getProvider=function(){return this._provider},t.prototype.getIdType=function(){return this._idType},t.prototype.getIdTracking=function(){var t={};return this._uuid&&(t.uuid=this._uuid),this._userid&&(t.userid=this._userid),t},t}()),O=i(),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.getOpenIdAsync=function(t,e){var n=this;O.login({success:function(o){o.code?G.request({url:T.ENDPOINT+T.GET_OPENID_URL,method:"GET",data:{key:t,code:o.code},success:function(t){if(t&&200===t.statusCode&&t.data&&t.data.data){var o=t.data.data;return n.setOpenid(o.oid),n.setUnionid(o.uid),e&&e(!0)}e&&e()},fail:function(t){I().v("wx request failed...",t),e&&e()}}):e&&e()},fail:function(){e&&e()}})},e}(C),B=(x=null,function(){return x||(x=new k),x}),M=function(){var t=null;function e(){var t=!1,e=null,n=[];this.addPageStart=function(n){n&&!t&&(e={ts:Date.now(),path:n,page_name:n},t=!0)},this.addPageEnd=function(o){if(t&&o&&e&&o===e.page_name){var i=Date.now()-e.ts;e.duration=Math.abs(i),n.push(e),e=null,t=!1}},this.get=function(){return n},this.getCurrentPage=function(){return e},this.clear=function(){n.length=0}}return function(){return t||(t=new e),t}}(),R={},D=function(){var t=null,e=[],n="";function o(){return{add:function(t,o){I().v("share origin: %o",t);var i={title:t&&t.title,path:t&&t.path&&t.path.split("?")[0],_um_sts:Date.now()};i.path&&i.path.length>1&&N.startsWith(i.path,"/")&&(i.path=N.trimStart(i.path,"/"));var a=t.path||"",r=B().getId();if(r){var s=n.split(","),c=(s=s.filter(function(t){return t.length>0})).indexOf(r);c>=0&&(s=s.slice(0,c)),s.length<3&&s.push(r);var d=s.join(",");-1!==a.indexOf("?")?a+="&_um_ssrc="+d:a+="?_um_ssrc="+d;var l=Date.now();if(a+="&_um_sts="+l,o){var u=function(t){var e=[];for(var n in t)"_um_ssrc"!==n&&"_um_sts"!==n&&e.push(n+"="+t[n]);return e.join("&")}(R),h=u?u+"&_um_ssrc="+d+"&_um_sts="+l:"_um_ssrc="+d+"&_um_sts="+l;t.query=t.query?t.query+"&_um_ssrc="+d+"&_um_sts="+l:h}else t.path=a;i._um_ssrc=d,i._um_sts=l}return e.push(i),I().v("share: %o",t),t},setShareSource:function(t){n=t},clear:function(){e.length=0},get:function(){return e}}}return function(){return t||(t=new o),t}}(),L=function(t){if(t)try{return JSON.stringify(t)}catch(t){}return""},U=function(t){if(t)try{return JSON.parse(t)}catch(t){}return null},q=function(){var t=null,e="",n=null,o=!1;function i(){this.load=function(t){n?(G.removeStorage(e),t()):(e="um_cache_"+S().appKey(),G.getStorage(e,function(i){n=U(i)||{},o=!0,G.removeStorage(e),t()}))},this.save=function(){n&&G.setStorage(e,L(n))},this.set=function(t,e){n&&(n[t]=e)},this.get=function(t){return(n||{})[t]},this.remove=function(t){n&&n[t]&&delete n[t]},this.getAll=function(){return n},this.clear=function(){n=null},this.has=function(t){return!!this.get(t)},this.isLoaded=function(){return o}}return function(){return t||(t=new i),t}}(),V=function(){var t,e,n=[],o=[];function i(){if(n.length){var t=q().get("ekvs");(function(t){var e=0;for(var n in t)Array.isArray(t[n])&&(e+=t[n].length);return e})(t)+n.length<=1e4&&(t=a(t,n),q().set("ekvs",t))}}function a(t,n){var o=(t=t||{})[e];return Array.isArray(o)&&o.length?t[e]=o.concat(n):t[e]=[].concat(n),t}return function(){return t||(t={addEvent:function(t){e?(n.unshift(t),n.length>1&&(i(),n.length=0)):(I().w("session id is null: ",e),o.unshift(t))},setSessionId:function(t){if(e=t,I().v("setSessionId: ",e),Array.isArray(o)&&o.length&&e){for(var n=0;n<o.length;n++)this.addEvent(o[n]);o.length=0}},getEkvs:function(){var t=q().get("ekvs");return n&&n.length&&(t=a(t,n)),t},clear:function(){q().remove("ekvs"),n.length=0}}),t}}(),j="2g",H="3g",F="4g",J="half_session",W="close_session",Q="ekv",z=["access","access_subtype"],K=function(){var t=null;function e(){var t=!1,e={};function n(t){var n=q().get(T.IMPRINT);n&&(e.imprint=n),e.device_type="Phone",e.sdk_version=T.IMPL_VERSION,e.appkey=S().appKey(),G.getDeviceInfo(function(t){e.device_info=t||""});var o=G.getAppInfoSync();e.appid=o.appId,e.app_env=o.appEnv,e.app_version=o.appVersion,G.getSystemInfo(function(n){G.getNetworkInfo(function(o){var i=function(t,e){var n={};(t=t||{}).safeArea=t.safeArea||{};var o=(e=e||{}).networkType;"none"===o&&(o="unknown");var i=t.model||"",a=t.platform||"",r=t.brand||"",s=r.toLowerCase();switch(n.sdk_type=G.getSdkType(),n.platform=G.getPlatform(),n.platform_sdk_version=t.platformSDKVersion,n.platform_version=t.platformVersion,n.resolution=t.resolution,n.pixel_ratio=t.pixelRatio,n.os=a,n.font_size_setting=t.fontSizeSetting,n.device_model=i,n.device_brand=r,n.device_manufacturer=s,n.device_manuid=i,n.device_name=i,n.os_version=t.OSVersion,n.language=t.language,n.theme=t.theme,n.benchmark_level=t.benchmarkLevel,n.status_bar_height=t.statusBarHeight,n.safe_area_top=t.safeArea.top,n.safe_area_left=t.safeArea.left,n.safe_area_right=t.safeArea.right,n.safe_area_bottom=t.safeArea.bottom,n.safe_area_height=t.safeArea.height,n.safe_area_width=t.safeArea.width,n.storage=t.storage,n.screen_width=t.screenWidth,n.screen_height=t.screenHeight,n.host=t.host,o=o?o.toLowerCase():""){case F:n.access_subtype="LTE",n.access="4G";break;case H:n.access_subtype="CDMA",n.access="3G";break;case j:n.access_subtype="GRPS",n.access="2G";break;default:n.access=o,delete n.access_subtype}return n}(n,o);N.assign(e,i),t&&t()})})}return{init:function(){n(function(){t=!0})},isLoaded:function(){return t},get:function(){return e},getRealtimeFields:function(){var t={};return z.forEach(function(n){t[n]=e[n]}),t},setIdTracking:function(t){this.setItem("id_tracking",t)},setIdType:function(t){this.setItem("id_type",t)},setAppVersion:function(t){this.setItem("app_version",t)},setSuperProperty:function(t){e.sp||(e.sp={}),e.sp.isv=t},getSuperProperty:function(){return e&&e.sp?e.sp.isv:""},setItem:function(t,n){e[t]=n},getItem:function(t){return e[t]}}}return{instance:function(){return t||(t=e()),t}}}(),X=function(){var t=null,e=null,n=null;return function(){return t||(t={resume:function(t){var o=!1;n||(n=q().get(T.CURRENT_SESSION));var i=new Date;return e=i.getTime(),!n||!n.end_time||e-n.end_time>T.SESSION_INTERVAL?(o=!0,function(t){try{var e=(n||{}).options||{},o=N.assign({},function(t){var e={};for(var n in t)0===n.indexOf("_um_")&&(e[n]=t[n]);return I().v("query: ",t),I().v("_um_params: ",e),e}(t.query));o.path=t.path||e.path,o.scene=t.scene?G.getPlatform()+"_"+t.scene:e.scene;var i=t.referrerInfo;i&&(o.referrerAppId=i.appId),I().v("session options: ",o);var a=o[T.UM_SSRC];a&&D().setShareSource(a);var r=Date.now();n={id:N.getRandomStr(10)+r,start_time:r,options:o}}catch(t){I().e("\u751f\u6210\u65b0session\u5931\u8d25: ",t)}}(t),I().v("\u5f00\u59cb\u65b0\u7684session(%s): ",n.id,n)):I().v("\u5ef6\u7eed\u4e0a\u4e00\u6b21session(%s): %s ",n.id,i.toLocaleTimeString(),n),o},pause:function(){!function(){if(n){var t=new Date;n.end_time=t.getTime(),"number"!=typeof n.duration&&(n.duration=0),n.duration=n.end_time-e,q().set(T.CURRENT_SESSION,n),I().v("\u9000\u51fa\u4f1a\u8bdd(%s): %s ",n.id,t.toLocaleTimeString(),n)}}()},getCurrentSessionId:function(){return(n||{}).id},getCurrentSession:function(){return n},cloneCurrentSession:function(){return N.clone(n)}}),t}}(),Y={sessions:"sn",ekvs:"e",active_user:"active_user"},Z={sdk_type:"sdt",access:"ac",access_subtype:"acs",device_model:"dm",language:"lang",device_type:"dt",device_manufacturer:"dmf",device_name:"dn",platform_version:"pv",id_type:"it",font_size_setting:"fss",os_version:"ov",device_manuid:"did",platform_sdk_version:"psv",device_brand:"db",appkey:"ak",_id:"id",id_tracking:"itr",imprint:"imp",sdk_version:"sv",resolution:"rl",testToken:"ttn",theme:"t5",benchmark_level:"bml",screen_width:"sw",screen_height:"sh",status_bar_height:"sbh",safe_area_top:"sat",safe_area_left:"sal",safe_area_right:"sar",safe_area_bottom:"sab",safe_area_height:"sah",safe_area_width:"saw",pixel_ratio:"pr",storage:"s7",host:"hs"},$={uuid:"ud",unionid:"und",openid:"od",anonymousid:"nd",alipay_id:"ad",device_id:"dd",userid:"puid"},tt="",et="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",nt=function(t){for(var e={},n=0,o=t.length;n<o;n++)e[t.charAt(n)]=n;return e}(et),ot=String.fromCharCode,it=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?ot(192|e>>>6)+ot(128|63&e):ot(224|e>>>12&15)+ot(128|e>>>6&63)+ot(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return ot(240|e>>>18&7)+ot(128|e>>>12&63)+ot(128|e>>>6&63)+ot(128|63&e)},at=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,rt=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[et.charAt(n>>>18),et.charAt(n>>>12&63),e>=2?"=":et.charAt(n>>>6&63),e>=1?"=":et.charAt(63&n)].join("")},st=function(t){return function(t){return t.replace(at,it)}(t).replace(/[\s\S]{1,3}/g,rt)},ct=new RegExp(["[\xc0-\xdf][\x80-\xbf]","[\xe0-\xef][\x80-\xbf]{2}","[\xf0-\xf7][\x80-\xbf]{3}"].join("|"),"g"),dt=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return ot(55296+(e>>>10))+ot(56320+(1023&e));case 3:return ot((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return ot((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},lt=function(t){var e=t.length,n=e%4,o=(e>0?nt[t.charAt(0)]<<18:0)|(e>1?nt[t.charAt(1)]<<12:0)|(e>2?nt[t.charAt(2)]<<6:0)|(e>3?nt[t.charAt(3)]:0),i=[ot(o>>>16),ot(o>>>8&255),ot(255&o)];return i.length-=[0,0,2,1][n],i.join("")},ut=function(t){return function(t){return t.replace(/[\s\S]{1,4}/g,lt)}(t).replace(ct,dt)},ht=function(t,e){return e?st(String(t)).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):st(String(t))},pt=function(t){return ut(String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},ft=new function(){var t="",e=this;this.set=function(e){t=e},this.get=function(){return t},this.getImpObj=function(){return U(pt(t))},this.getItem=function(t){var n=e.getImpObj();return n&&n[t]||""},this.load=function(){t=q().get(T.IMPRINT)},this.save=function(){t&&q().set(T.IMPRINT,t)}},gt=function(){var t=null,e=!1,n=[],o=new h(50);function i(t,e,n){if(K.instance().isLoaded()){e=e||{};var a=r(t);if(a){var s=K.instance().getRealtimeFields();a.header=N.assign({},a.header,s),a.noCache=e.noCache,o.enqueue(a)}"function"==typeof n&&n()}else setTimeout(function(){i(t,e,n)},100)}function a(t){var e=o.front();e?u(e,function(){o.dequeue(),a(t)},function(){var e=o.dequeue();e&&!e.noCache&&n.push(e),a(t)}):(n.forEach(function(t){o.enqueue(t)}),n.length=0,t())}function s(t){B().getId()?e?I().i("\u961f\u5217\u6b63\u5728\u53d1\u9001\u4e2d"):(e=!0,a(function(){e=!1,"function"==typeof t&&t()})):(I().i("\u83b7\u53d6id\u6807\u8bc6\u5931\u8d25\uff0c\u6682\u7f13\u53d1\u9001"),"function"==typeof t&&t())}function c(){this.send=function(t,e,n){t?this.add(t,e,function(){s(n)}):s(n)},this.add=function(t,e,n){i(t,e,n)},this.load=function(){var t=q().get(T.REQUESTS);t&&t.length&&t.forEach(function(t){o.enqueue(t)}),q().remove(T.REQUESTS)},this.save=function(){q().set(T.REQUESTS,N.clone(o.items())),o.clear()}}return function(){return t||(t=new c),t}}(),mt=function(){var t=null,e=null;function n(){function t(t){if(t&&"object"==typeof t){var e=q().get(T.USER_INFO);return e&&N.deepEqual(t,e)||function(t,e){var n=S().appKey(),o=G.getSdkType(),i=B().getId(),a=B().getIdType();if(n&&o&&i&&a){var r={ak:S().appKey(),sdt:G.getSdkType(),uin:t.nickName,uia:t.avatar||t.avatarUrl,uig:t.gender,uit:t.country,uip:t.province,uic:t.city,uil:t.language,id:B().getId(),it:B().getIdType(),age:t.age,cln:t.constellation},s=JSON.stringify(r);s=ht(s),G.request({url:T.ENDPOINT+T.USERINFO_URL,method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:"ui="+s,success:function(n){I().v("\u7528\u6237\u4fe1\u606f\u4e0a\u4f20\u6210\u529f: ",t),e&&e(n&&n.data&&200===n.data.code)},fail:function(){I().e("\u7528\u6237\u4fe1\u606f\u4e0a\u4f20\u5931\u8d25: ",t),e&&e(!1)}})}}(t,function(e){e&&q().set(T.USER_INFO,t)}),!0}return!1}this.setUserInfo=function(t){e=t},this.update=function(){t(e)||G.getUserInfo(function(e){t(e)})}}return function(){return t||(t=new n),t}}(),vt=[];g.prototype={createMethod:function(t,e,n){try{t[e]=n&&n[e]?function(){return n[e].apply(n,arguments)}:function(){vt.push([e,[].slice.call(arguments)])}}catch(t){I().v("create method errror: ",t)}},installApi:function(t,e){try{var n,o,i="resume,pause,trackEvent,trackPageStart,trackPageEnd,trackShare,setUserid,setOpenid,setUnionid,onShareAppMessage,shareAppMessage,setUserInfo".split(",");for(n=0,o=i.length;n<o;n++)this.createMethod(t,i[n],e);if(e)for(n=0,o=vt.length;n<o;n++){var a=vt[n];try{e[a[0]].apply(e,a[1])}catch(t){I().v("impl[v[0]].apply error: ",a[0],t)}}}catch(t){I().v("install api errror: ",t)}}};var _t=[T.ENDPOINT,T.ENDPOINTB];T.ENDPOINTB&&setTimeout(function(){m(0,!1)},3e3);var yt=new g,At={_inited:!1,_log:I(),preinit:function(t){if(t&&"object"==typeof t)for(var e in t)T[e]=t[e];return T},use:function(t,e){return t&&N.isFunction(t.install)?t.install(At,e):N.isFunction(t)&&t(At,e),At},messager:b,init:function(t){if(this._inited)I().v("\u5df2\u7ecf\u5b9e\u4f8b\u8fc7\uff0c\u8bf7\u907f\u514d\u91cd\u590d\u521d\u59cb\u5316");else if(t)if(t.appKey){"boolean"!=typeof t.useOpenid&&(t.useOpenid=!0),S().set(t),I().setDebug(t.debug),this._inited=!0;var e=this;b.emit(b.messageType.CONFIG_LOADED,t);try{var n=new f;I().v("\u6210\u529f\u521b\u5efaLib\u5bf9\u8c61"),n.init(function(){I().v("Lib\u5bf9\u8c61\u521d\u59cb\u5316\u6210\u529f"),yt.installApi(e,n),I().v("\u5b89\u88c5Lib\u63a5\u53e3\u6210\u529f"),b.emit(b.messageType.UMA_LIB_INITED,t)})}catch(t){I().w("\u521b\u5efaLib\u5bf9\u8c61\u5f02\u5e38: "+t)}}else I().err("\u8bf7\u786e\u4fdd\u4f20\u5165\u6b63\u786e\u7684appkey");else I().err("\u8bf7\u6b63\u786e\u8bbe\u7f6e\u76f8\u5173\u4fe1\u606f\uff01")}};try{yt.installApi(At,null)}catch(w){I().w("uma\u8d4b\u503c\u5f02\u5e38: ",w)}var wt="2.7.1",It="none",St={},bt=Array.isArray;St.isArray=bt||function(t){return"[object Array]"===toString.call(t)},St.isObject=function(t){return t===Object(t)&&!St.isArray(t)},St.isEmptyObject=function(t){if(St.isObject(t)){for(var e in t)if(hasOwnProperty.call(t,e))return!1;return!0}return!1},St.isUndefined=function(t){return void 0===t},St.isString=function(t){return"[object String]"===toString.call(t)},St.isDate=function(t){return"[object Date]"===toString.call(t)},St.isNumber=function(t){return"[object Number]"===toString.call(t)},St.each=function(t,e,n){if(null!=t){var o={},i=Array.prototype.forEach;if(i&&t.forEach===i)t.forEach(e,n);else if(t.length===+t.length){for(var a=0,r=t.length;a<r;a++)if(a in t&&e.call(n,t[a],a,t)===o)return}else for(var s in t)if(hasOwnProperty.call(t,s)&&e.call(n,t[s],s,t)===o)return}},St.buildQuery=function(t,e){var n,o,i=[];return void 0===e&&(e="&"),St.each(t,function(t,e){n=encodeURIComponent(t.toString()),o=encodeURIComponent(e),i[i.length]=o+"="+n}),i.join(e)},St.JSONDecode=function(t){if(t){try{return JSON.parse(t)}catch(t){console.error("JSONDecode error",t)}return null}},St.JSONEncode=function(t){try{return JSON.stringify(t)}catch(t){console.error("JSONEncode error",t)}};var xt=Object.create(null),Pt=Object.create(null),Gt=null,Et=!1,Tt={minFetchIntervalSeconds:43200};y.prototype={setDefaultValues:function(t){Et&&St.isObject(t)&&St.each(t,function(t,e){Pt[e]&&Pt[e].v||(Pt[e]={v:t})})},getValue:function(t){I().v("\u4ece\u914d\u7f6e\u9879\u4e2d\u8bfb\u53d6 value, \u5f53\u524d\u914d\u7f6e\u4e3a: ",Pt),I().v("\u5f85\u8bfb\u53d6\u7684 key : ",t);try{if(!Et)return;var e=Pt[t]||{};return I().v("\u8bfb\u53d6\u76f8\u5e94\u914d\u7f6eing..., \u7ed3\u679c\u4e3a: ",e),St.isNumber(e.e)&&St.isNumber(e.g)&&(I().v("\u8bfb\u53d6\u5230\u76f8\u5e94\u914d\u7f6e, \u5f00\u59cb\u6570\u636e\u4e0a\u62a5..."),function(t){var e={appkey:S().appKey(),sdkType:G.getSdkType(),expId:t&&t.e,groupId:t&&t.g,clientTs:Date.now(),key:t&&t.k,value:t&&t.v,umid:B().getId()};try{G.request({url:"https://pslog.umeng.com/mini_ablog",method:"POST",data:[e],success:function(t){t&&200===t.statusCode?I().v("\u4e0a\u4f20\u6570\u636e\u6210\u529f",e):I().w("ablog \u8bf7\u6c42\u6210\u529f, \u8fd4\u56de\u7ed3\u679c\u5f02\u5e38 ",t)},fail:function(t){I().w("ablog \u8bf7\u6c42\u6570\u636e\u9519\u8bef ",e,t)}})}catch(t){I().w("urequest \u8c03\u7528\u9519\u8bef",t)}}(e)),e.v}catch(S){I().w("getValue error, key: ",t)}},active:function(t){try{if(!Et)return;var e,n;t&&t.params&&(e=t.params),t&&t.callback&&(n=t.callback),I().v("\u6fc0\u6d3b\u914d\u7f6e\u9879: ",e),e?(I().v("\u672c\u5730\u5df2\u7f13\u5b58\u7684\u914d\u7f6e\u9879: ",Pt),_(e),I().v("\u5408\u5e76\u540e\u7684\u914d\u7f6e\u9879: ",Pt),n&&n(Pt),I().v("active \u7ed3\u675f")):(I().v("\u914d\u7f6e\u9879\u4e3a\u7a7a!! \u8bfb\u53d6\u672c\u5730\u914d\u7f6e..."),G.getStorage(this.STORAGE_NAME,function(t){t?(_((t=St.JSONDecode(t)||{}).params),I().v("\u5f53\u524d\u672c\u5730\u914d\u7f6e\u9879\u4e3a: ",Pt),n&&n(Pt),I().v("active \u7ed3\u675f")):I().v("\u5f53\u524d\u672c\u5730\u914d\u7f6e\u9879\u4e3a\u7a7a, \u9000\u51fa\u6fc0\u6d3b")}))}catch(t){I().w("SDK active \u9519\u8bef",t)}},init:function(t){t.appKey&&(Gt=t.appKey,this.STORAGE_NAME="um_remote_config_{{"+Gt+"}}"),Gt?Et?I().w("SDK \u5df2\u7ecf\u521d\u59cb\u5316, \u8bf7\u907f\u514d\u91cd\u590d\u521d\u59cb\u5316"):(Et=!0,this.setOptions(t),this.active()):I().err("\u8bf7\u68c0\u67e5\u60a8\u7684\u5c0f\u7a0b\u5e8f appKey, appKey \u4e0d\u80fd\u4e3a\u7a7a")},setOptions:function(t){if(St.isObject(t)){var e=t.minFetchIntervalSeconds;St.isNumber(e)&&(Tt.minFetchIntervalSeconds=Math.max(e,5))}},fetch:function(t){if(Et&&this.STORAGE_NAME){var e,n;t&&t.active&&(e=t.active),t&&t.callback&&(n=t.callback);var o=this;G.getStorage(this.STORAGE_NAME,function(t){I().v("\u5f00\u59cb\u8bfb\u7f13\u5b58 data is ",t),(t=St.JSONDecode(t)||{}).params&&t.ts&&Date.now()-t.ts<1e3*Tt.minFetchIntervalSeconds?(I().v("\u7f13\u5b58\u6570\u636e\u5b58\u5728, \u5e76\u4e14\u672c\u6b21\u89e6\u53d1\u65f6\u95f4\u8ddd\u79bb\u4e0a\u6b21fetch\u89e6\u53d1\u65f6\u95f4\u672a\u8d85\u8fc7 fetch \u65f6\u95f4\u95f4\u9694, \u65e0\u9700 fetch"),n&&n(t.params)):v(function(t){I().v("\u7f13\u5b58\u6570\u636e\u4e0d\u5b58\u5728, \u6784\u5efa fetch body :",t);try{G.request({url:"https://ucc.umeng.com/v1/mini/fetch",method:"POST",data:t,success:function(t){if(t&&200===t.statusCode&&t.data&&t.data.cc){I().v("fetch \u8bf7\u6c42\u6210\u529f, \u54cd\u5e94\u6570\u636e: ",t.data);var i=Object.create(null);St.each(t.data.cc,function(t){i[t.k]=t});var a={ts:Date.now(),params:i};I().v("\u5f00\u59cb\u7f13\u5b58 fetch \u8bf7\u6c42\u7684\u4e91\u914d\u7f6e\u7ed3\u679c..."),G.setStorage(o.STORAGE_NAME,St.JSONEncode(a),function(t){I().v("\u7f13\u5b58\u4e91\u914d\u7f6e\u6210\u529f, \u7f13\u5b58\u6570\u636e\u4e3a: ",a),I().v("\u7f13\u5b58\u4e91\u914d\u7f6e\u6210\u529f, \u6210\u529f\u6d88\u606f\u4e3a: ",t),I().v("\u4e91\u914d\u62c9\u53d6\u6570\u636e\u662f\u5426\u81ea\u52a8\u6fc0\u6d3b: ",e),t&&e&&(I().v("\u6fc0\u6d3b\u4e91\u914d\u7f6e..."),o.active({params:i,callback:n}))})}else I().w("fetch \u8bf7\u6c42\u6210\u529f,\u8fd4\u56de\u7ed3\u679c\u5f02\u5e38 ",t.data),n&&n()},fail:function(e){I().w("fetch\u8bf7\u6c42\u6570\u636e\u9519\u8bef ",t,e),n&&n()}})}catch(t){I().w("urequest\u8c03\u7528\u9519\u8bef",t)}})})}}};var Nt={install:function(t){return t.rc||(t.rc=new y),t.messager.once(t.messager.messageType.CONFIG_LOADED,function(){t._log.v("plugin rc installed")}),t.rc}},Ct="_um",Ot="revenue",kt="stage",Bt="level",Mt="running",Rt="end",Dt="init",Lt="set",Ut=[Ct,kt,"start"].join("."),qt={install:function(t){t.revenue=function(e){t.trackEvent([Ct,Ot,e.group].join("."),A(e))};var e=0;return t.stage={onStart:function(n){e=Date.now(),t.trackEvent(Ut,A(n))},onEnd:function(n){"number"!=typeof n._um_sdu&&(n._um_sdu=0!==e?Date.now()-e:0),t.trackEvent([Ct,kt,Rt,n.event].join("."),A(n))},onRunning:function(e){t.trackEvent([Ct,kt,Mt,e.event].join("."),A(e))}},t.level={onInitLevel:function(e){t.trackEvent([Ct,Bt,Dt].join("."),A(e))},onSetLevel:function(e){t.trackEvent([Ct,Bt,Lt].join("."),A(e))}},t.messager.once(t.messager.messageType.CONFIG_LOADED,function(){t._log.v("plugin game-ext installed")}),t}},Vt=G.getContext();Vt.onShow(function(t){var e;I().v("game onShow: ",t),e=t.query,R=e,At.resume(t,!0)}),Vt.onHide(function(){I().v("game onHide"),At.pause()});var jt=At.init;At.init=function(t){t&&t.useOpenid&&(I().tip_w(I().repeat("!")),I().tip_w("\u60a8\u9009\u62e9\u4e86\u4f7f\u7528openid\u8fdb\u884c\u7edf\u8ba1\uff0c\u8bf7\u786e\u4fdd\u4f7f\u7528setOpenid\u56de\u4f20openid\u6216\u901a\u8fc7\u8bbe\u7f6eautoGetOpenid\u4e3atrue\uff0c\u5e76\u5728\u53cb\u76df\u540e\u53f0\u8bbe\u7f6esecret\u7531\u53cb\u76df\u5e2e\u60a8\u83b7\u53d6"),I().tip_w(I().repeat("!"))),At.resume({}),jt.call(At,t)},At.use(Nt),At.use(qt),Vt.uma=At}else null!=window.tt&&window.tt;console.log("de= ",At);var Ht=At;n.default=Ht,e.exports=n.default,cc._RF.pop()},{}]},{},["GxAd","GxAdParams","GxChecker","GxGame","GxLogo","H54399Adapter","gxGameEnd","ovad","AndroidAdapter","AndroidH5Adapter","BaseAdapter","HwAdapter","IosAdapter","KsAdapter","MiAdapter","gx_native_banner","gx_native_icon","gx_native_inner_interstitial","gx_native_interstitial","OppoAdapter","QQAdapter","TTAdMonitor","TTAdapter","VivoAdapter","WxAdapter","WxCustomAd","ZFBAdapter","GxAudioUtil","GxConstant","GxEnum","GxGameUtil","BaseGxConstant","BaseGxGame","GxBgImg","GxImgMgr","Gx_GameOverAD","Gx_TTReward","Gx_add_icon","Gx_authorize","Gx_crazypoint","Gx_gameBox","Gx_privacy","Gx_shareFriend","Gx_submsg","Gx_toast","GxFirstScene","BaseGxEnginePlatformProxy","GxEngine","GxEngineAutoTrackBridge","GxEngineConfig","GxEngineHttpTask","GxEngineLogger","GxEnginePersistence","GxEnginePlatformAPI","GxEnginePlatformProxy","GxEnginePropertyChecker","GxEngineSenderQueue","GxEngineSystemInformation","GxEngineUtil","GxSDK","TDSDK","uma.min","DataStorage","GxLog","GxTimer","GxUtils","OpenDataUtil","ResUtil"]);